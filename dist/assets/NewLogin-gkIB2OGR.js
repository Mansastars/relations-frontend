import{j as e,R as y,r as d,b as E,u as k,L as v,S as c}from"./index-CF6aRru1.js";import{M as T}from"./MansaLogo-g5zwii4N.js";import{T as P,C as V,g as R,i as C,j as D,o as F}from"./index.esm-D3udpOIv.js";import{I as A,a as B,d as O,b as _,T as $,B as G,G as W}from"./GoogleSignIn-C0sxA496.js";import{c as q,s as z,i as I}from"./createSvgIcon-B0imZhwj.js";import{E as U,R as H}from"./ResendVerificationEmail-DNVPU8HJ.js";import{D as J,S as Y}from"./Star-CdOegEmE.js";import"./clsx-B-dksMZM.js";import"./ToggleSwitch-g2SEo0VD.js";import"./index-Bvng1mpX.js";import"./x-button-CT4dcaD-.js";import"./Reusables-BQjiAsUo.js";import"./email-Bj3w0Esp.js";const K=q(e.jsx("path",{d:"M9 21c0 .5.4 1 1 1h4c.6 0 1-.5 1-1v-1H9zm3-19C8.1 2 5 5.1 5 9c0 2.4 1.2 4.5 3 5.7V17c0 .5.4 1 1 1h6c.6 0 1-.5 1-1v-2.3c1.8-1.3 3-3.4 3-5.7 0-3.9-3.1-7-7-7"}),"Lightbulb"),Q=({title:s})=>e.jsx("h1",{className:" font-bold text-2xl text-dark-blue text-center",children:s}),X=({subtitle:s})=>e.jsx("h3",{className:" text-[#98AEB5] text-center",children:s}),Z=z(P)({width:"100%","& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"rgba(26,29,50,0.5)"},"&:hover fieldset":{borderColor:"rgb(8,165,170)"},"&.Mui-focused fieldset":{borderColor:"rgb(8,165,170)"},"&.Mui-error fieldset":{borderColor:"#f44336"}},"& .MuiInputLabel-root":{color:"rgba(26,29,50,0.5)"},"& .MuiInputLabel-root.Mui-focused":{color:"rgb(8,165,170)"},"& .MuiInputLabel-root.Mui-error":{color:"#f44336"}}),S=y.forwardRef(({name:s,control:h,label:r,defaultValue:g="",rules:o={},type:i,autoFocus:p,multiline:m},u)=>{const[x,b]=d.useState(!1),f=()=>{b(t=>!t)};return e.jsx(V,{name:s,control:h,defaultValue:g,rules:o,render:({field:t,fieldState:{error:l}})=>e.jsx(Z,{...t,inputRef:u,label:r,variant:"outlined",autoFocus:p,error:!!l,type:i==="password"&&x?"text":i,multiline:m&&!0,helperText:l?l.message:"",InputProps:{endAdornment:i==="password"&&e.jsx(A,{position:"end",children:e.jsx(B,{"aria-label":"toggle password visibility",onClick:f,edge:"end",children:x?e.jsx(O,{}):e.jsx(_,{})})})}})})}),ee=R().shape({email:C().email("Invalid email").required("Please enter your email.").max(255,"Email must be less than 255 characters"),password:C().required("Please enter your password.").min(8,"Password must be at least 8 characters long.")}),{palette:se}=I(),{augmentColor:ae}=se,te=s=>ae({color:{main:s}}),le=I({palette:{mainColor:te("#08a5aa")}}),re=()=>{const{login:s}=E(),[h,r]=d.useState(!1),[g,o]=d.useState(!1),[i,p]=d.useState(""),[m,u]=d.useState(!1),x=k(),{handleSubmit:b,control:f,formState:{errors:t},reset:l}=D({resolver:F(ee),defaultValues:{email:"",password:""}}),w=()=>{r(!1)},L=()=>{o(!1),l()},M=async N=>{u(!0);try{c.fire({title:"Logging In...",text:"We are processing your login details. This will only take a few moments.",allowOutsideClick:!1,didOpen:()=>{c.showLoading()}}),p(N.email),await s(N);const a=localStorage.getItem("user"),n=JSON.parse(a);c.close(),n.isVerified===!1||n.isVerified===null?r(!0):x("/alldashboards"),l()}catch(a){c.close();let n="An error occurred while logging in";a.response&&a.response.data&&a.response.data.message&&(n=a.response.data.message),c.fire({icon:"error",title:"Submission Failed",text:`${n}. Please try again.`,confirmButtonText:"Retry"}),console.error("Failed to login: ",a)}finally{u(!1)}};return e.jsxs("div",{className:" bg-white w-full h-full p-5 flex flex-col gap-3",children:[e.jsx("a",{href:"https://relations.mansastars.com/",className:" self-center",children:e.jsx("img",{src:T,alt:"Mansa Logo",className:" h-20"})}),e.jsxs("div",{className:" flex flex-col gap-2",children:[e.jsx(Q,{title:"Welcome back!"}),e.jsx(X,{subtitle:"You talk, We organise."})]}),e.jsxs("form",{onSubmit:b(M),className:" flex flex-col gap-5 px-2 mt-5 max-md:px-0 max-md:mt-2",children:[e.jsx(S,{name:"email",control:f,error:t.email,label:"Email",autoFocus:!0}),e.jsxs("div",{className:" flex flex-col gap-1",children:[e.jsx(S,{name:"password",control:f,error:t.first_name,label:"Password",type:"password"}),e.jsx(v,{to:"/verify_email",className:" text-sm text-mansa-blue hover:text-dark-blue self-end",children:e.jsx("u",{children:"Forgot your password?"})})]}),e.jsx($,{theme:le,children:e.jsx(G,{variant:"contained",className:" w-full",color:"mainColor",type:"submit",disabled:m,children:m?"Loading...":"Log In"})})]}),e.jsx("div",{className:" w-full px-2",children:e.jsx(W,{})}),e.jsx("div",{className:" self-center mt-3",children:e.jsxs("span",{children:["Don't have an account?"," ",e.jsx(v,{to:"/auth/sign_up",className:" text-mansa-blue hover:text-dark-blue",children:e.jsx("u",{children:"Register"})})]})}),r&&e.jsx(U,{onClose:w,show:h,onClick:()=>{w(),o(!0)}}),o&&e.jsx(H,{onClose:L,show:g,userEmail:i})]})},j=({children:s})=>e.jsx("div",{className:" w-14 h-14 rounded-full bg-[rgba(26,29,50,20%)] flex items-center justify-center",children:s}),oe="/assets/DashboardImage-6G4fzUEg.png",ie=()=>e.jsxs("div",{className:"bg-[rgba(8,165,170,0.2)] w-full h-full relative flex justify-center p-8",children:[e.jsx("div",{className:" glassmorphism w-full overflow-auto p-5",children:e.jsx("img",{src:oe,alt:"Dashboard",className:"max-w-none h-screen rounded-lg"})}),e.jsx("div",{className:" absolute top-16 left-5",children:e.jsx(j,{children:e.jsx(J,{className:" text-dark-blue"})})}),e.jsx("div",{className:" absolute bottom-16 left-5",children:e.jsx(j,{children:e.jsx(K,{className:" text-dark-blue"})})}),e.jsx("div",{className:" absolute top-56 right-2",children:e.jsx(j,{children:e.jsx(Y,{className:" text-dark-blue"})})})]}),ne=()=>e.jsxs("div",{className:"flex w-full h-full",children:[e.jsx("div",{className:"w-full lg:w-2/5 md:w-1/2",children:e.jsx(re,{})}),e.jsx("div",{className:"hidden sm:block w-1/2 lg:w-3/5",children:e.jsx(ie,{})})]}),ve=()=>e.jsx("div",{className:" w-full h-fit",children:e.jsx(ne,{})});export{ve as default};
