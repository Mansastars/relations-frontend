import{r as a,j as e,a as M,u as _,L as B}from"./index-CF6aRru1.js";import{S as u,B as D}from"./Reusables-BQjiAsUo.js";import{P as R,T as Y}from"./TermOfUsageModal-CEf5tSaI.js";import{c as q}from"./checkPasswordStrength-CgIlBevu.js";import{M as w}from"./ToggleSwitch-g2SEo0VD.js";import"./index-Bvng1mpX.js";import{e as J}from"./email-Bj3w0Esp.js";import{x as W}from"./x-button-CT4dcaD-.js";import{E as P,a as E}from"./eye-BldY_G7t.js";import"./createLucideIcon-C95knvvK.js";function A({userEmail:s,onClose:f,show:p}){const[n,t]=a.useState(""),[c,l]=a.useState(!1),[m,h]=a.useState(!1),[i,g]=a.useState(!1);a.useEffect(()=>{let r;return c&&(r=setTimeout(()=>{t("")},3e3)),()=>clearTimeout(r)},[c]);const j=async()=>{g(!0),h(!1),l(!1);const r={email:s};try{await M.post("users/resend-verification",r),l(!0),t("Success! Your confirmation email has been resent. Please check your inbox.")}catch(b){console.log(b),t(""),l(!1),h(!0)}finally{g(!1)}};return e.jsx(e.Fragment,{children:e.jsxs(w,{show:p,onClose:f,children:[e.jsx(w.Header,{children:c&&e.jsx("p",{className:" text-mansa-blue font-bold max-sm:text-base",children:n})}),e.jsx(w.Body,{children:e.jsxs("div",{className:"flex flex-col gap-5 items-center",children:[m?e.jsx("img",{src:W,alt:"Error Icon",width:100,className:"max-sm:w-14"}):e.jsx("img",{src:J,alt:"Email icon",width:100,className:" max-sm:w-14"}),e.jsx("h1",{className:" font-bold text-3xl text-dark-blue max-sm:text-xl",children:"Email Confirmation"}),i&&e.jsx("p",{className:"text-center text-dark-blue max-sm:text-base",children:"Processing..."}),!m&&!i&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-center text-dark-blue max-sm:text-base",children:["We have sent an email to"," ",e.jsx("span",{className:"text-mansa-blue",children:s})," to confirm the validity of your email address. After receicing the email, please follow the link provided to complete your registration."]}),e.jsx("strong",{children:e.jsxs("p",{className:"text-center text-dark-blue max-sm:text-base mt-5",children:["If you do not see the email, please check your"," ",e.jsx("span",{className:" font-bold",children:"spam or junk folder"}),"."]})})]}),m&&e.jsx("p",{className:"text-center text-red-500 max-sm:text-base",children:"Unable to send the email. Please try again later."})]})}),i?null:e.jsx(w.Footer,{children:e.jsxs("p",{className:"text-dark-blue text-center max-sm:text-base",children:["If you did not receive the email,"," ",e.jsx("span",{className:"text-mansa-blue font-semibold cursor-pointer hover:text-dark-blue",onClick:j,children:"Resend confirmation mail"})]})})]})})}function te(){const[s,f]=a.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),[p,n]=a.useState(""),[t,c]=a.useState(!1),[l,m]=a.useState(!1),[h,i]=a.useState(!1),[g,j]=a.useState(!1),[r,b]=a.useState(!1),[N,T]=a.useState(0),[U,I]=a.useState(!1),[L,v]=a.useState(!1),O=_(),d=x=>{if(x&&x.target){const{name:S,value:o}=x.target;f(F=>({...F,[S]:o}));const k=q(s.password);T(k),I(k>=2)}},V=async x=>{x.preventDefault(),b(!0);const S={first_name:s.firstName,last_name:s.lastName,email:s.email,password:s.password,confirm_password:s.confirmPassword};try{U?(await M.post("/users/register",S),v(!0)):(n("Password must be at least eight characters long."),window.scrollTo(0,0))}catch(o){console.log(o),o.response&&o.response.data&&o.response.data.message?n(o.response.data.message):n("Something went wrong. Please try again."),window.scrollTo(0,0)}finally{b(!1)}},z=()=>{f({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),v(!1),O("/auth/login")},y=()=>{c(!t)},C=()=>{m(!l)};return e.jsxs("div",{className:"mx-2 flex justify-center",children:[e.jsx("div",{className:"bg-white p-5 md:p-16 flex flex-col mt-10 mb-5 rounded-2xl h-full w-1/2 max-lg:w-[70%] max-md:w-[90%]",children:e.jsxs("div",{className:" flex flex-col gap-5 h-fit ",children:[e.jsxs("div",{className:" flex flex-col justify-center items-center",children:[e.jsx("h1",{className:" text-dark-blue font-extrabold text-5xl mb-5",children:"Sign Up"}),e.jsxs("p",{className:" text-base text-dark-blue",children:["You have an account"," ",e.jsx(B,{to:"/auth/login",className:" text-mansa-blue hover:text-dark-blue",children:e.jsx("u",{children:"Log In"})})]})]}),e.jsxs("form",{action:"",onSubmit:V,className:" flex flex-col gap-5 justify-center items-center ",children:[e.jsxs("div",{className:" w-full flex flex-col gap-5",children:[p&&e.jsx("p",{className:" text-red-500 font-semibold text-center",children:p}),e.jsxs("div",{className:" flex gap-5 max-sm:flex-col",children:[e.jsx("div",{className:" w-full",children:e.jsx(u,{type:"text",title:"First Name*",placeholder:"Sundi",id:"firstName",autoComplete:"first-name",value:s.firstName,onChange:d})}),e.jsx("div",{className:" w-full",children:e.jsx(u,{type:"text",title:"Last Name*",placeholder:"Joe",id:"lastName",autoComplete:"last-name",value:s.lastName,onChange:d})})]}),e.jsxs("div",{className:" w-full flex flex-col gap-5",children:[e.jsx(u,{type:"email",title:"Email*",placeholder:"SundiJoe@gmail.com",id:"email",autoComplete:"email",value:s.email,onChange:d}),e.jsxs("div",{children:[e.jsx(u,{type:t?"text":"password",title:"Password*",id:"password",value:s.password,placeholder:"•••••••••",onChange:d,icon:t?e.jsx(P,{size:16,onClick:y}):e.jsx(E,{size:16,onClick:y})}),N>0&&e.jsx("p",{className:`text-sm ${N>=2?"text-green-500":"text-red-500"}`,children:N>=2?"Strong password":"Weak password"})]}),e.jsx(u,{type:l?"text":"password",title:"Confirm Password*",id:"confirmPassword",placeholder:"•••••••••",value:s.confirmPassword,onChange:d,icon:l?e.jsx(P,{size:16,onClick:C}):e.jsx(E,{size:16,onClick:C})}),e.jsxs("div",{className:" flex flex-row gap-2 items-center",children:[e.jsx("input",{type:"checkbox",name:"T&C",required:!0,className:" text-mansa-blue"}),e.jsxs("p",{className:" text-xs",children:["Yes, I agree to the"," ",e.jsx("span",{onClick:()=>i(!0),className:" text-mansa-blue underline cursor-pointer hover:text-dark-blue",children:"Privacy Policy"})," ","and"," ",e.jsx("span",{onClick:()=>j(!0),className:" text-mansa-blue underline cursor-pointer hover:text-dark-blue",children:"Terms of Usage"}),"."]})]})]})]}),e.jsx(D,{type:"submit",text:r?"Signing Up...":"Sign Up",disabled:r,className:" max-md:w-full"})]})]})}),e.jsx(R,{open:h,onClose:()=>i(!1)}),e.jsx(Y,{open:g,onClose:()=>j(!1)}),v&&e.jsx(A,{userEmail:s.email,onClose:z,show:L})]})}export{te as default};
