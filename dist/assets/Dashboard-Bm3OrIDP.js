import{r as l,j as e,a as _,u as V,$ as I,S as D,b as X}from"./index-CmSeK_KP.js";import{F as z,a as P,D as L,b as H,c as K,B as T}from"./Reusables-m-BucBxu.js";import{X as W,S as q}from"./SidePanel-BHhKgt7Z.js";import{c as F}from"./index-C9JbqnLz.js";import{X as k}from"./x-circle-OB6X5H-I.js";import{F as J}from"./FreeTrialBanner-mrjCoe9U.js";/* empty css              */import"./createLucideIcon-C3U0c-Qf.js";function Q({onClose:i}){const u=l.useRef(),p=y=>{u.current===y.target&&i()},[r,b]=l.useState({title:"",firstName:"",lastName:"",company:"",dealSize:0,email:"",phoneNumber:"",notes:"",currentStage:"",datetime:""}),[w,h]=l.useState(""),[f,N]=l.useState(""),[C,x]=l.useState(!1),m=y=>{if(y&&y.target){const{name:j,value:v}=y.target;b(g=>({...g,[j]:v}))}},d=async y=>{y.preventDefault();const j=localStorage.getItem("currentDealId");if(!j){console.error("Deal ID not found in localStorage");return}let v;r.datetime&&(v=new Date(r.datetime).toISOString());const g={deal_id:j,title:r.title,first_name:r.firstName,last_name:r.lastName,organization_name:r.company,deal_size:r.dealSize,email:r.email,phone_number:r.phoneNumber,stage:r.currentStage,meeting_date:v,notes:r.notes};try{const S=await _.post(`/deals/create-contact/${j}`,g);console.log(S),h("Contact created successfully."),window.location.reload(),N(""),b({title:"",firstName:"",lastName:"",company:"",dealSize:0,email:"",phoneNumber:"",notes:"",currentStage:"",datetime:""}),setTimeout(()=>{x(!1),h(""),i()},2e3)}catch(S){console.log(S),N("Something went wrong. Please try again."),h(""),x(!1)}};return e.jsx("div",{ref:u,onClick:p,className:" fixed z-50 inset-0 bg-dark-blue bg-opacity-30 backdrop-blur-sm flex justify-center overflow-y-auto h-screen",children:e.jsxs("div",{className:" mt-10 flex flex-col gap-5 w-full",children:[e.jsx("button",{onClick:i,className:" mr-20 max-sm:mr-10 self-end text-dark-blue",children:e.jsx(W,{size:30})}),e.jsxs("div",{className:" bg-white rounded-xl px-20 max-md:px-5 py-10 flex flex-col gap-7 items-center mx-20 max-md:mx-10",children:[e.jsx("h1",{className:" text-dark-blue text-3xl max-md:text-2xl max-sm:text-xl font-extrabold",children:"Add a new contact to your pipeline"}),e.jsxs("form",{action:"",onSubmit:d,className:" flex flex-col gap-5 w-full",children:[w&&e.jsx("p",{className:" text-mansa-blue font-semibold",children:w}),f&&e.jsx("p",{className:" text-[#ff0000] font-semibold",children:f}),e.jsxs("div",{className:"flex flex-col gap-8 w-full",children:[e.jsxs("div",{className:" flex flex-row flex-wrap gap-5 justify-center max-md:justify-start",children:[e.jsx(z,{type:"text",title:"Title",placeholder:"Mr./Mrs./Ms./Dr./Engr.",id:"title",value:r.title,onChange:m}),e.jsx(P,{type:"text",title:"First Name*",placeholder:"Sundi",id:"firstName",value:r.firstName,onChange:m}),e.jsx(P,{type:"text",title:"Last Name*",placeholder:"Keita",id:"lastName",value:r.lastName,onChange:m})]}),e.jsxs("div",{className:" flex flex-row flex-wrap gap-x-5 gap-y-8 justify-center max-md:justify-start",children:[e.jsx(z,{type:"text",title:"Company",placeholder:"Mansa, LLC",id:"company",value:r.company,onChange:m}),e.jsx(z,{type:"number",title:"Deal Size ($)",placeholder:"1,000,000",id:"dealSize",min:0,value:r.dealSize,onChange:m}),e.jsx(z,{type:"email",title:"Contact Email",placeholder:"sundi@sankore.com",id:"email",value:r.email,onChange:m}),e.jsx(z,{type:"tel",title:"Phone Number",placeholder:"+123456789",id:"phoneNumber",maxLength:15,value:r.phoneNumber,onChange:m}),e.jsx(L,{label:"Current Stage",id:"currentStage",value:r.currentStage,onChange:m}),e.jsx(H,{title:"Meeting Date",value:r.datetime,onChange:m})]}),e.jsx("div",{children:e.jsx(K,{value:r.notes,onChange:m})})]}),e.jsx("div",{className:" mt-8 w-full flex items-center justify-center",children:e.jsx(T,{type:"submit",disabled:C,text:"Create Contact"})})]})]})]})})}function B({titles:i,titleColors:u,contents:p}){const r=F("shadow-lg","rounded-2xl","w-full"),b={color:u,minWidth:"165px"},w={backgroundColor:"rgb(255, 255, 255)"};return e.jsxs("div",{className:" flex flex-col gap-5 items-center w-full ",style:{maxWidth:"calc(100% - 224px)"},children:[e.jsx("div",{className:r,style:w,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center w-full ",style:b,children:i})}),e.jsx("div",{className:" w-full overflow-x-hidden",style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:p})]})}function M({onClose:i,contactDetails:u}){const[p,r]=l.useState(""),[b,w]=l.useState(""),[h,f]=l.useState(!1),N=l.useRef(),C=g=>{N.current===g.target&&i()},x=g=>{if(g&&g.target){const{name:S,value:t}=g.target;y(a=>({...a,[S]:t}))}},m=g=>g?new Date(g).toISOString().slice(0,16):"",[d,y]=l.useState({title:u.title,first_name:u.first_name,last_name:u.last_name,organization_name:u.organization_name,deal_size:u.deal_size,email:u.email,phone_number:u.phone_number,stage:u.stage,datetime:m(u.meeting_date),notes:u.notes});let j;d.datetime&&(j=new Date(d.datetime).toISOString());const v=async g=>{g.preventDefault();const S=localStorage.getItem("currentDealId");if(!S){console.error("Deal ID not found in localStorage");return}const a={userId:localStorage.getItem("user").id,title:d.title,first_name:d.first_name,last_name:d.last_name,organization_name:d.organization_name,deal_size:d.deal_size,email:d.email,phone_number:d.phone_number,stage:d.stage,meeting_date:j,notes:d.notes};try{await _.patch(`deals/edit-contact/${S}/${u.id}`,a),r("Contact updated successfully."),w(""),setTimeout(()=>{f(!1),r(""),i(),window.location.reload()},2e3)}catch(n){console.log(n),w("Something went wrong. Please try again."),r(""),f(!1)}};return e.jsx("div",{ref:N,onClick:C,className:"fixed z-50 inset-0 bg-dark-blue bg-opacity-30 backdrop-blur-sm flex justify-center overflow-y-auto h-screen",children:e.jsxs("div",{className:" mt-10 flex flex-col gap-5",children:[e.jsx("button",{onClick:i,className:"mr-20 max-md:mr-10 self-end text-dark-blue",children:e.jsx(W,{size:30})}),e.jsxs("div",{className:"bg-white rounded-xl px-20 max-md:px-5 py-10 flex flex-col gap-7 items-center mx-20 max-md:mx-10",children:[e.jsx("h1",{className:"text-dark-blue text-3xl max-md:text-2xl max-sm:text-xl font-extrabold",children:"Edit Contact Details"}),e.jsxs("form",{action:"",onSubmit:v,className:"flex flex-col gap-5",children:[p&&e.jsx("p",{className:"text-mansa-blue font-semibold",children:p}),b&&e.jsx("p",{className:"text-[#ff0000] font-semibold",children:b}),e.jsxs("div",{className:"flex flex-row items-center justify-center flex-wrap gap-5 w-full",children:[e.jsx(z,{type:"text",title:"Title",placeholder:"Mr./Mrs./Ms./Dr./Engr.",id:"title",value:d.title,onChange:x}),e.jsx(z,{type:"text",title:"First Name",placeholder:"Sundi",id:"first_name",value:d.first_name,onChange:x}),e.jsx(z,{type:"text",title:"Last Name",placeholder:"Keita",id:"last_name",value:d.last_name,onChange:x}),e.jsx(z,{type:"text",title:"Company",placeholder:"Mansa, LLC",id:"organization_name",value:d.organization_name,onChange:x}),e.jsx(z,{type:"number",title:"Deal Size ($)",placeholder:"1,000,000",id:"deal_size",min:0,value:d.deal_size,onChange:x}),e.jsx(z,{type:"email",title:"Contact Email",placeholder:"sundi@sankore.com",id:"email",value:d.email,onChange:x}),e.jsx(z,{type:"tel",title:"Phone Number",placeholder:"+123456789",id:"phone_number",value:d.phone_number,onChange:x,maxLength:15}),e.jsx(L,{label:"Current Stage",id:"stage",value:d.stage,onChange:x}),e.jsx(H,{title:"Meeting Date",value:d.datetime,onChange:x})]}),e.jsx("div",{children:e.jsx(K,{value:d.notes,onChange:x})}),e.jsx("div",{className:"mt-8 w-full flex items-center justify-center",children:e.jsx(T,{type:"submit",disabled:h,text:"Update Contact"})})]})]})]})})}const $=i=>i.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");function Z({borderColour:i}){const u=localStorage.getItem("currentDealId"),p={border:`2px solid  ${i}`},[r,b]=l.useState([]),[w,h]=l.useState(!0),[f,N]=l.useState(null),[C,x]=l.useState(!1),[m,d]=l.useState(null);if(V(),l.useEffect(()=>{(async()=>{const a=localStorage.getItem("currentDealId");if(!a){console.error("Deal ID not found in localStorage");return}try{const n=await _.get(`deals/research-contacts/${a}`);b(n.data.data),h(!1)}catch(n){N(n),h(!1)}})()},[]),w)return e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(I,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})});if(f)return e.jsxs("div",{children:["Error: ",f.message]});const y=async t=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(async a=>{if(a.isConfirmed)try{await _.delete(`contacts/delete-contact/${u}/${t}`),b(r.filter(n=>n.id!==t)),D.fire("Deleted!","Your contact entry has been deleted.","success")}catch(n){console.error("Error:",n),D.fire("Error","Failed to delete contact","error")}})},j=async t=>{try{const n=(await _.get(`contacts/single-contact/${u}/${t}`)).data.contact;d(n),x(!0)}catch(a){console.error("Error fetching contact details:",a)}},v=()=>{x(!1),d(null)},g=(t,a)=>t.length<=a?t:`${t.substring(0,a-3)}...`,S=(t,a)=>{const n=t.replace(/\D/g,"");return n.length<=a?t:"+"+(n.substring(0,a-1)+"...")};return e.jsxs(e.Fragment,{children:[r.length===0?e.jsx("div",{}):r.map(t=>e.jsxs("div",{onDoubleClick:()=>j(t.id),className:"flex flex-col rounded-2xl mb-2 h-44 cursor-pointer",style:{...p,minWidth:"165px"},title:"Double click to edit contact",children:[e.jsxs("div",{className:"flex flex-col p-2 rounded-t-2xl border-b-dark-blue items-start",style:{background:i},children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white",children:`${t.first_name} ${t.last_name}`.length>13?`${t.first_name} ${t.last_name}`.substring(0,10)+"...":`${t.first_name} ${t.last_name}`}),e.jsx("button",{onClick:()=>y(t.id),className:"text-white hover:text-[#FF0000] cursor-pointer",children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-white",children:t.organization_name?t.organization_name.length>15?t.organization_name.substring(0,15)+"...":t.organization_name:"No company entered"})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size: ",t.deal_size?t.deal_size.length>15?"$"+$(t.deal_size.substring(0,15))+"...":"$"+$(t.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting: ",t.meeting_date?new Date(t.meeting_date).toLocaleString():"No meeting date entered"]}),e.jsx("p",{className:"text-xs",children:t.email?g(t.email,20):"No email entered"}),e.jsx("p",{className:"text-xs",children:t.phone_number?S(t.phone_number,15):"No phone number entered"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap",children:t.notes.length>20?t.notes.substring(0,20)+"...":t.notes})})]})]},t.id)),C&&m&&e.jsx(M,{onClose:v,contactDetails:m})]})}function A({borderColour:i}){const u=localStorage.getItem("currentDealId"),p={border:`2px solid  ${i}`},[r,b]=l.useState([]),[w,h]=l.useState(!0),[f,N]=l.useState(null),[C,x]=l.useState(!1),[m,d]=l.useState(null);if(l.useEffect(()=>{(async()=>{const a=localStorage.getItem("currentDealId");if(!a){console.error("Deal ID not found in localStorage");return}try{const n=await _.get(`deals/contacted-contacts/${a}`);b(n.data.data),h(!1)}catch(n){N(n),h(!1)}})()},[]),w)return e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(I,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})});if(f)return e.jsxs("div",{children:["Error: ",f.message]});const y=async t=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(async a=>{if(a.isConfirmed)try{await _.delete(`contacts/delete-contact/${u}/${t}`),b(r.filter(n=>n.id!==t)),D.fire("Deleted!","Your contact entry has been deleted.","success")}catch(n){console.error("Error:",n),D.fire("Error","Failed to delete contact","error")}})},j=async t=>{try{const n=(await _.get(`contacts/single-contact/${u}/${t}`)).data.contact;d(n),x(!0)}catch(a){console.error("Error fetching contact details:",a)}},v=()=>{x(!1),d(null)},g=(t,a)=>t.length<=a?t:`${t.substring(0,a-3)}...`,S=(t,a)=>{const n=t.replace(/\D/g,"");return n.length<=a?t:"+"+(n.substring(0,a-1)+"...")};return e.jsxs(e.Fragment,{children:[r.length===0?e.jsx("div",{}):r.map(t=>e.jsxs("div",{title:"Double click to edit contact",onDoubleClick:()=>j(t.id),className:"flex flex-col rounded-2xl mb-2 h-44 cursor-pointer",style:{...p,minWidth:"165px"},children:[e.jsxs("div",{className:"flex flex-col p-2 rounded-t-2xl border-b-dark-blue items-start",style:{background:i},children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white",children:`${t.first_name} ${t.last_name}`.length>13?`${t.first_name} ${t.last_name}`.substring(0,10)+"...":`${t.first_name} ${t.last_name}`}),e.jsx("button",{onClick:()=>y(t.id),className:"text-white hover:text-[#FF0000] cursor-pointer",children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-white",children:t.organization_name?t.organization_name.length>15?t.organization_name.substring(0,15)+"...":t.organization_name:"No company entered"})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size: ",t.deal_size?t.deal_size.length>15?"$"+$(t.deal_size.substring(0,15))+"...":"$"+$(t.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting: ",t.meeting_date?new Date(t.meeting_date).toLocaleString():"No meeting date entered"]}),e.jsx("p",{className:"text-xs",children:t.email?g(t.email,20):"No email entered"}),e.jsx("p",{className:"text-xs",children:t.phone_number?S(t.phone_number,15):"No phone number entered"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap",children:t.notes.length>20?t.notes.substring(0,20)+"...":t.notes})})]})]},t.id)),C&&m&&e.jsx(M,{onClose:v,contactDetails:m})]})}function O({borderColour:i}){const u=localStorage.getItem("currentDealId"),p={border:`2px solid  ${i}`},[r,b]=l.useState([]),[w,h]=l.useState(!0),[f,N]=l.useState(null),[C,x]=l.useState(!1),[m,d]=l.useState(null);if(l.useEffect(()=>{(async()=>{const a=localStorage.getItem("currentDealId");if(!a){console.error("Deal ID not found in localStorage");return}try{const n=await _.get(`deals/pitch-contacts/${a}`);b(n.data.data),h(!1)}catch(n){N(n),h(!1)}})()},[]),w)return e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(I,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})});if(f)return e.jsxs("div",{children:["Error: ",f.message]});const y=(t,a)=>t.length<=a?t:`${t.substring(0,a-3)}...`,j=(t,a)=>{const n=t.replace(/\D/g,"");return n.length<=a?t:"+"+(n.substring(0,a-1)+"...")},v=async t=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(async a=>{if(a.isConfirmed)try{await _.delete(`contacts/delete-contact/${u}/${t}`),b(r.filter(n=>n.id!==t)),D.fire("Deleted!","Your contact entry has been deleted.","success")}catch(n){console.error("Error:",n),D.fire("Error","Failed to delete contact","error")}})},g=async t=>{try{const n=(await _.get(`contacts/single-contact/${u}/${t}`)).data.contact;d(n),x(!0)}catch(a){console.error("Error fetching contact details:",a)}},S=()=>{x(!1),d(null)};return e.jsxs(e.Fragment,{children:[r.length===0?e.jsx("div",{}):r.map(t=>e.jsxs("div",{onDoubleClick:()=>g(t.id),title:"Double click to edit contact",className:"flex flex-col rounded-2xl mb-2 h-44 cursor-pointer",style:{...p,minWidth:"165px"},children:[e.jsxs("div",{className:"flex flex-col p-2 rounded-t-2xl border-b-dark-blue items-start",style:{background:i},children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white",children:`${t.first_name} ${t.last_name}`.length>13?`${t.first_name} ${t.last_name}`.substring(0,10)+"...":`${t.first_name} ${t.last_name}`}),e.jsx("button",{onClick:()=>v(t.id),className:"text-white hover:text-[#FF0000] cursor-pointer",children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-white",children:t.organization_name?t.organization_name.length>15?t.organization_name.substring(0,15)+"...":t.organization_name:"No company entered"})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size: ",t.deal_size?t.deal_size.length>15?"$"+$(t.deal_size.substring(0,15))+"...":"$"+$(t.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting: ",t.meeting_date?new Date(t.meeting_date).toLocaleString():"No meeting date entered"]}),e.jsx("p",{className:"text-xs",children:t.email?y(t.email,20):"No email entered"}),e.jsx("p",{className:"text-xs",children:t.phone_number?j(t.phone_number,15):"No phone number entered"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap",children:t.notes.length>20?t.notes.substring(0,20)+"...":t.notes})})]})]},t.id)),C&&m&&e.jsx(M,{onClose:S,contactDetails:m})]})}function R({borderColour:i}){const u=localStorage.getItem("currentDealId"),p={border:`2px solid  ${i}`},[r,b]=l.useState([]),[w,h]=l.useState(!0),[f,N]=l.useState(null),[C,x]=l.useState(!1),[m,d]=l.useState(null);if(l.useEffect(()=>{(async()=>{const a=localStorage.getItem("currentDealId");if(!a){console.error("Deal ID not found in localStorage");return}try{const n=await _.get(`deals/negotiation-contacts/${a}`);b(n.data.data),h(!1)}catch(n){N(n),h(!1)}})()},[]),w)return e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(I,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})});if(f)return e.jsxs("div",{children:["Error: ",f.message]});const y=async t=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(async a=>{if(a.isConfirmed)try{await _.delete(`contacts/delete-contact/${u}/${t}`),b(r.filter(n=>n.id!==t)),D.fire("Deleted!","Your contact entry has been deleted.","success")}catch(n){console.error("Error:",n),D.fire("Error","Failed to delete contact","error")}})},j=async t=>{try{const n=(await _.get(`contacts/single-contact/${u}/${t}`)).data.contact;d(n),x(!0)}catch(a){console.error("Error fetching contact details:",a)}},v=()=>{x(!1),d(null)},g=(t,a)=>t.length<=a?t:`${t.substring(0,a-3)}...`,S=(t,a)=>{const n=t.replace(/\D/g,"");return n.length<=a?t:"+"+(n.substring(0,a-1)+"...")};return e.jsxs(e.Fragment,{children:[r.length===0?e.jsx("div",{}):r.map(t=>e.jsxs("div",{onDoubleClick:()=>j(t.id),title:"Double click to edit contact",className:"flex flex-col rounded-2xl mb-2 h-44 cursor-pointer",style:{...p,minWidth:"165px"},children:[e.jsxs("div",{className:"flex flex-col p-2 rounded-t-2xl border-b-dark-blue items-start",style:{background:i},children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white",children:`${t.first_name} ${t.last_name}`.length>13?`${t.first_name} ${t.last_name}`.substring(0,10)+"...":`${t.first_name} ${t.last_name}`}),e.jsx("button",{onClick:()=>y(t.id),className:"text-white hover:text-[#FF0000] cursor-pointer",children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-white",children:t.organization_name?t.organization_name.length>15?t.organization_name.substring(0,15)+"...":t.organization_name:"No company entered"})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size: ",t.deal_size?t.deal_size.length>15?"$"+$(t.deal_size.substring(0,15))+"...":"$"+$(t.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting: ",t.meeting_date?new Date(t.meeting_date).toLocaleString():"No meeting date entered"]}),e.jsx("p",{className:"text-xs",children:t.email?g(t.email,20):"No email entered"}),e.jsx("p",{className:"text-xs",children:t.phone_number?S(t.phone_number,15):"No phone number entered"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap",children:t.notes.length>20?t.notes.substring(0,20)+"...":t.notes})})]})]},t.id)),C&&m&&e.jsx(M,{onClose:v,contactDetails:m})]})}function U({borderColour:i}){const u=localStorage.getItem("currentDealId"),p={border:`2px solid  ${i}`},[r,b]=l.useState([]),[w,h]=l.useState(!0),[f,N]=l.useState(null),[C,x]=l.useState(!1),[m,d]=l.useState(null);if(l.useEffect(()=>{(async()=>{const a=localStorage.getItem("currentDealId");if(!a){console.error("Deal ID not found in localStorage");return}try{const n=await _.get(`deals/deal-contacts/${a}`);b(n.data.data),h(!1)}catch(n){N(n),h(!1)}})()},[]),w)return e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(I,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})});if(f)return e.jsxs("div",{children:["Error: ",f.message]});const y=(t,a)=>t.length<=a?t:`${t.substring(0,a-3)}...`,j=async t=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(async a=>{if(a.isConfirmed)try{await _.delete(`contacts/delete-contact/${u}/${t}`),b(r.filter(n=>n.id!==t)),D.fire("Deleted!","Your contact entry has been deleted.","success")}catch(n){console.error("Error:",n),D.fire("Error","Failed to delete contact","error")}})},v=(t,a)=>{const n=t.replace(/\D/g,"");return n.length<=a?t:"+"+(n.substring(0,a-1)+"...")},g=async t=>{try{const n=(await _.get(`contacts/single-contact/${u}/${t}`)).data.contact;d(n),x(!0)}catch(a){console.error("Error fetching contact details:",a)}},S=()=>{x(!1),d(null)};return e.jsxs(e.Fragment,{children:[r.length===0?e.jsx("div",{}):r.map(t=>e.jsxs("div",{onDoubleClick:()=>g(t.id),title:"Double click to edit contact",className:"flex flex-col rounded-2xl max-w-34 mb-2 h-44 cursor-pointer",style:{...p,minWidth:"165px"},children:[e.jsxs("div",{className:"flex flex-col p-2 rounded-t-2xl border-b-dark-blue items-start",style:{background:i},children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white",children:`${t.first_name} ${t.last_name}`.length>13?`${t.first_name} ${t.last_name}`.substring(0,10)+"...":`${t.first_name} ${t.last_name}`}),e.jsx("button",{onClick:()=>j(t.id),className:"text-white hover:text-[#FF0000] cursor-pointer",children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-white",children:t.organization_name?t.organization_name.length>15?t.organization_name.substring(0,15)+"...":t.organization_name:"No company entered"})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size: ",t.deal_size?t.deal_size.length>15?"$"+$(t.deal_size.substring(0,15))+"...":"$"+$(t.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting: ",t.meeting_date?new Date(t.meeting_date).toLocaleString():"No meeting date entered"]}),e.jsx("p",{className:"text-xs",children:t.email?y(t.email,20):"No email entered"}),e.jsx("p",{className:"text-xs",children:t.phone_number?v(t.phone_number,15):"No phone number entered"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap",children:t.notes.length>20?t.notes.substring(0,20)+"...":t.notes})})]})]},t.id)),C&&m&&e.jsx(M,{onClose:S,contactDetails:m})]})}function G({borderColour:i}){const u=localStorage.getItem("currentDealId"),p={border:`2px solid  ${i}`},[r,b]=l.useState([]),[w,h]=l.useState(!0),[f,N]=l.useState(null),[C,x]=l.useState(!1),[m,d]=l.useState(null);if(l.useEffect(()=>{(async()=>{const a=localStorage.getItem("currentDealId");if(!a){console.error("Deal ID not found in localStorage");return}try{const n=await _.get(`deals/rejection-contacts/${a}`);b(n.data.data),h(!1)}catch(n){N(n),h(!1)}})()},[]),w)return e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(I,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})});if(f)return e.jsxs("div",{children:["Error: ",f.message]});const y=async t=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(async a=>{if(a.isConfirmed)try{await _.delete(`contacts/delete-contact/${u}/${t}`),b(r.filter(n=>n.id!==t)),D.fire("Deleted!","Your contact entry has been deleted.","success")}catch(n){console.error("Error:",n),D.fire("Error","Failed to delete contact","error")}})},j=async t=>{try{const n=(await _.get(`contacts/single-contact/${u}/${t}`)).data.contact;d(n),x(!0)}catch(a){console.error("Error fetching contact details:",a)}},v=()=>{x(!1),d(null)},g=(t,a)=>t.length<=a?t:`${t.substring(0,a-3)}...`,S=(t,a)=>{const n=t.replace(/\D/g,"");return n.length<=a?t:"+"+(n.substring(0,a-1)+"...")};return e.jsxs(e.Fragment,{children:[r.length===0?e.jsx("div",{}):r.map(t=>e.jsxs("div",{onDoubleClick:()=>j(t.id),title:"Double click to edit contact",className:"flex flex-col rounded-2xl mb-2 h-44 cursor-pointer",style:{...p,minWidth:"165px"},children:[e.jsxs("div",{className:"flex flex-col p-2 rounded-t-2xl border-b-dark-blue items-start",style:{background:i},children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white",children:`${t.first_name} ${t.last_name}`.length>13?`${t.first_name} ${t.last_name}`.substring(0,10)+"...":`${t.first_name} ${t.last_name}`}),e.jsx("button",{onClick:()=>y(t.id),className:"text-white cursor-pointer",children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-white",children:t.organization_name?t.organization_name.length>15?t.organization_name.substring(0,15)+"...":t.organization_name:"No company entered"})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size: ",t.deal_size?t.deal_size.length>15?"$"+$(t.deal_size.substring(0,15))+"...":"$"+$(t.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting: ",t.meeting_date?new Date(t.meeting_date).toLocaleString():"No meeting date entered"]}),e.jsx("p",{className:"text-xs",children:t.email?g(t.email,20):"No email entered"}),e.jsx("p",{className:"text-xs",children:t.phone_number?S(t.phone_number,15):"No phone number entered"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap",children:t.notes.length>20?t.notes.substring(0,20)+"...":t.notes})})]})]},t.id)),C&&m&&e.jsx(M,{onClose:v,contactDetails:m})]})}function ee({borderColour:i,titleColors:u}){const p=localStorage.getItem("currentDealId"),r={border:`2px solid  ${i}`},b=F("shadow-lg","rounded-2xl","w-full"),w={color:u,minWidth:"165px"},h={backgroundColor:"rgb(255, 255, 255)"},[f,N]=l.useState([]),[C,x]=l.useState(!0),[m,d]=l.useState(null),[y,j]=l.useState(!1),[v,g]=l.useState(null);if(l.useEffect(()=>{(async()=>{const o=localStorage.getItem("currentDealId");if(!o){console.error("Deal ID not found in localStorage");return}try{const c=await _.get(`deals/prospect-contacts/${o}`);N(c.data.data),x(!1)}catch(c){d(c),x(!1)}})()},[]),C)return e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(I,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})});if(m)return e.jsxs("div",{children:["Error: ",m.message]});const S=async s=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(async o=>{if(o.isConfirmed)try{await _.delete(`contacts/delete-contact/${p}/${s}`),N(f.filter(c=>c.id!==s)),D.fire("Deleted!","Your contact entry has been deleted.","success")}catch(c){console.error("Error:",c),D.fire("Error","Failed to delete contact","error")}})},t=async s=>{try{const c=(await _.get(`contacts/single-contact/${p}/${s}`)).data.contact;g(c),j(!0)}catch(o){console.error("Error fetching contact details:",o)}},a=()=>{j(!1),g(null)},n=(s,o)=>s.length<=o?s:`${s.substring(0,o-3)}...`,E=(s,o)=>{const c=s.replace(/\D/g,"");return c.length<=o?s:"+"+(c.substring(0,o-1)+"...")};return e.jsxs(e.Fragment,{children:[f.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:b,style:h,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:w,children:"Prospect"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:f.map(s=>e.jsxs("div",{onDoubleClick:()=>t(s.id),title:"Double click to edit contact",className:"flex flex-col rounded-2xl mb-2 h-44 cursor-pointer",style:{...r,minWidth:"165px"},children:[e.jsxs("div",{className:"flex flex-col p-2 rounded-t-2xl border-b-dark-blue items-start",style:{background:i},children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white",children:`${s.first_name} ${s.last_name}`.length>13?`${s.first_name} ${s.last_name}`.substring(0,10)+"...":`${s.first_name} ${s.last_name}`}),e.jsx("button",{onClick:()=>S(s.id),className:"text-white hover:text-[#FF0000] cursor-pointer",children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-white",children:s.organization_name?s.organization_name.length>15?s.organization_name.substring(0,15)+"...":s.organization_name:"No company entered"})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size: ",s.deal_size?s.deal_size.length>15?"$"+$(s.deal_size.substring(0,15))+"...":"$"+$(s.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting: ",s.meeting_date?new Date(s.meeting_date).toLocaleString():"No meeting date entered"]}),e.jsx("p",{className:"text-xs",children:s.email?n(s.email,20):"No email entered"}),e.jsx("p",{className:"text-xs",children:s.phone_number?E(s.phone_number,15):"No phone number entered"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap",children:s.notes.length>20?s.notes.substring(0,20)+"...":s.notes})})]})]},s.id))})]}):null,y&&v&&e.jsx(M,{onClose:a,contactDetails:v})]})}function te({borderColour:i,titleColors:u}){const p=localStorage.getItem("currentDealId"),r={border:`2px solid  ${i}`},b=F("shadow-lg","rounded-2xl","w-full"),w={color:u,minWidth:"165px"},h={backgroundColor:"rgb(255, 255, 255)"},[f,N]=l.useState([]),[C,x]=l.useState(!0),[m,d]=l.useState(null),[y,j]=l.useState(!1),[v,g]=l.useState(null);if(l.useEffect(()=>{(async()=>{const o=localStorage.getItem("currentDealId");if(!o){console.error("Deal ID not found in localStorage");return}try{const c=await _.get(`deals/review-contacts/${o}`);N(c.data.data),x(!1)}catch(c){d(c),x(!1)}})()},[]),C)return e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(I,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})});if(m)return e.jsxs("div",{children:["Error: ",m.message]});const S=async s=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(async o=>{if(o.isConfirmed)try{await _.delete(`contacts/delete-contact/${p}/${s}`),N(f.filter(c=>c.id!==s)),D.fire("Deleted!","Your contact entry has been deleted.","success")}catch(c){console.error("Error:",c),D.fire("Error","Failed to delete contact","error")}})},t=(s,o)=>s.length<=o?s:`${s.substring(0,o-3)}...`,a=async s=>{try{const c=(await _.get(`contacts/single-contact/${p}/${s}`)).data.contact;g(c),j(!0)}catch(o){console.error("Error fetching contact details:",o)}},n=()=>{j(!1),g(null)},E=(s,o)=>{const c=s.replace(/\D/g,"");return c.length<=o?s:"+"+(c.substring(0,o-1)+"...")};return e.jsxs(e.Fragment,{children:[f.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:b,style:h,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:w,children:"Review"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:f.map(s=>e.jsxs("div",{title:"Double click to edit contact",onDoubleClick:()=>a(s.id),className:"flex flex-col rounded-2xl mb-2 h-44 cursor-pointer ",style:{...r,minWidth:"165px"},children:[e.jsxs("div",{className:"flex flex-col p-2 rounded-t-2xl border-b-dark-blue items-start",style:{background:i},children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white",children:`${s.first_name} ${s.last_name}`.length>13?`${s.first_name} ${s.last_name}`.substring(0,10)+"...":`${s.first_name} ${s.last_name}`}),e.jsx("button",{onClick:()=>S(s.id),className:"text-white hover:text-[#FF0000] cursor-pointer",children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-white",children:s.organization_name?s.organization_name.length>15?s.organization_name.substring(0,15)+"...":s.organization_name:"No company entered"})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size: ",s.deal_size?s.deal_size.length>15?"$"+$(s.deal_size.substring(0,15))+"...":"$"+$(s.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting: ",s.meeting_date?new Date(s.meeting_date).toLocaleString():"No meeting date entered"]}),e.jsx("p",{className:"text-xs",children:s.email?t(s.email,20):"No email entered"}),e.jsx("p",{className:"text-xs",children:s.phone_number?E(s.phone_number,15):"No phone number entered"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap",children:s.notes.length>20?s.notes.substring(0,20)+"...":s.notes})})]})]},s.id))})]}):null,y&&v&&e.jsx(M,{onClose:n,contactDetails:v})]})}function se({borderColour:i,titleColors:u}){const p=localStorage.getItem("currentDealId"),r={border:`2px solid  ${i}`},b=F("shadow-lg","rounded-2xl","w-full"),w={color:u,minWidth:"165px"},h={backgroundColor:"rgb(255, 255, 255)"},[f,N]=l.useState([]),[C,x]=l.useState(!0),[m,d]=l.useState(null),[y,j]=l.useState(!1),[v,g]=l.useState(null);if(l.useEffect(()=>{(async()=>{const o=localStorage.getItem("currentDealId");if(!o){console.error("Deal ID not found in localStorage");return}try{const c=await _.get(`deals/partner-contacts/${o}`);N(c.data.data),x(!1)}catch(c){d(c),x(!1)}})()},[]),C)return e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(I,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})});if(m)return e.jsxs("div",{children:["Error: ",m.message]});const S=async s=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(async o=>{if(o.isConfirmed)try{await _.delete(`contacts/delete-contact/${p}/${s}`),N(f.filter(c=>c.id!==s)),D.fire("Deleted!","Your contact entry has been deleted.","success")}catch(c){console.error("Error:",c),D.fire("Error","Failed to delete contact","error")}})},t=async s=>{try{const c=(await _.get(`contacts/single-contact/${p}/${s}`)).data.contact;g(c),j(!0)}catch(o){console.error("Error fetching contact details:",o)}},a=()=>{j(!1),g(null)},n=(s,o)=>s.length<=o?s:`${s.substring(0,o-3)}...`,E=(s,o)=>{const c=s.replace(/\D/g,"");return c.length<=o?s:"+"+(c.substring(0,o-1)+"...")};return e.jsxs(e.Fragment,{children:[f.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:b,style:h,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:w,children:"Partner"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:f.map(s=>e.jsxs("div",{onDoubleClick:()=>t(s.id),title:"Double click to edit contact",className:"flex flex-col rounded-2xl mb-2 h-44 cursor-pointer",style:{...r,minWidth:"165px"},children:[e.jsxs("div",{className:"flex flex-col p-2 rounded-t-2xl border-b-dark-blue items-start",style:{background:i},children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white",children:`${s.first_name} ${s.last_name}`.length>13?`${s.first_name} ${s.last_name}`.substring(0,10)+"...":`${s.first_name} ${s.last_name}`}),e.jsx("button",{onClick:()=>S(s.id),className:"text-white hover:text-[#FF0000] cursor-pointer",children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-white",children:s.organization_name?s.organization_name.length>15?s.organization_name.substring(0,15)+"...":s.organization_name:"No company entered"})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size: ",s.deal_size?s.deal_size.length>15?"$"+$(s.deal_size.substring(0,15))+"...":"$"+$(s.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting: ",s.meeting_date?new Date(s.meeting_date).toLocaleString():"No meeting date entered"]}),e.jsx("p",{className:"text-xs",children:s.email?n(s.email,20):"No email entered"}),e.jsx("p",{className:"text-xs",children:s.phone_number?E(s.phone_number,15):"No phone number entered"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap",children:s.notes.length>20?s.notes.substring(0,20)+"...":s.notes})})]})]},s.id))})]}):null,y&&v&&e.jsx(M,{onClose:a,contactDetails:v})]})}function ae({borderColour:i,titleColors:u}){const p=localStorage.getItem("currentDealId"),r={border:`2px solid  ${i}`},b=F("shadow-lg","rounded-2xl","w-full"),w={color:u,minWidth:"165px"},h={backgroundColor:"rgb(255, 255, 255)"},[f,N]=l.useState([]),[C,x]=l.useState(!0),[m,d]=l.useState(null),[y,j]=l.useState(!1),[v,g]=l.useState(null);if(l.useEffect(()=>{(async()=>{const o=localStorage.getItem("currentDealId");if(!o){console.error("Deal ID not found in localStorage");return}try{const c=await _.get(`deals/offer-contacts/${o}`);N(c.data.data),x(!1)}catch(c){d(c),x(!1)}})()},[]),C)return e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(I,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})});if(m)return e.jsxs("div",{children:["Error: ",m.message]});const S=async s=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(async o=>{if(o.isConfirmed)try{await _.delete(`contacts/delete-contact/${p}/${s}`),N(f.filter(c=>c.id!==s)),D.fire("Deleted!","Your contact entry has been deleted.","success")}catch(c){console.error("Error:",c),D.fire("Error","Failed to delete contact","error")}})},t=async s=>{try{const c=(await _.get(`contacts/single-contact/${p}/${s}`)).data.contact;g(c),j(!0)}catch(o){console.error("Error fetching contact details:",o)}},a=()=>{j(!1),g(null)},n=(s,o)=>s.length<=o?s:`${s.substring(0,o-3)}...`,E=(s,o)=>{const c=s.replace(/\D/g,"");return c.length<=o?s:"+"+(c.substring(0,o-1)+"...")};return e.jsxs(e.Fragment,{children:[f.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:b,style:h,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:w,children:"Term Sheet"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:f.map(s=>e.jsxs("div",{onDoubleClick:()=>t(s.id),title:"Double click to edit contact",className:"flex flex-col rounded-2xl mb-2 h-44 cursor-pointer",style:{...r,minWidth:"165px"},children:[e.jsxs("div",{className:"flex flex-col p-2 rounded-t-2xl border-b-dark-blue items-start",style:{background:i},children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white",children:`${s.first_name} ${s.last_name}`.length>13?`${s.first_name} ${s.last_name}`.substring(0,10)+"...":`${s.first_name} ${s.last_name}`}),e.jsx("button",{onClick:()=>S(s.id),className:"text-white hover:text-[#FF0000] cursor-pointer",children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-white",children:s.organization_name?s.organization_name.length>15?s.organization_name.substring(0,15)+"...":s.organization_name:"No company entered"})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size: ",s.deal_size?s.deal_size.length>15?"$"+$(s.deal_size.substring(0,15))+"...":"$"+$(s.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting: ",s.meeting_date?new Date(s.meeting_date).toLocaleString():"No meeting date entered"]}),e.jsx("p",{className:"text-xs",children:s.email?n(s.email,20):"No email entered"}),e.jsx("p",{className:"text-xs",children:s.phone_number?E(s.phone_number,15):"No phone number entered"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap",children:s.notes.length>20?s.notes.substring(0,20)+"...":s.notes})})]})]},s.id))})]}):null,y&&v&&e.jsx(M,{onClose:a,contactDetails:v})]})}function ne({borderColour:i,titleColors:u}){const p=localStorage.getItem("currentDealId"),r={border:`2px solid  ${i}`},b=F("shadow-lg","rounded-2xl","w-full"),w={color:u,minWidth:"165px"},h={backgroundColor:"rgb(255, 255, 255)"},[f,N]=l.useState([]),[C,x]=l.useState(!0),[m,d]=l.useState(null),[y,j]=l.useState(!1),[v,g]=l.useState(null);if(l.useEffect(()=>{(async()=>{const o=localStorage.getItem("currentDealId");if(!o){console.error("Deal ID not found in localStorage");return}try{const c=await _.get(`deals/followup-contacts/${o}`);N(c.data.data),x(!1)}catch(c){d(c),x(!1)}})()},[]),C)return e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(I,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})});if(m)return e.jsxs("div",{children:["Error: ",m.message]});const S=async s=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(async o=>{if(o.isConfirmed)try{await _.delete(`contacts/delete-contact/${p}/${s}`),N(f.filter(c=>c.id!==s)),D.fire("Deleted!","Your contact entry has been deleted.","success")}catch(c){console.error("Error:",c),D.fire("Error","Failed to delete contact","error")}})},t=async s=>{try{const c=(await _.get(`contacts/single-contact/${p}/${s}`)).data.contact;g(c),j(!0)}catch(o){console.error("Error fetching contact details:",o)}},a=()=>{j(!1),g(null)},n=(s,o)=>s.length<=o?s:`${s.substring(0,o-3)}...`,E=(s,o)=>{const c=s.replace(/\D/g,"");return c.length<=o?s:"+"+(c.substring(0,o-1)+"...")};return e.jsxs(e.Fragment,{children:[f.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:b,style:h,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:w,children:"Follow-up"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:f.map(s=>e.jsxs("div",{onDoubleClick:()=>t(s.id),title:"Double click to edit contact",className:"flex flex-col rounded-2xl mb-2 h-44 cursor-pointer",style:{...r,minWidth:"165px"},children:[e.jsxs("div",{className:"flex flex-col p-2 rounded-t-2xl border-b-dark-blue items-start",style:{background:i},children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white",children:`${s.first_name} ${s.last_name}`.length>13?`${s.first_name} ${s.last_name}`.substring(0,10)+"...":`${s.first_name} ${s.last_name}`}),e.jsx("button",{onClick:()=>S(s.id),className:"text-white hover:text-[#FF0000] cursor-pointer",children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-white",children:s.organization_name?s.organization_name.length>13?s.organization_name.substring(0,10)+"...":s.organization_name:"No company entered"})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size: ",s.deal_size?s.deal_size.length>15?"$"+$(s.deal_size.substring(0,15))+"...":"$"+$(s.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting: ",s.meeting_date?new Date(s.meeting_date).toLocaleString():"No meeting date entered"]}),e.jsx("p",{className:"text-xs",children:s.email?n(s.email,20):"No email entered"}),e.jsx("p",{className:"text-xs",children:s.phone_number?E(s.phone_number,15):"No phone number entered"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap",children:s.notes.length>20?s.notes.substring(0,20)+"...":s.notes})})]})]},s.id))})]}):null,y&&v&&e.jsx(M,{onClose:a,contactDetails:v})]})}const le=()=>{const i=e.jsx(Z,{borderColour:"rgb(0, 0, 139)"}),u=e.jsx(A,{borderColour:"#87CEEB"}),p=e.jsx(O,{borderColour:"#08a5aa"}),r=e.jsx(R,{borderColour:"orange"}),b=e.jsx(U,{borderColour:"green"}),w=e.jsx(G,{borderColour:"#FF0000"});return e.jsxs("div",{className:"flex gap-2 pb-10 w-full overflow-y-auto overflow-x-auto",children:[e.jsx(B,{titles:"Research",titleColors:"rgb(0, 0, 139)",contents:i}),e.jsx(ee,{borderColour:"rgb(115, 147, 179)",titleColors:"rgb(115, 147, 179)"}),e.jsx(B,{titles:"Contacted",titleColors:"#87CEEB",contents:u}),e.jsx(B,{titles:"Pitch",titleColors:"#08a5aa",contents:p}),e.jsx(te,{borderColour:"#FDDC5C",titleColors:"#FDDC5C"}),e.jsx(se,{borderColour:"#E67451",titleColors:"#E67451"}),e.jsx(ae,{titleColors:"#000000",borderColour:"#000000"}),e.jsx(B,{titles:"Negotiation",titleColors:"orange",contents:r}),e.jsx(B,{titles:"Deal",titleColors:"green",contents:b}),e.jsx(ne,{borderColour:"#D3D3D3",titleColors:"#D3D3D3"}),e.jsx(B,{titles:"Not a Fit",titleColors:"#FF0000",contents:w})]})};function re({onClose:i}){const u=l.useRef(),p=y=>{u.current===y.target&&i()},[r,b]=l.useState({firstName:"",lastName:"",moveContact:""}),[w,h]=l.useState(""),[f,N]=l.useState(""),[C,x]=l.useState(!1),m=y=>{if(y&&y.target){const{name:j,value:v}=y.target;b(g=>({...g,[j]:v}))}},d=async y=>{y.preventDefault();const j=localStorage.getItem("currentDealId");if(!j){console.error("Deal ID not found in localStorage");return}const v={first_name:r.firstName,last_name:r.lastName,stage:r.moveContact};try{const g=await _.patch(`/deals/change-stage/${j}`,v);console.log(g),h("Contact moved successfully."),window.location.reload(),N(""),b({firstName:"",lastName:"",moveContact:""}),setTimeout(()=>{x(!1),h(""),i()},2e3)}catch(g){console.log(g),N("Something went wrong. Please try again."),h(""),x(!1)}};return e.jsx("div",{ref:u,onClick:p,className:" fixed z-50 inset-0 bg-dark-blue bg-opacity-30 backdrop-blur-sm flex justify-center overflow-y-auto h-screen",children:e.jsxs("div",{className:" mt-10 flex flex-col gap-5",children:[e.jsx("button",{onClick:i,className:" place-self-end text-dark-blue",children:e.jsx(W,{size:30})}),e.jsxs("div",{className:" bg-white rounded-xl px-20 py-10 flex flex-col gap-7 items-center mx-4",children:[e.jsx("h1",{className:" text-dark-blue text-3xl font-extrabold",children:"Move contacts within your pipeline"}),e.jsxs("form",{action:"",onSubmit:d,className:" flex flex-col gap-5",children:[w&&e.jsx("p",{className:" text-mansa-blue font-semibold",children:w}),f&&e.jsx("p",{className:" text-[#ff0000] font-semibold",children:f}),e.jsxs("div",{className:"flex flex-row items-center justify-center flex-wrap gap-5",children:[e.jsx(P,{type:"text",title:"First Name*",placeholder:"Sundi",id:"firstName",value:r.firstName,onChange:m}),e.jsx(P,{type:"text",title:"Last Name*",placeholder:"Keita",id:"lastName",value:r.lastName,onChange:m})]}),e.jsx("div",{className:"flex flex-row items-center justify-center flex-wrap gap-5",children:e.jsx(L,{label:"Move Contact To",id:"moveContact",value:r.moveContact,onChange:m})}),e.jsx("div",{className:" mt-8 w-full flex items-center justify-center",children:e.jsx(T,{type:"submit",disabled:C,text:"Move Contact"})})]})]})]})})}function fe(){const i=V(),{isAuthenticated:u}=X(),[p,r]=l.useState(!1),[b,w]=l.useState(!1),[h,f]=l.useState([]),N=localStorage.getItem("currentDealId");return l.useEffect(()=>{(async()=>{if(N)try{const m=(await _.get(`deals/single-deal/${N}`)).data.deal;f(m)}catch(x){console.error("Error fetching a single deal:",x)}else console.error("Current deal ID not found in localStorage")})()},[N]),l.useEffect(()=>{u||i("/auth/login")},[u,i]),e.jsxs("div",{children:[e.jsx("div",{className:" sticky top-0 z-50",children:e.jsx(J,{})}),e.jsxs("div",{className:" flex gap-3 h-screen",children:[e.jsx("div",{className:"",children:e.jsx(q,{})}),e.jsxs("div",{className:" flex flex-col gap-2 w-full mr-2 overflow-auto",children:[e.jsxs("div",{className:" flex pt-2 items-center gap-4",children:[e.jsx("div",{onClick:()=>r(!0),className:"flex",children:e.jsx(T,{text:"Add a New Contact"})}),e.jsx("div",{onClick:()=>w(!0),className:"flex",children:e.jsx(T,{text:"Move a Contact"})})]}),e.jsxs("div",{className:" flex flex-row w-full items-center",children:[e.jsx("div",{className:" bg-dark-blue text-white font-bold text-2xl py-6 rounded-l-xl w-[40%] text-center",children:h&&h.deal_name&&h.deal_name.length>15?`${h.deal_name.substring(0,15)}...`:h&&h.deal_name}),e.jsxs("div",{className:" flex flex-col w-[60%]",children:[e.jsxs("div",{className:" bg-mansa-blue text-white py-2 text-center rounded-tr-xl",children:["Deal Size Amount: ",e.jsxs("span",{className:" font-semibold",children:["$",h.deal_size?$(h.deal_size):"0"]})]}),e.jsxs("div",{className:" flex flex-row  ",children:[e.jsxs("div",{className:" bg-[orange] text-white w-1/2 max-md:w-full py-2 pl-5",children:["In-Negotiation Value: ",e.jsxs("span",{className:" font-semibold",children:["$",h.negotiation_value?$(h.negotiation_value):"0"]})]}),e.jsxs("div",{className:" bg-[green] text-white w-1/2 max-md:w-full py-2 pl-5 rounded-br-xl",children:["Deal Signed Value: ",e.jsxs("span",{className:" font-semibold",children:["$",h.signed_value?$(h.signed_value):"0"]})]})]})]})]}),e.jsx(le,{})]}),p&&e.jsx(Q,{onClose:()=>r(!1)}),b&&e.jsx(re,{onClose:()=>w(!1)})]})]})}export{fe as default};
