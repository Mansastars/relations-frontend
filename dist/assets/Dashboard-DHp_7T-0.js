import{r as l,j as e,a as v,S as D,u as H,$ as k,b as J}from"./index-CUNtWECR.js";import{F as I,a as L,D as V,b as X,c as q,B as Y}from"./Reusables-BvCCSsRg.js";import{X as W}from"./x-COajyqgS.js";import{c as T}from"./index-CZ4n8xo3.js";import{X as M}from"./x-circle-CzktcEOq.js";import{F as Q}from"./FreeTrialBanner-29ncipZ8.js";import{E as Z,a as R,W as A,b as O,T as U,c as G,F as ee,d as te,e as se,f as ae}from"./index-BHLCg5zC.js";import{c as K}from"./createLucideIcon-BeJ87m2x.js";import"./tag-55fgT-hN.js";/**
 * @license lucide-react v0.320.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=K("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.320.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=K("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);function re({onClose:x}){const m=l.useRef(),f=c=>{m.current===c.target&&x()},[r,d]=l.useState({title:"",firstName:"",lastName:"",company:"",dealSize:0,email:"",phoneNumber:"",notes:"",currentStage:"",datetime:""}),[b,_]=l.useState(""),[g,h]=l.useState(""),[N,S]=l.useState(!1),u=c=>{if(c&&c.target){const{name:C,value:y}=c.target;d(w=>({...w,[C]:y}))}},p=async c=>{c.preventDefault();const C=localStorage.getItem("currentDealId");if(!C){console.error("Deal ID not found in localStorage");return}let y;r.datetime&&(y=new Date(r.datetime).toISOString());const w={deal_id:C,title:r.title,first_name:r.firstName,last_name:r.lastName,organization_name:r.company,deal_size:r.dealSize,email:r.email,phone_number:r.phoneNumber,stage:r.currentStage,meeting_date:y,notes:r.notes};try{const j=await v.post(`/deals/create-contact/${C}`,w);console.log(j),_("Contact created successfully."),window.location.reload(),h(""),d({title:"",firstName:"",lastName:"",company:"",dealSize:0,email:"",phoneNumber:"",notes:"",currentStage:"",datetime:""}),setTimeout(()=>{S(!1),_(""),x()},2e3)}catch(j){console.log(j),h("Something went wrong. Please try again."),_(""),S(!1)}};return e.jsx("div",{ref:m,onClick:f,className:" fixed z-50 inset-0 bg-dark-blue bg-opacity-30 backdrop-blur-sm flex justify-center overflow-y-auto h-screen",children:e.jsx("div",{className:" mt-10 flex flex-col w-full",children:e.jsxs("div",{className:" bg-white rounded-xl px-20 max-md:px-5 py-10 flex flex-col gap-7 items-center mx-20 max-md:mx-10",children:[e.jsx("button",{onClick:x,className:" self-end hover:text-dark-blue text-red-500",children:e.jsx(W,{size:30})}),e.jsx("h1",{className:" text-dark-blue text-3xl max-md:text-2xl max-sm:text-xl font-extrabold",children:"Add a new contact to your pipeline"}),e.jsxs("form",{action:"",onSubmit:p,className:" flex flex-col gap-5 w-full",children:[b&&e.jsx("p",{className:" text-mansa-blue font-semibold",children:b}),g&&e.jsx("p",{className:" text-[#ff0000] font-semibold",children:g}),e.jsxs("div",{className:"flex flex-col gap-8 w-full",children:[e.jsxs("div",{className:" flex flex-row flex-wrap gap-5 justify-center max-md:justify-start",children:[e.jsx(I,{type:"text",title:"Title",placeholder:"Mr./Mrs./Ms./Dr./Engr.",id:"title",value:r.title,onChange:u}),e.jsx(L,{type:"text",title:"First Name*",placeholder:"Sundi",id:"firstName",value:r.firstName,onChange:u}),e.jsx(L,{type:"text",title:"Last Name*",placeholder:"Keita",id:"lastName",value:r.lastName,onChange:u})]}),e.jsxs("div",{className:" flex flex-row flex-wrap gap-x-5 gap-y-8 justify-center max-md:justify-start",children:[e.jsx(I,{type:"text",title:"Company",placeholder:"Mansa, LLC",id:"company",value:r.company,onChange:u}),e.jsx(I,{type:"number",title:"Deal Size ($)",placeholder:"1,000,000",id:"dealSize",min:0,value:r.dealSize,onChange:u}),e.jsx(I,{type:"email",title:"Contact Email",placeholder:"sundi@sankore.com",id:"email",value:r.email,onChange:u}),e.jsx(I,{type:"tel",title:"Phone Number",placeholder:"+123456789",id:"phoneNumber",maxLength:15,value:r.phoneNumber,onChange:u}),e.jsx(V,{label:"Current Stage",id:"currentStage",value:r.currentStage,onChange:u}),e.jsx(X,{title:"Meeting Date",value:r.datetime,onChange:u})]}),e.jsx("div",{children:e.jsx(q,{value:r.notes,onChange:u})})]}),e.jsx("div",{className:" mt-8 w-full flex items-center justify-center",children:e.jsx(Y,{type:"submit",disabled:N,text:"Create Contact"})})]})]})})})}function F({titles:x,titleColors:m,contents:f}){const r=T("shadow-lg","rounded-2xl","w-full"),d={color:m,minWidth:"165px"},b={backgroundColor:"rgb(255, 255, 255)"};return e.jsxs("div",{className:" flex flex-col gap-5 items-center w-full ",style:{maxWidth:"calc(100% - 224px)"},children:[e.jsx("div",{className:r,style:b,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center w-full ",style:d,children:x})}),e.jsx("div",{className:" w-full overflow-x-hidden",style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:f})]})}function B({onClose:x,contactDetails:m}){const[f,r]=l.useState(""),[d,b]=l.useState(""),[_,g]=l.useState(!1),h=window.location.pathname.split("/").at(-1),N=l.useRef(),S=j=>{N.current===j.target&&x()},u=j=>{if(j&&j.target){const{name:$,value:t}=j.target;C(a=>({...a,[$]:t}))}},p=j=>j?new Date(j).toISOString().slice(0,16):"",[c,C]=l.useState({title:m.title,first_name:m.first_name,last_name:m.last_name,organization_name:m.organization_name,deal_size:m.deal_size,email:m.email,phone_number:m.phone_number,stage:m.stage,datetime:p(m.meeting_date),notes:m.notes});let y;c.datetime&&(y=new Date(c.datetime).toISOString());const w=async j=>{j.preventDefault();const $=localStorage.getItem("currentDealId")||h;if(!$){console.error("Deal ID not found in localStorage");return}const t=localStorage.getItem("user");t||(x(),D.fire("Error","You are not allowed to edit this dashboard.","error"));const a={userId:t.id,title:c.title,first_name:c.first_name,last_name:c.last_name,organization_name:c.organization_name,deal_size:c.deal_size,email:c.email,phone_number:c.phone_number,stage:c.stage,meeting_date:y,notes:c.notes};try{await v.patch(`deals/edit-contact/${$}/${m.id}`,a),r("Contact updated successfully."),b(""),setTimeout(()=>{g(!1),r(""),x(),window.location.reload()},2e3)}catch(n){n.response.data.message==="unable to edit contact at this time"&&(x(),D.fire("Error","You are not allowed to edit this dashboard.","error")),console.log(n),b("Something went wrong. Please try again."),r(""),g(!1)}};return e.jsx("div",{ref:N,onClick:S,className:"fixed z-50 inset-0 bg-dark-blue bg-opacity-30 backdrop-blur-sm flex justify-center overflow-y-auto h-screen",children:e.jsx("div",{className:" mt-10 flex flex-col",children:e.jsxs("div",{className:"bg-white rounded-xl px-20 max-md:px-5 py-10 flex flex-col gap-7 items-center mx-20 max-md:mx-10",children:[e.jsx("button",{onClick:x,className:"self-end text-red-500 hover:text-dark-blue",children:e.jsx(W,{size:30})}),e.jsx("h1",{className:"text-dark-blue text-3xl max-md:text-2xl max-sm:text-xl font-extrabold",children:"Edit Contact Details"}),e.jsxs("form",{action:"",onSubmit:w,className:"flex flex-col gap-5",children:[f&&e.jsx("p",{className:"text-mansa-blue font-semibold",children:f}),d&&e.jsx("p",{className:"text-[#ff0000] font-semibold",children:d}),e.jsxs("div",{className:"flex flex-row items-center justify-center flex-wrap gap-5 w-full",children:[e.jsx(I,{type:"text",title:"Title",placeholder:"Mr./Mrs./Ms./Dr./Engr.",id:"title",value:c.title,onChange:u}),e.jsx(I,{type:"text",title:"First Name",placeholder:"Sundi",id:"first_name",value:c.first_name,onChange:u}),e.jsx(I,{type:"text",title:"Last Name",placeholder:"Keita",id:"last_name",value:c.last_name,onChange:u}),e.jsx(I,{type:"text",title:"Company",placeholder:"Mansa, LLC",id:"organization_name",value:c.organization_name,onChange:u}),e.jsx(I,{type:"number",title:"Deal Size ($)",placeholder:"1,000,000",id:"deal_size",min:0,value:c.deal_size,onChange:u}),e.jsx(I,{type:"email",title:"Contact Email",placeholder:"sundi@sankore.com",id:"email",value:c.email,onChange:u}),e.jsx(I,{type:"tel",title:"Phone Number",placeholder:"+123456789",id:"phone_number",value:c.phone_number,onChange:u,maxLength:15}),e.jsx(V,{label:"Current Stage",id:"stage",value:c.stage,onChange:u}),e.jsx(X,{title:"Meeting Date",value:c.datetime,onChange:u})]}),e.jsx("div",{children:e.jsx(q,{value:c.notes,onChange:u})}),e.jsx("div",{className:"mt-8 w-full flex items-center justify-center",children:e.jsx(Y,{type:"submit",disabled:_,text:"Update Contact"})})]})]})})})}const E=x=>x.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");function oe({borderColour:x}){const m=window.location.pathname.split("/").at(-1),f=localStorage.getItem("currentDealId")||m,r={border:`2px solid  ${x}`},[d,b]=l.useState([]),[_,g]=l.useState(!0),[h,N]=l.useState(null),[S,u]=l.useState(!1),[p,c]=l.useState(null);if(H(),l.useEffect(()=>{(async()=>{const a=localStorage.getItem("currentDealId")||m;if(!a){console.error("Deal ID not found in localStorage");return}try{const n=await v.get(`deals/research-contacts/${a}`);b(n.data.data),g(!1)}catch(n){N(n),g(!1)}})()},[]),_)return e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(k,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})});if(h)return e.jsxs("div",{children:["Error: ",h.message]});const C=async t=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(async a=>{if(a.isConfirmed)try{await v.delete(`contacts/delete-contact/${f}/${t}`),b(d.filter(n=>n.id!==t)),D.fire("Deleted!","Your contact entry has been deleted.","success")}catch(n){console.error("Error:",n),D.fire("Error","Failed to delete contact","error")}})},y=async t=>{try{const n=(await v.get(`contacts/single-contact/${f}/${t}`)).data.contact;c(n),u(!0)}catch(a){console.error("Error fetching contact details:",a)}},w=()=>{u(!1),c(null)},j=(t,a)=>t.length<=a?t:`${t.substring(0,a-3)}...`,$=(t,a)=>{const n=t.replace(/\D/g,"");return n.length<=a?t:"+"+(n.substring(0,a-1)+"...")};return e.jsxs(e.Fragment,{children:[d.length===0?e.jsx("div",{}):d.map(t=>e.jsxs("div",{onDoubleClick:()=>y(t.id),className:"flex flex-col rounded-2xl mb-2 h-44 cursor-pointer",style:{...r,minWidth:"165px"},title:"Double click to edit contact",children:[e.jsxs("div",{className:"flex flex-col p-2 rounded-t-2xl border-b-dark-blue items-start",style:{background:x},children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white",children:`${t.first_name} ${t.last_name}`.length>13?`${t.first_name} ${t.last_name}`.substring(0,10)+"...":`${t.first_name} ${t.last_name}`}),e.jsx("button",{onClick:()=>C(t.id),className:"text-white hover:text-[#FF0000] cursor-pointer",children:e.jsx(M,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-white",children:t.organization_name?t.organization_name.length>15?t.organization_name.substring(0,15)+"...":t.organization_name:"No company entered"})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size:"," ",t.deal_size?t.deal_size.length>15?"$"+E(t.deal_size.substring(0,15))+"...":"$"+E(t.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting:"," ",t.meeting_date?new Date(t.meeting_date).toLocaleString():"No meeting date entered"]}),e.jsx("p",{className:"text-xs",children:t.email?j(t.email,20):"No email entered"}),e.jsx("p",{className:"text-xs",children:t.phone_number?$(t.phone_number,15):"No phone number entered"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap",children:t.notes.length>20?t.notes.substring(0,20)+"...":t.notes})})]})]},t.id)),S&&p&&e.jsx(B,{onClose:w,contactDetails:p})]})}function ce({borderColour:x}){const m=window.location.pathname.split("/").at(-1),f=localStorage.getItem("currentDealId")||m,r={border:`2px solid  ${x}`},[d,b]=l.useState([]),[_,g]=l.useState(!0),[h,N]=l.useState(null),[S,u]=l.useState(!1),[p,c]=l.useState(null);if(l.useEffect(()=>{(async()=>{const a=localStorage.getItem("currentDealId")||m;if(!a){console.error("Deal ID not found in localStorage");return}try{const n=await v.get(`deals/contacted-contacts/${a}`);b(n.data.data),g(!1)}catch(n){N(n),g(!1)}})()},[]),_)return e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(k,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})});if(h)return e.jsxs("div",{children:["Error: ",h.message]});const C=async t=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(async a=>{if(a.isConfirmed)try{await v.delete(`contacts/delete-contact/${f}/${t}`),b(d.filter(n=>n.id!==t)),D.fire("Deleted!","Your contact entry has been deleted.","success")}catch(n){console.error("Error:",n),D.fire("Error","Failed to delete contact","error")}})},y=async t=>{try{const n=(await v.get(`contacts/single-contact/${f}/${t}`)).data.contact;c(n),u(!0)}catch(a){console.error("Error fetching contact details:",a)}},w=()=>{u(!1),c(null)},j=(t,a)=>t.length<=a?t:`${t.substring(0,a-3)}...`,$=(t,a)=>{const n=t.replace(/\D/g,"");return n.length<=a?t:"+"+(n.substring(0,a-1)+"...")};return e.jsxs(e.Fragment,{children:[d.length===0?e.jsx("div",{}):d.map(t=>e.jsxs("div",{title:"Double click to edit contact",onDoubleClick:()=>y(t.id),className:"flex flex-col rounded-2xl mb-2 h-44 cursor-pointer",style:{...r,minWidth:"165px"},children:[e.jsxs("div",{className:"flex flex-col p-2 rounded-t-2xl border-b-dark-blue items-start",style:{background:x},children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white",children:`${t.first_name} ${t.last_name}`.length>13?`${t.first_name} ${t.last_name}`.substring(0,10)+"...":`${t.first_name} ${t.last_name}`}),e.jsx("button",{onClick:()=>C(t.id),className:"text-white hover:text-[#FF0000] cursor-pointer",children:e.jsx(M,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-white",children:t.organization_name?t.organization_name.length>15?t.organization_name.substring(0,15)+"...":t.organization_name:"No company entered"})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size:"," ",t.deal_size?t.deal_size.length>15?"$"+E(t.deal_size.substring(0,15))+"...":"$"+E(t.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting:"," ",t.meeting_date?new Date(t.meeting_date).toLocaleString():"No meeting date entered"]}),e.jsx("p",{className:"text-xs",children:t.email?j(t.email,20):"No email entered"}),e.jsx("p",{className:"text-xs",children:t.phone_number?$(t.phone_number,15):"No phone number entered"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap",children:t.notes.length>20?t.notes.substring(0,20)+"...":t.notes})})]})]},t.id)),S&&p&&e.jsx(B,{onClose:w,contactDetails:p})]})}function ie({borderColour:x}){const m=window.location.pathname.split("/").at(-1),f=localStorage.getItem("currentDealId")||m,r={border:`2px solid  ${x}`},[d,b]=l.useState([]),[_,g]=l.useState(!0),[h,N]=l.useState(null),[S,u]=l.useState(!1),[p,c]=l.useState(null);if(l.useEffect(()=>{(async()=>{const a=localStorage.getItem("currentDealId")||m;if(!a){console.error("Deal ID not found in localStorage");return}try{const n=await v.get(`deals/pitch-contacts/${a}`);b(n.data.data),g(!1)}catch(n){N(n),g(!1)}})()},[]),_)return e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(k,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})});if(h)return e.jsxs("div",{children:["Error: ",h.message]});const C=(t,a)=>t.length<=a?t:`${t.substring(0,a-3)}...`,y=(t,a)=>{const n=t.replace(/\D/g,"");return n.length<=a?t:"+"+(n.substring(0,a-1)+"...")},w=async t=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(async a=>{if(a.isConfirmed)try{await v.delete(`contacts/delete-contact/${f}/${t}`),b(d.filter(n=>n.id!==t)),D.fire("Deleted!","Your contact entry has been deleted.","success")}catch(n){console.error("Error:",n),D.fire("Error","Failed to delete contact","error")}})},j=async t=>{try{const n=(await v.get(`contacts/single-contact/${f}/${t}`)).data.contact;c(n),u(!0)}catch(a){console.error("Error fetching contact details:",a)}},$=()=>{u(!1),c(null)};return e.jsxs(e.Fragment,{children:[d.length===0?e.jsx("div",{}):d.map(t=>e.jsxs("div",{onDoubleClick:()=>j(t.id),title:"Double click to edit contact",className:"flex flex-col rounded-2xl mb-2 h-44 cursor-pointer",style:{...r,minWidth:"165px"},children:[e.jsxs("div",{className:"flex flex-col p-2 rounded-t-2xl border-b-dark-blue items-start",style:{background:x},children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white",children:`${t.first_name} ${t.last_name}`.length>13?`${t.first_name} ${t.last_name}`.substring(0,10)+"...":`${t.first_name} ${t.last_name}`}),e.jsx("button",{onClick:()=>w(t.id),className:"text-white hover:text-[#FF0000] cursor-pointer",children:e.jsx(M,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-white",children:t.organization_name?t.organization_name.length>15?t.organization_name.substring(0,15)+"...":t.organization_name:"No company entered"})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size:"," ",t.deal_size?t.deal_size.length>15?"$"+E(t.deal_size.substring(0,15))+"...":"$"+E(t.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting:"," ",t.meeting_date?new Date(t.meeting_date).toLocaleString():"No meeting date entered"]}),e.jsx("p",{className:"text-xs",children:t.email?C(t.email,20):"No email entered"}),e.jsx("p",{className:"text-xs",children:t.phone_number?y(t.phone_number,15):"No phone number entered"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap",children:t.notes.length>20?t.notes.substring(0,20)+"...":t.notes})})]})]},t.id)),S&&p&&e.jsx(B,{onClose:$,contactDetails:p})]})}function de({borderColour:x}){const m=window.location.pathname.split("/").at(-1),f=localStorage.getItem("currentDealId")||m,r={border:`2px solid  ${x}`},[d,b]=l.useState([]),[_,g]=l.useState(!0),[h,N]=l.useState(null),[S,u]=l.useState(!1),[p,c]=l.useState(null);if(l.useEffect(()=>{(async()=>{const a=localStorage.getItem("currentDealId")||m;if(!a){console.error("Deal ID not found in localStorage");return}try{const n=await v.get(`deals/negotiation-contacts/${a}`);b(n.data.data),g(!1)}catch(n){N(n),g(!1)}})()},[]),_)return e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(k,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})});if(h)return e.jsxs("div",{children:["Error: ",h.message]});const C=async t=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(async a=>{if(a.isConfirmed)try{await v.delete(`contacts/delete-contact/${f}/${t}`),b(d.filter(n=>n.id!==t)),D.fire("Deleted!","Your contact entry has been deleted.","success")}catch(n){console.error("Error:",n),D.fire("Error","Failed to delete contact","error")}})},y=async t=>{try{const n=(await v.get(`contacts/single-contact/${f}/${t}`)).data.contact;c(n),u(!0)}catch(a){console.error("Error fetching contact details:",a)}},w=()=>{u(!1),c(null)},j=(t,a)=>t.length<=a?t:`${t.substring(0,a-3)}...`,$=(t,a)=>{const n=t.replace(/\D/g,"");return n.length<=a?t:"+"+(n.substring(0,a-1)+"...")};return e.jsxs(e.Fragment,{children:[d.length===0?e.jsx("div",{}):d.map(t=>e.jsxs("div",{onDoubleClick:()=>y(t.id),title:"Double click to edit contact",className:"flex flex-col rounded-2xl mb-2 h-44 cursor-pointer",style:{...r,minWidth:"165px"},children:[e.jsxs("div",{className:"flex flex-col p-2 rounded-t-2xl border-b-dark-blue items-start",style:{background:x},children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white",children:`${t.first_name} ${t.last_name}`.length>13?`${t.first_name} ${t.last_name}`.substring(0,10)+"...":`${t.first_name} ${t.last_name}`}),e.jsx("button",{onClick:()=>C(t.id),className:"text-white hover:text-[#FF0000] cursor-pointer",children:e.jsx(M,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-white",children:t.organization_name?t.organization_name.length>15?t.organization_name.substring(0,15)+"...":t.organization_name:"No company entered"})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size:"," ",t.deal_size?t.deal_size.length>15?"$"+E(t.deal_size.substring(0,15))+"...":"$"+E(t.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting:"," ",t.meeting_date?new Date(t.meeting_date).toLocaleString():"No meeting date entered"]}),e.jsx("p",{className:"text-xs",children:t.email?j(t.email,20):"No email entered"}),e.jsx("p",{className:"text-xs",children:t.phone_number?$(t.phone_number,15):"No phone number entered"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap",children:t.notes.length>20?t.notes.substring(0,20)+"...":t.notes})})]})]},t.id)),S&&p&&e.jsx(B,{onClose:w,contactDetails:p})]})}function ue({borderColour:x}){const m=window.location.pathname.split("/").at(-1),f=localStorage.getItem("currentDealId")||m,r={border:`2px solid  ${x}`},[d,b]=l.useState([]),[_,g]=l.useState(!0),[h,N]=l.useState(null),[S,u]=l.useState(!1),[p,c]=l.useState(null);if(l.useEffect(()=>{(async()=>{const a=localStorage.getItem("currentDealId")||m;if(!a){console.error("Deal ID not found in localStorage");return}try{const n=await v.get(`deals/deal-contacts/${a}`);b(n.data.data),g(!1)}catch(n){N(n),g(!1)}})()},[]),_)return e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(k,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})});if(h)return e.jsxs("div",{children:["Error: ",h.message]});const C=(t,a)=>t.length<=a?t:`${t.substring(0,a-3)}...`,y=async t=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(async a=>{if(a.isConfirmed)try{await v.delete(`contacts/delete-contact/${f}/${t}`),b(d.filter(n=>n.id!==t)),D.fire("Deleted!","Your contact entry has been deleted.","success")}catch(n){console.error("Error:",n),D.fire("Error","Failed to delete contact","error")}})},w=(t,a)=>{const n=t.replace(/\D/g,"");return n.length<=a?t:"+"+(n.substring(0,a-1)+"...")},j=async t=>{try{const n=(await v.get(`contacts/single-contact/${f}/${t}`)).data.contact;c(n),u(!0)}catch(a){console.error("Error fetching contact details:",a)}},$=()=>{u(!1),c(null)};return e.jsxs(e.Fragment,{children:[d.length===0?e.jsx("div",{}):d.map(t=>e.jsxs("div",{onDoubleClick:()=>j(t.id),title:"Double click to edit contact",className:"flex flex-col rounded-2xl max-w-34 mb-2 h-44 cursor-pointer",style:{...r,minWidth:"165px"},children:[e.jsxs("div",{className:"flex flex-col p-2 rounded-t-2xl border-b-dark-blue items-start",style:{background:x},children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white",children:`${t.first_name} ${t.last_name}`.length>13?`${t.first_name} ${t.last_name}`.substring(0,10)+"...":`${t.first_name} ${t.last_name}`}),e.jsx("button",{onClick:()=>y(t.id),className:"text-white hover:text-[#FF0000] cursor-pointer",children:e.jsx(M,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-white",children:t.organization_name?t.organization_name.length>15?t.organization_name.substring(0,15)+"...":t.organization_name:"No company entered"})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size:"," ",t.deal_size?t.deal_size.length>15?"$"+E(t.deal_size.substring(0,15))+"...":"$"+E(t.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting:"," ",t.meeting_date?new Date(t.meeting_date).toLocaleString():"No meeting date entered"]}),e.jsx("p",{className:"text-xs",children:t.email?C(t.email,20):"No email entered"}),e.jsx("p",{className:"text-xs",children:t.phone_number?w(t.phone_number,15):"No phone number entered"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap",children:t.notes.length>20?t.notes.substring(0,20)+"...":t.notes})})]})]},t.id)),S&&p&&e.jsx(B,{onClose:$,contactDetails:p})]})}function xe({borderColour:x}){const m=window.location.pathname.split("/").at(-1),f=localStorage.getItem("currentDealId")||m,r={border:`2px solid  ${x}`},[d,b]=l.useState([]),[_,g]=l.useState(!0),[h,N]=l.useState(null),[S,u]=l.useState(!1),[p,c]=l.useState(null);if(l.useEffect(()=>{(async()=>{const a=localStorage.getItem("currentDealId")||m;if(!a){console.error("Deal ID not found in localStorage");return}try{const n=await v.get(`deals/rejection-contacts/${a}`);b(n.data.data),g(!1)}catch(n){N(n),g(!1)}})()},[]),_)return e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(k,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})});if(h)return e.jsxs("div",{children:["Error: ",h.message]});const C=async t=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(async a=>{if(a.isConfirmed)try{await v.delete(`contacts/delete-contact/${f}/${t}`),b(d.filter(n=>n.id!==t)),D.fire("Deleted!","Your contact entry has been deleted.","success")}catch(n){console.error("Error:",n),D.fire("Error","Failed to delete contact","error")}})},y=async t=>{try{const n=(await v.get(`contacts/single-contact/${f}/${t}`)).data.contact;c(n),u(!0)}catch(a){console.error("Error fetching contact details:",a)}},w=()=>{u(!1),c(null)},j=(t,a)=>t.length<=a?t:`${t.substring(0,a-3)}...`,$=(t,a)=>{const n=t.replace(/\D/g,"");return n.length<=a?t:"+"+(n.substring(0,a-1)+"...")};return e.jsxs(e.Fragment,{children:[d.length===0?e.jsx("div",{}):d.map(t=>e.jsxs("div",{onDoubleClick:()=>y(t.id),title:"Double click to edit contact",className:"flex flex-col rounded-2xl mb-2 h-44 cursor-pointer",style:{...r,minWidth:"165px"},children:[e.jsxs("div",{className:"flex flex-col p-2 rounded-t-2xl border-b-dark-blue items-start",style:{background:x},children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white",children:`${t.first_name} ${t.last_name}`.length>13?`${t.first_name} ${t.last_name}`.substring(0,10)+"...":`${t.first_name} ${t.last_name}`}),e.jsx("button",{onClick:()=>C(t.id),className:"text-white cursor-pointer",children:e.jsx(M,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-white",children:t.organization_name?t.organization_name.length>15?t.organization_name.substring(0,15)+"...":t.organization_name:"No company entered"})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size:"," ",t.deal_size?t.deal_size.length>15?"$"+E(t.deal_size.substring(0,15))+"...":"$"+E(t.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting:"," ",t.meeting_date?new Date(t.meeting_date).toLocaleString():"No meeting date entered"]}),e.jsx("p",{className:"text-xs",children:t.email?j(t.email,20):"No email entered"}),e.jsx("p",{className:"text-xs",children:t.phone_number?$(t.phone_number,15):"No phone number entered"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap",children:t.notes.length>20?t.notes.substring(0,20)+"...":t.notes})})]})]},t.id)),S&&p&&e.jsx(B,{onClose:w,contactDetails:p})]})}function me({borderColour:x,titleColors:m}){const f=window.location.pathname.split("/").at(-1),r=localStorage.getItem("currentDealId")||f,d={border:`2px solid  ${x}`},b=T("shadow-lg","rounded-2xl","w-full"),_={color:m,minWidth:"165px"},g={backgroundColor:"rgb(255, 255, 255)"},[h,N]=l.useState([]),[S,u]=l.useState(!0),[p,c]=l.useState(null),[C,y]=l.useState(!1),[w,j]=l.useState(null);if(l.useEffect(()=>{(async()=>{const o=localStorage.getItem("currentDealId")||f;if(!o){console.error("Deal ID not found in localStorage");return}try{const i=await v.get(`deals/prospect-contacts/${o}`);N(i.data.data),u(!1)}catch(i){c(i),u(!1)}})()},[]),S)return e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(k,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})});if(p)return e.jsxs("div",{children:["Error: ",p.message]});const $=async s=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(async o=>{if(o.isConfirmed)try{await v.delete(`contacts/delete-contact/${r}/${s}`),N(h.filter(i=>i.id!==s)),D.fire("Deleted!","Your contact entry has been deleted.","success")}catch(i){console.error("Error:",i),D.fire("Error","Failed to delete contact","error")}})},t=async s=>{try{const i=(await v.get(`contacts/single-contact/${r}/${s}`)).data.contact;j(i),y(!0)}catch(o){console.error("Error fetching contact details:",o)}},a=()=>{y(!1),j(null)},n=(s,o)=>s.length<=o?s:`${s.substring(0,o-3)}...`,z=(s,o)=>{const i=s.replace(/\D/g,"");return i.length<=o?s:"+"+(i.substring(0,o-1)+"...")};return e.jsxs(e.Fragment,{children:[h.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:b,style:g,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:_,children:"Prospect"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:h.map(s=>e.jsxs("div",{onDoubleClick:()=>t(s.id),title:"Double click to edit contact",className:"flex flex-col rounded-2xl mb-2 h-44 cursor-pointer",style:{...d,minWidth:"165px"},children:[e.jsxs("div",{className:"flex flex-col p-2 rounded-t-2xl border-b-dark-blue items-start",style:{background:x},children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white",children:`${s.first_name} ${s.last_name}`.length>13?`${s.first_name} ${s.last_name}`.substring(0,10)+"...":`${s.first_name} ${s.last_name}`}),e.jsx("button",{onClick:()=>$(s.id),className:"text-white hover:text-[#FF0000] cursor-pointer",children:e.jsx(M,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-white",children:s.organization_name?s.organization_name.length>15?s.organization_name.substring(0,15)+"...":s.organization_name:"No company entered"})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size:"," ",s.deal_size?s.deal_size.length>15?"$"+E(s.deal_size.substring(0,15))+"...":"$"+E(s.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting:"," ",s.meeting_date?new Date(s.meeting_date).toLocaleString():"No meeting date entered"]}),e.jsx("p",{className:"text-xs",children:s.email?n(s.email,20):"No email entered"}),e.jsx("p",{className:"text-xs",children:s.phone_number?z(s.phone_number,15):"No phone number entered"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap",children:s.notes.length>20?s.notes.substring(0,20)+"...":s.notes})})]})]},s.id))})]}):null,C&&w&&e.jsx(B,{onClose:a,contactDetails:w})]})}function he({borderColour:x,titleColors:m}){const f=window.location.pathname.split("/").at(-1),r=localStorage.getItem("currentDealId")||f,d={border:`2px solid  ${x}`},b=T("shadow-lg","rounded-2xl","w-full"),_={color:m,minWidth:"165px"},g={backgroundColor:"rgb(255, 255, 255)"},[h,N]=l.useState([]),[S,u]=l.useState(!0),[p,c]=l.useState(null),[C,y]=l.useState(!1),[w,j]=l.useState(null);if(l.useEffect(()=>{(async()=>{const o=localStorage.getItem("currentDealId")||f;if(!o){console.error("Deal ID not found in localStorage");return}try{const i=await v.get(`deals/review-contacts/${o}`);N(i.data.data),u(!1)}catch(i){c(i),u(!1)}})()},[]),S)return e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(k,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})});if(p)return e.jsxs("div",{children:["Error: ",p.message]});const $=async s=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(async o=>{if(o.isConfirmed)try{await v.delete(`contacts/delete-contact/${r}/${s}`),N(h.filter(i=>i.id!==s)),D.fire("Deleted!","Your contact entry has been deleted.","success")}catch(i){console.error("Error:",i),D.fire("Error","Failed to delete contact","error")}})},t=(s,o)=>s.length<=o?s:`${s.substring(0,o-3)}...`,a=async s=>{try{const i=(await v.get(`contacts/single-contact/${r}/${s}`)).data.contact;j(i),y(!0)}catch(o){console.error("Error fetching contact details:",o)}},n=()=>{y(!1),j(null)},z=(s,o)=>{const i=s.replace(/\D/g,"");return i.length<=o?s:"+"+(i.substring(0,o-1)+"...")};return e.jsxs(e.Fragment,{children:[h.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:b,style:g,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:_,children:"Review"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:h.map(s=>e.jsxs("div",{title:"Double click to edit contact",onDoubleClick:()=>a(s.id),className:"flex flex-col rounded-2xl mb-2 h-44 cursor-pointer ",style:{...d,minWidth:"165px"},children:[e.jsxs("div",{className:"flex flex-col p-2 rounded-t-2xl border-b-dark-blue items-start",style:{background:x},children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white",children:`${s.first_name} ${s.last_name}`.length>13?`${s.first_name} ${s.last_name}`.substring(0,10)+"...":`${s.first_name} ${s.last_name}`}),e.jsx("button",{onClick:()=>$(s.id),className:"text-white hover:text-[#FF0000] cursor-pointer",children:e.jsx(M,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-white",children:s.organization_name?s.organization_name.length>15?s.organization_name.substring(0,15)+"...":s.organization_name:"No company entered"})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size:"," ",s.deal_size?s.deal_size.length>15?"$"+E(s.deal_size.substring(0,15))+"...":"$"+E(s.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting:"," ",s.meeting_date?new Date(s.meeting_date).toLocaleString():"No meeting date entered"]}),e.jsx("p",{className:"text-xs",children:s.email?t(s.email,20):"No email entered"}),e.jsx("p",{className:"text-xs",children:s.phone_number?z(s.phone_number,15):"No phone number entered"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap",children:s.notes.length>20?s.notes.substring(0,20)+"...":s.notes})})]})]},s.id))})]}):null,C&&w&&e.jsx(B,{onClose:n,contactDetails:w})]})}function fe({borderColour:x,titleColors:m}){const f=window.location.pathname.split("/").at(-1),r=localStorage.getItem("currentDealId")||f,d={border:`2px solid  ${x}`},b=T("shadow-lg","rounded-2xl","w-full"),_={color:m,minWidth:"165px"},g={backgroundColor:"rgb(255, 255, 255)"},[h,N]=l.useState([]),[S,u]=l.useState(!0),[p,c]=l.useState(null),[C,y]=l.useState(!1),[w,j]=l.useState(null);if(l.useEffect(()=>{(async()=>{const o=localStorage.getItem("currentDealId")||f;if(!o){console.error("Deal ID not found in localStorage");return}try{const i=await v.get(`deals/partner-contacts/${o}`);N(i.data.data),u(!1)}catch(i){c(i),u(!1)}})()},[]),S)return e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(k,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})});if(p)return e.jsxs("div",{children:["Error: ",p.message]});const $=async s=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(async o=>{if(o.isConfirmed)try{await v.delete(`contacts/delete-contact/${r}/${s}`),N(h.filter(i=>i.id!==s)),D.fire("Deleted!","Your contact entry has been deleted.","success")}catch(i){console.error("Error:",i),D.fire("Error","Failed to delete contact","error")}})},t=async s=>{try{const i=(await v.get(`contacts/single-contact/${r}/${s}`)).data.contact;j(i),y(!0)}catch(o){console.error("Error fetching contact details:",o)}},a=()=>{y(!1),j(null)},n=(s,o)=>s.length<=o?s:`${s.substring(0,o-3)}...`,z=(s,o)=>{const i=s.replace(/\D/g,"");return i.length<=o?s:"+"+(i.substring(0,o-1)+"...")};return e.jsxs(e.Fragment,{children:[h.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:b,style:g,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:_,children:"Partner"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:h.map(s=>e.jsxs("div",{onDoubleClick:()=>t(s.id),title:"Double click to edit contact",className:"flex flex-col rounded-2xl mb-2 h-44 cursor-pointer",style:{...d,minWidth:"165px"},children:[e.jsxs("div",{className:"flex flex-col p-2 rounded-t-2xl border-b-dark-blue items-start",style:{background:x},children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white",children:`${s.first_name} ${s.last_name}`.length>13?`${s.first_name} ${s.last_name}`.substring(0,10)+"...":`${s.first_name} ${s.last_name}`}),e.jsx("button",{onClick:()=>$(s.id),className:"text-white hover:text-[#FF0000] cursor-pointer",children:e.jsx(M,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-white",children:s.organization_name?s.organization_name.length>15?s.organization_name.substring(0,15)+"...":s.organization_name:"No company entered"})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size:"," ",s.deal_size?s.deal_size.length>15?"$"+E(s.deal_size.substring(0,15))+"...":"$"+E(s.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting:"," ",s.meeting_date?new Date(s.meeting_date).toLocaleString():"No meeting date entered"]}),e.jsx("p",{className:"text-xs",children:s.email?n(s.email,20):"No email entered"}),e.jsx("p",{className:"text-xs",children:s.phone_number?z(s.phone_number,15):"No phone number entered"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap",children:s.notes.length>20?s.notes.substring(0,20)+"...":s.notes})})]})]},s.id))})]}):null,C&&w&&e.jsx(B,{onClose:a,contactDetails:w})]})}function ge({borderColour:x,titleColors:m}){const f=window.location.pathname.split("/").at(-1),r=localStorage.getItem("currentDealId")||f,d={border:`2px solid  ${x}`},b=T("shadow-lg","rounded-2xl","w-full"),_={color:m,minWidth:"165px"},g={backgroundColor:"rgb(255, 255, 255)"},[h,N]=l.useState([]),[S,u]=l.useState(!0),[p,c]=l.useState(null),[C,y]=l.useState(!1),[w,j]=l.useState(null);if(l.useEffect(()=>{(async()=>{const o=localStorage.getItem("currentDealId")||f;if(!o){console.error("Deal ID not found in localStorage");return}try{const i=await v.get(`deals/offer-contacts/${o}`);N(i.data.data),u(!1)}catch(i){c(i),u(!1)}})()},[]),S)return e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(k,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})});if(p)return e.jsxs("div",{children:["Error: ",p.message]});const $=async s=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(async o=>{if(o.isConfirmed)try{await v.delete(`contacts/delete-contact/${r}/${s}`),N(h.filter(i=>i.id!==s)),D.fire("Deleted!","Your contact entry has been deleted.","success")}catch(i){console.error("Error:",i),D.fire("Error","Failed to delete contact","error")}})},t=async s=>{try{const i=(await v.get(`contacts/single-contact/${r}/${s}`)).data.contact;j(i),y(!0)}catch(o){console.error("Error fetching contact details:",o)}},a=()=>{y(!1),j(null)},n=(s,o)=>s.length<=o?s:`${s.substring(0,o-3)}...`,z=(s,o)=>{const i=s.replace(/\D/g,"");return i.length<=o?s:"+"+(i.substring(0,o-1)+"...")};return e.jsxs(e.Fragment,{children:[h.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:b,style:g,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:_,children:"Term Sheet"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:h.map(s=>e.jsxs("div",{onDoubleClick:()=>t(s.id),title:"Double click to edit contact",className:"flex flex-col rounded-2xl mb-2 h-44 cursor-pointer",style:{...d,minWidth:"165px"},children:[e.jsxs("div",{className:"flex flex-col p-2 rounded-t-2xl border-b-dark-blue items-start",style:{background:x},children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white",children:`${s.first_name} ${s.last_name}`.length>13?`${s.first_name} ${s.last_name}`.substring(0,10)+"...":`${s.first_name} ${s.last_name}`}),e.jsx("button",{onClick:()=>$(s.id),className:"text-white hover:text-[#FF0000] cursor-pointer",children:e.jsx(M,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-white",children:s.organization_name?s.organization_name.length>15?s.organization_name.substring(0,15)+"...":s.organization_name:"No company entered"})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size:"," ",s.deal_size?s.deal_size.length>15?"$"+E(s.deal_size.substring(0,15))+"...":"$"+E(s.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting:"," ",s.meeting_date?new Date(s.meeting_date).toLocaleString():"No meeting date entered"]}),e.jsx("p",{className:"text-xs",children:s.email?n(s.email,20):"No email entered"}),e.jsx("p",{className:"text-xs",children:s.phone_number?z(s.phone_number,15):"No phone number entered"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap",children:s.notes.length>20?s.notes.substring(0,20)+"...":s.notes})})]})]},s.id))})]}):null,C&&w&&e.jsx(B,{onClose:a,contactDetails:w})]})}function be({borderColour:x,titleColors:m}){const f=window.location.pathname.split("/").at(-1),r=localStorage.getItem("currentDealId")||f,d={border:`2px solid  ${x}`},b=T("shadow-lg","rounded-2xl","w-full"),_={color:m,minWidth:"165px"},g={backgroundColor:"rgb(255, 255, 255)"},[h,N]=l.useState([]),[S,u]=l.useState(!0),[p,c]=l.useState(null),[C,y]=l.useState(!1),[w,j]=l.useState(null);if(l.useEffect(()=>{(async()=>{const o=localStorage.getItem("currentDealId")||f;if(!o){console.error("Deal ID not found in localStorage");return}try{const i=await v.get(`deals/followup-contacts/${o}`);N(i.data.data),u(!1)}catch(i){c(i),u(!1)}})()},[]),S)return e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(k,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})});if(p)return e.jsxs("div",{children:["Error: ",p.message]});const $=async s=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(async o=>{if(o.isConfirmed)try{await v.delete(`contacts/delete-contact/${r}/${s}`),N(h.filter(i=>i.id!==s)),D.fire("Deleted!","Your contact entry has been deleted.","success")}catch(i){console.error("Error:",i),D.fire("Error","Failed to delete contact","error")}})},t=async s=>{try{const i=(await v.get(`contacts/single-contact/${r}/${s}`)).data.contact;j(i),y(!0)}catch(o){console.error("Error fetching contact details:",o)}},a=()=>{y(!1),j(null)},n=(s,o)=>s.length<=o?s:`${s.substring(0,o-3)}...`,z=(s,o)=>{const i=s.replace(/\D/g,"");return i.length<=o?s:"+"+(i.substring(0,o-1)+"...")};return e.jsxs(e.Fragment,{children:[h.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:b,style:g,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:_,children:"Follow-up"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:h.map(s=>e.jsxs("div",{onDoubleClick:()=>t(s.id),title:"Double click to edit contact",className:"flex flex-col rounded-2xl mb-2 h-44 cursor-pointer",style:{...d,minWidth:"165px"},children:[e.jsxs("div",{className:"flex flex-col p-2 rounded-t-2xl border-b-dark-blue items-start",style:{background:x},children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white",children:`${s.first_name} ${s.last_name}`.length>13?`${s.first_name} ${s.last_name}`.substring(0,10)+"...":`${s.first_name} ${s.last_name}`}),e.jsx("button",{onClick:()=>$(s.id),className:"text-white hover:text-[#FF0000] cursor-pointer",children:e.jsx(M,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-white",children:s.organization_name?s.organization_name.length>13?s.organization_name.substring(0,10)+"...":s.organization_name:"No company entered"})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size:"," ",s.deal_size?s.deal_size.length>15?"$"+E(s.deal_size.substring(0,15))+"...":"$"+E(s.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting:"," ",s.meeting_date?new Date(s.meeting_date).toLocaleString():"No meeting date entered"]}),e.jsx("p",{className:"text-xs",children:s.email?n(s.email,20):"No email entered"}),e.jsx("p",{className:"text-xs",children:s.phone_number?z(s.phone_number,15):"No phone number entered"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap",children:s.notes.length>20?s.notes.substring(0,20)+"...":s.notes})})]})]},s.id))})]}):null,C&&w&&e.jsx(B,{onClose:a,contactDetails:w})]})}const pe=()=>{const x=e.jsx(oe,{borderColour:"rgb(0, 0, 139)"}),m=e.jsx(ce,{borderColour:"#87CEEB"}),f=e.jsx(ie,{borderColour:"#08a5aa"}),r=e.jsx(de,{borderColour:"orange"}),d=e.jsx(ue,{borderColour:"green"}),b=e.jsx(xe,{borderColour:"#FF0000"});return e.jsxs("div",{className:"flex gap-2 pb-10 w-full overflow-y-auto overflow-x-auto",children:[e.jsx(F,{titles:"Research",titleColors:"rgb(0, 0, 139)",contents:x}),e.jsx(me,{borderColour:"rgb(115, 147, 179)",titleColors:"rgb(115, 147, 179)"}),e.jsx(F,{titles:"Contacted",titleColors:"#87CEEB",contents:m}),e.jsx(F,{titles:"Pitch",titleColors:"#08a5aa",contents:f}),e.jsx(he,{borderColour:"#FDDC5C",titleColors:"#FDDC5C"}),e.jsx(fe,{borderColour:"#E67451",titleColors:"#E67451"}),e.jsx(ge,{titleColors:"#000000",borderColour:"#000000"}),e.jsx(F,{titles:"Negotiation",titleColors:"orange",contents:r}),e.jsx(F,{titles:"Deal",titleColors:"green",contents:d}),e.jsx(be,{borderColour:"#D3D3D3",titleColors:"#D3D3D3"}),e.jsx(F,{titles:"Not a Fit",titleColors:"#FF0000",contents:b})]})};function je({onClose:x}){const m=l.useRef(),f=c=>{m.current===c.target&&x()},[r,d]=l.useState({firstName:"",lastName:"",moveContact:""}),[b,_]=l.useState(""),[g,h]=l.useState(""),[N,S]=l.useState(!1),u=c=>{if(c&&c.target){const{name:C,value:y}=c.target;d(w=>({...w,[C]:y}))}},p=async c=>{c.preventDefault();const C=localStorage.getItem("currentDealId");if(!C){console.error("Deal ID not found in localStorage");return}const y={first_name:r.firstName,last_name:r.lastName,stage:r.moveContact};try{const w=await v.patch(`/deals/change-stage/${C}`,y);console.log(w),_("Contact moved successfully."),window.location.reload(),h(""),d({firstName:"",lastName:"",moveContact:""}),setTimeout(()=>{S(!1),_(""),x()},2e3)}catch(w){console.log(w),h("Something went wrong. Please try again."),_(""),S(!1)}};return e.jsx("div",{ref:m,onClick:f,className:" fixed z-50 inset-0 bg-dark-blue bg-opacity-30 backdrop-blur-sm flex justify-center overflow-y-auto h-screen",children:e.jsx("div",{className:" mt-10 flex flex-col",children:e.jsxs("div",{className:" bg-white rounded-xl px-20 py-10 flex flex-col gap-5 items-center mx-4",children:[e.jsx("button",{onClick:x,className:" place-self-end text-red-600 hover:text-dark-blue",children:e.jsx(W,{size:30})}),e.jsx("h1",{className:" text-dark-blue text-3xl font-extrabold mb-5",children:"Move contacts within your pipeline"}),e.jsxs("form",{action:"",onSubmit:p,className:" flex flex-col gap-5",children:[b&&e.jsx("p",{className:" text-mansa-blue font-semibold",children:b}),g&&e.jsx("p",{className:" text-[#ff0000] font-semibold",children:g}),e.jsxs("div",{className:"flex flex-row items-center justify-center flex-wrap gap-5",children:[e.jsx(L,{type:"text",title:"First Name*",placeholder:"Sundi",id:"firstName",value:r.firstName,onChange:u}),e.jsx(L,{type:"text",title:"Last Name*",placeholder:"Keita",id:"lastName",value:r.lastName,onChange:u})]}),e.jsx("div",{className:"flex flex-row items-center justify-center flex-wrap gap-5",children:e.jsx(V,{label:"Move Contact To",id:"moveContact",value:r.moveContact,onChange:u})}),e.jsx("div",{className:" mt-8 w-full flex items-center justify-center",children:e.jsx(Y,{type:"submit",disabled:N,text:"Move Contact"})})]})]})})})}function Ne({onClose:x,dealDetail:m}){const[f,r]=l.useState(!1),d=l.useRef(),b=JSON.parse(localStorage.getItem("user")),_=u=>{d.current===u.target&&x()},g=`https://crm.mansastars.com${window.location.pathname}`,h=`Hi, ${b.first_name} ${b.last_name} has invited you to collaborate on the Mansa CRM Project titled "${m.deal_name}". Mansas CRM helps you manage your leads, target prospects, dealflow and manage follow-ups efficiently and affordably. Click the link below to accept the invitation and get started!`,N="Check out this dashboard",S=()=>{navigator.clipboard.writeText(g),r(!0),setTimeout(()=>{r(!1)},2e3)};return e.jsx("div",{ref:d,onClick:_,className:" fixed z-50 inset-0 bg-dark-blue bg-opacity-30 backdrop-blur-sm flex justify-center overflow-y-auto h-screen",children:e.jsx("div",{className:" mt-10 flex flex-col",children:e.jsxs("div",{className:" bg-white rounded-xl px-10 py-10 flex flex-col gap-5 items-center mx-4",children:[e.jsx("button",{onClick:x,className:" place-self-end text-red-600 hover:text-dark-blue",children:e.jsx(W,{size:30})}),e.jsx("h1",{className:" text-dark-blue text-3xl font-extrabold mb-5",children:"Share Dashboard"}),e.jsxs("div",{className:" flex max-md:flex-wrap items-center justify-center gap-5 text-dark-blue font-semibold",children:[e.jsxs("div",{className:" flex flex-col gap-5 items-center justify-center",children:[e.jsx(Z,{url:g,subject:N,body:h,children:e.jsx(R,{size:40,round:!0})}),e.jsx("p",{children:"Email"})]}),e.jsxs("div",{className:" flex flex-col gap-5 items-center justify-center",children:[e.jsx(A,{url:g,title:h,separator:" ",children:e.jsx(O,{size:40,round:!0})}),e.jsx("p",{children:"WhatsApp"})]}),e.jsxs("div",{className:" flex flex-col gap-5 items-center justify-center",children:[e.jsx(U,{url:g,title:h,children:e.jsx(G,{size:40,round:!0})}),e.jsx("p",{children:"X"})]}),e.jsxs("div",{className:" flex flex-col gap-5 items-center justify-center",children:[e.jsx(ee,{url:g,title:h,children:e.jsx(te,{size:40,round:!0})}),e.jsx("p",{children:"Facebook"})]}),e.jsxs("div",{className:" flex flex-col gap-5 items-center justify-center",children:[e.jsx(se,{url:g,title:h,children:e.jsx(ae,{size:40,round:!0})}),e.jsx("p",{children:"Telegram"})]})]}),e.jsxs("div",{className:"flex flex-col gap-5 mt-3 text-dark-blue w-full",children:[e.jsx("p",{className:" text-xl font-bold",children:"Page Link"}),e.jsxs("div",{onClick:S,className:" flex items-center justify-between gap-10 py-3 px-5 bg-gray-200 rounded-lg w-full cursor-pointer",children:[e.jsx("p",{className:" text-dark-blue font-semibold",children:g}),e.jsx(ne,{size:32,className:" text-mansa-blue hover:text-dark-blue"})]}),f&&e.jsx("p",{className:" text-mansa-blue text-base",children:"Link copied to clipboard!"})]})]})})})}function ye({dealDetail:x}){const[m,f]=l.useState(!1);return e.jsxs("div",{children:[e.jsxs("button",{className:`
        flex gap-5 border-4 border-dark-blue  active:bg-dark-blue active:text-white
        text-dark-blue px-5 max-md:px-2 py-2 max-md:py-1 rounded-xl transition-all duration-200 shadow
        hover:bg-dark-blue hover:text-white
        `,onClick:()=>f(!0),children:[e.jsx(le,{}),e.jsx("p",{className:" font-bold text-lg max-md:hidden",children:"Share"})]}),m&&e.jsx(Ne,{onClose:()=>f(!1),dealDetail:x})]})}function Ie(){H(),J();const[x,m]=l.useState(!1),[f,r]=l.useState(!1),[d,b]=l.useState([]),_=window.location.pathname.split("/").at(-1),[g,h]=l.useState("");localStorage.setItem("currentDealId",_);const N=localStorage.getItem("currentDealId"),S=JSON.parse(localStorage.getItem("user"));return l.useEffect(()=>{(async()=>{if(N)try{const p=await v.get(`deals/single-deal/${N}`);h(p.data.deal.owner_id);const c=p.data.deal;b(c)}catch(p){console.error("Error fetching a single deal:",p)}else console.error("Current deal ID not found in localStorage")})()},[N]),e.jsxs("div",{children:[e.jsx("div",{className:" sticky top-0 z-50",children:e.jsx(Q,{})}),e.jsxs("div",{className:" flex flex-col gap-2 w-full mr-2 h-screen overflow-auto pt-2 px-3",children:[S&&S.id===g&&e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("div",{className:" flex items-center gap-4",children:[e.jsx("div",{onClick:()=>m(!0),className:"flex",children:e.jsx(Y,{text:"Add a New Contact"})}),e.jsx("div",{onClick:()=>r(!0),className:"flex",children:e.jsx(Y,{text:"Move a Contact"})})]}),e.jsx("div",{className:"",children:e.jsx(ye,{dealDetail:d})})]}),e.jsxs("div",{className:"flex flex-row w-full items-center",children:[e.jsx("div",{className:" bg-dark-blue text-white font-bold text-2xl py-6 rounded-l-xl w-[40%] text-center",children:d&&d.deal_name&&d.deal_name.length>15?`${d.deal_name.substring(0,15)}...`:d&&d.deal_name}),e.jsxs("div",{className:" flex flex-col w-[60%]",children:[e.jsxs("div",{className:" bg-mansa-blue text-white py-2 text-center rounded-tr-xl",children:["Deal Size Amount:"," ",e.jsxs("span",{className:" font-semibold",children:["$",d.deal_size?E(d.deal_size):"0"]})]}),e.jsxs("div",{className:" flex flex-row  ",children:[e.jsxs("div",{className:" bg-[orange] text-white w-1/2 max-md:w-full py-2 pl-5",children:["In-Negotiation Value:"," ",e.jsxs("span",{className:" font-semibold",children:["$",d.negotiation_value?E(d.negotiation_value):"0"]})]}),e.jsxs("div",{className:" bg-[green] text-white w-1/2 max-md:w-full py-2 pl-5 rounded-br-xl",children:["Deal Signed Value:"," ",e.jsxs("span",{className:" font-semibold",children:["$",d.signed_value?E(d.signed_value):"0"]})]})]})]})]}),e.jsx(pe,{})]}),x&&e.jsx(re,{onClose:()=>m(!1)}),f&&e.jsx(je,{onClose:()=>r(!1)})]})}export{Ie as default};
