var Pe=t=>{throw TypeError(t)};var $e=(t,s,a)=>s.has(t)||Pe("Cannot "+a);var i=(t,s,a)=>($e(t,s,"read from private field"),a?a.call(t):s.get(t)),T=(t,s,a)=>s.has(t)?Pe("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,a),F=(t,s,a,l)=>($e(t,s,"write to private field"),l?l.call(t,a):s.set(t,a),a),z=(t,s,a)=>($e(t,s,"access private method"),a);import{S as ct,r as Z,s as Ce,a as we,n as jt,i as Ve,b as We,t as bt,f as vt,c as yt,d as Ke,e as Ee,h as He,g as wt,j as d,u as B,k as e,l as Je,m as E,o as D,B as ne,$ as Nt,p as Ct,q as St}from"./index-ntB6R5WO.js";import{F as Q,a as Se,D as Ye,b as dt,c as ut,B as pe,S as _t}from"./Reusables-BIbbh_81.js";import{g as Me,a as Dt,s as Et,r as Mt,_ as ge,b as ye,u as kt,c as It,d as $t,e as Ft,f as ke,i as zt}from"./mergeSlotProps-DTJ0bpB7.js";import{A as je}from"./Avatar-VDS2E7Vo.js";import{U as ht}from"./user-DAXcydoS.js";import{B as Rt,T as _e,a as De}from"./ThemeProvider-DA0WoLq5.js";import{X as Ie}from"./x-CX-kVRye.js";import{c as xe}from"./index-C-1F9MR0.js";import{r as Tt,I as Bt}from"./createSvgIcon-CpWWWrMp.js";import{L as Xe,M as Ot}from"./Menu-Bz2gY1O1.js";import{u as Lt}from"./index-DeRfrBiS.js";import{F as Ut}from"./FreeTrialBanner-Cbhbg064.js";import{E as qt,a as Yt,W as At,b as Qt,T as Pt,c as Vt,F as Wt,d as Kt,e as Ht,f as Jt}from"./index-BXTFjVUZ.js";import{c as xt}from"./createLucideIcon-8oh0i2kG.js";import{g as Xt}from"./getFilteredContacts.js-C6iNl801.js";import"./tag-DcY05dOM.js";var U,k,be,L,le,ce,X,ve,de,ue,re,oe,te,he,$,fe,Fe,ze,Re,Te,Be,Oe,Le,mt,ot,Zt=(ot=class extends ct{constructor(s,a){super();T(this,$);T(this,U);T(this,k);T(this,be);T(this,L);T(this,le);T(this,ce);T(this,X);T(this,ve);T(this,de);T(this,ue);T(this,re);T(this,oe);T(this,te);T(this,he,new Set);this.options=a,F(this,U,s),F(this,X,null),this.bindMethods(),this.setOptions(a)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,k).addObserver(this),Ze(i(this,k),this.options)?z(this,$,fe).call(this):this.updateResult(),z(this,$,Te).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ue(i(this,k),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ue(i(this,k),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,z(this,$,Be).call(this),z(this,$,Oe).call(this),i(this,k).removeObserver(this)}setOptions(s,a){const l=this.options,p=i(this,k);if(this.options=i(this,U).defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Z(this.options.enabled,i(this,k))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");z(this,$,Le).call(this),i(this,k).setOptions(this.options),l._defaulted&&!Ce(this.options,l)&&i(this,U).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,k),observer:this});const h=this.hasListeners();h&&Ge(i(this,k),p,this.options,l)&&z(this,$,fe).call(this),this.updateResult(a),h&&(i(this,k)!==p||Z(this.options.enabled,i(this,k))!==Z(l.enabled,i(this,k))||we(this.options.staleTime,i(this,k))!==we(l.staleTime,i(this,k)))&&z(this,$,Fe).call(this);const x=z(this,$,ze).call(this);h&&(i(this,k)!==p||Z(this.options.enabled,i(this,k))!==Z(l.enabled,i(this,k))||x!==i(this,te))&&z(this,$,Re).call(this,x)}getOptimisticResult(s){const a=i(this,U).getQueryCache().build(i(this,U),s),l=this.createResult(a,s);return es(this,l)&&(F(this,L,l),F(this,ce,this.options),F(this,le,i(this,k).state)),l}getCurrentResult(){return i(this,L)}trackResult(s,a){const l={};return Object.keys(s).forEach(p=>{Object.defineProperty(l,p,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(p),a==null||a(p),s[p])})}),l}trackProp(s){i(this,he).add(s)}getCurrentQuery(){return i(this,k)}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const a=i(this,U).defaultQueryOptions(s),l=i(this,U).getQueryCache().build(i(this,U),a);return l.isFetchingOptimistic=!0,l.fetch().then(()=>this.createResult(l,a))}fetch(s){return z(this,$,fe).call(this,{...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,L)))}createResult(s,a){var n;const l=i(this,k),p=this.options,h=i(this,L),x=i(this,le),o=i(this,ce),g=s!==l?s.state:i(this,be),{state:m}=s;let c={...m},b=!1,f;if(a._optimisticResults){const u=this.hasListeners(),A=!u&&Ze(s,a),P=u&&Ge(s,l,a,p);(A||P)&&(c={...c,...yt(m.data,s.options)}),a._optimisticResults==="isRestoring"&&(c.fetchStatus="idle")}let{error:v,errorUpdatedAt:_,status:y}=c;if(a.select&&c.data!==void 0)if(h&&c.data===(x==null?void 0:x.data)&&a.select===i(this,ve))f=i(this,de);else try{F(this,ve,a.select),f=a.select(c.data),f=Ke(h==null?void 0:h.data,f,a),F(this,de,f),F(this,X,null)}catch(u){F(this,X,u)}else f=c.data;if(a.placeholderData!==void 0&&f===void 0&&y==="pending"){let u;if(h!=null&&h.isPlaceholderData&&a.placeholderData===(o==null?void 0:o.placeholderData))u=h.data;else if(u=typeof a.placeholderData=="function"?a.placeholderData((n=i(this,ue))==null?void 0:n.state.data,i(this,ue)):a.placeholderData,a.select&&u!==void 0)try{u=a.select(u),F(this,X,null)}catch(A){F(this,X,A)}u!==void 0&&(y="success",f=Ke(h==null?void 0:h.data,u,a),b=!0)}i(this,X)&&(v=i(this,X),f=i(this,de),_=Date.now(),y="error");const M=c.fetchStatus==="fetching",C=y==="pending",N=y==="error",w=C&&M,I=f!==void 0;return{status:y,fetchStatus:c.fetchStatus,isPending:C,isSuccess:y==="success",isError:N,isInitialLoading:w,isLoading:w,data:f,dataUpdatedAt:c.dataUpdatedAt,error:v,errorUpdatedAt:_,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>g.dataUpdateCount||c.errorUpdateCount>g.errorUpdateCount,isFetching:M,isRefetching:M&&!C,isLoadingError:N&&!I,isPaused:c.fetchStatus==="paused",isPlaceholderData:b,isRefetchError:N&&I,isStale:Ae(s,a),refetch:this.refetch}}updateResult(s){const a=i(this,L),l=this.createResult(i(this,k),this.options);if(F(this,le,i(this,k).state),F(this,ce,this.options),i(this,le).data!==void 0&&F(this,ue,i(this,k)),Ce(l,a))return;F(this,L,l);const p={},h=()=>{if(!a)return!0;const{notifyOnChangeProps:x}=this.options,o=typeof x=="function"?x():x;if(o==="all"||!o&&!i(this,he).size)return!0;const j=new Set(o??i(this,he));return this.options.throwOnError&&j.add("error"),Object.keys(i(this,L)).some(g=>{const m=g;return i(this,L)[m]!==a[m]&&j.has(m)})};(s==null?void 0:s.listeners)!==!1&&h()&&(p.listeners=!0),z(this,$,mt).call(this,{...p,...s})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&z(this,$,Te).call(this)}},U=new WeakMap,k=new WeakMap,be=new WeakMap,L=new WeakMap,le=new WeakMap,ce=new WeakMap,X=new WeakMap,ve=new WeakMap,de=new WeakMap,ue=new WeakMap,re=new WeakMap,oe=new WeakMap,te=new WeakMap,he=new WeakMap,$=new WeakSet,fe=function(s){z(this,$,Le).call(this);let a=i(this,k).fetch(this.options,s);return s!=null&&s.throwOnError||(a=a.catch(jt)),a},Fe=function(){z(this,$,Be).call(this);const s=we(this.options.staleTime,i(this,k));if(Ve||i(this,L).isStale||!We(s))return;const l=bt(i(this,L).dataUpdatedAt,s)+1;F(this,re,setTimeout(()=>{i(this,L).isStale||this.updateResult()},l))},ze=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,k)):this.options.refetchInterval)??!1},Re=function(s){z(this,$,Oe).call(this),F(this,te,s),!(Ve||Z(this.options.enabled,i(this,k))===!1||!We(i(this,te))||i(this,te)===0)&&F(this,oe,setInterval(()=>{(this.options.refetchIntervalInBackground||vt.isFocused())&&z(this,$,fe).call(this)},i(this,te)))},Te=function(){z(this,$,Fe).call(this),z(this,$,Re).call(this,z(this,$,ze).call(this))},Be=function(){i(this,re)&&(clearTimeout(i(this,re)),F(this,re,void 0))},Oe=function(){i(this,oe)&&(clearInterval(i(this,oe)),F(this,oe,void 0))},Le=function(){const s=i(this,U).getQueryCache().build(i(this,U),this.options);if(s===i(this,k))return;const a=i(this,k);F(this,k,s),F(this,be,s.state),this.hasListeners()&&(a==null||a.removeObserver(this),s.addObserver(this))},mt=function(s){Ee.batch(()=>{s.listeners&&this.listeners.forEach(a=>{a(i(this,L))}),i(this,U).getQueryCache().notify({query:i(this,k),type:"observerResultsUpdated"})})},ot);function Gt(t,s){return Z(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function Ze(t,s){return Gt(t,s)||t.state.data!==void 0&&Ue(t,s,s.refetchOnMount)}function Ue(t,s,a){if(Z(s.enabled,t)!==!1){const l=typeof a=="function"?a(t):a;return l==="always"||l!==!1&&Ae(t,s)}return!1}function Ge(t,s,a,l){return(t!==s||Z(l.enabled,t)===!1)&&(!a.suspense||t.state.status!=="error")&&Ae(t,a)}function Ae(t,s){return Z(s.enabled,t)!==!1&&t.isStaleByTime(we(s.staleTime,t))}function es(t,s){return!Ce(t.getCurrentResult(),s)}var se,ae,q,G,ee,Ne,qe,it,ts=(it=class extends ct{constructor(s,a){super();T(this,ee);T(this,se);T(this,ae);T(this,q);T(this,G);F(this,se,s),this.setOptions(a),this.bindMethods(),z(this,ee,Ne).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){var l;const a=this.options;this.options=i(this,se).defaultMutationOptions(s),Ce(this.options,a)||i(this,se).getMutationCache().notify({type:"observerOptionsUpdated",mutation:i(this,q),observer:this}),a!=null&&a.mutationKey&&this.options.mutationKey&&He(a.mutationKey)!==He(this.options.mutationKey)?this.reset():((l=i(this,q))==null?void 0:l.state.status)==="pending"&&i(this,q).setOptions(this.options)}onUnsubscribe(){var s;this.hasListeners()||(s=i(this,q))==null||s.removeObserver(this)}onMutationUpdate(s){z(this,ee,Ne).call(this),z(this,ee,qe).call(this,s)}getCurrentResult(){return i(this,ae)}reset(){var s;(s=i(this,q))==null||s.removeObserver(this),F(this,q,void 0),z(this,ee,Ne).call(this),z(this,ee,qe).call(this)}mutate(s,a){var l;return F(this,G,a),(l=i(this,q))==null||l.removeObserver(this),F(this,q,i(this,se).getMutationCache().build(i(this,se),this.options)),i(this,q).addObserver(this),i(this,q).execute(s)}},se=new WeakMap,ae=new WeakMap,q=new WeakMap,G=new WeakMap,ee=new WeakSet,Ne=function(){var a;const s=((a=i(this,q))==null?void 0:a.state)??wt();F(this,ae,{...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset})},qe=function(s){Ee.batch(()=>{var a,l,p,h,x,o,j,g;if(i(this,G)&&this.hasListeners()){const m=i(this,ae).variables,c=i(this,ae).context;(s==null?void 0:s.type)==="success"?((l=(a=i(this,G)).onSuccess)==null||l.call(a,s.data,m,c),(h=(p=i(this,G)).onSettled)==null||h.call(p,s.data,null,m,c)):(s==null?void 0:s.type)==="error"&&((o=(x=i(this,G)).onError)==null||o.call(x,s.error,m,c),(g=(j=i(this,G)).onSettled)==null||g.call(j,void 0,s.error,m,c))}this.listeners.forEach(m=>{m(i(this,ae))})})},it),ft=d.createContext(!1),ss=()=>d.useContext(ft);ft.Provider;function as(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var ns=d.createContext(as()),ls=()=>d.useContext(ns);function pt(t,s){return typeof t=="function"?t(...s):!!t}function rs(){}var os=(t,s)=>{(t.suspense||t.throwOnError)&&(s.isReset()||(t.retryOnMount=!1))},is=t=>{d.useEffect(()=>{t.clearReset()},[t])},cs=({result:t,errorResetBoundary:s,throwOnError:a,query:l})=>t.isError&&!s.isReset()&&!t.isFetching&&l&&pt(a,[t.error,l]),ds=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},us=(t,s)=>(t==null?void 0:t.suspense)&&s.isPending,hs=(t,s,a)=>s.fetchOptimistic(t).catch(()=>{a.clearReset()});function xs(t,s,a){var g,m,c,b;const l=B(),p=ss(),h=ls(),x=l.defaultQueryOptions(t);(m=(g=l.getDefaultOptions().queries)==null?void 0:g._experimental_beforeQuery)==null||m.call(g,x),x._optimisticResults=p?"isRestoring":"optimistic",ds(x),os(x,h),is(h);const[o]=d.useState(()=>new s(l,x)),j=o.getOptimisticResult(x);if(d.useSyncExternalStore(d.useCallback(f=>{const v=p?()=>{}:o.subscribe(Ee.batchCalls(f));return o.updateResult(),v},[o,p]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),d.useEffect(()=>{o.setOptions(x,{listeners:!1})},[x,o]),us(x,j))throw hs(x,o,h);if(cs({result:j,errorResetBoundary:h,throwOnError:x.throwOnError,query:l.getQueryCache().get(x.queryHash)}))throw j.error;return(b=(c=l.getDefaultOptions().queries)==null?void 0:c._experimental_afterQuery)==null||b.call(c,x,j),x.notifyOnChangeProps?j:o.trackResult(j)}function V(t,s){return xs(t,Zt)}function O(t,s){const a=B(),[l]=d.useState(()=>new ts(a,t));d.useEffect(()=>{l.setOptions(t)},[l,t]);const p=d.useSyncExternalStore(d.useCallback(x=>l.subscribe(Ee.batchCalls(x)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),h=d.useCallback((x,o)=>{l.mutate(x,o).catch(rs)},[l]);if(p.error&&pt(l.options.throwOnError,[p.error]))throw p.error;return{...p,mutate:h,mutateAsync:p.mutate}}/**
 * @license lucide-react v0.320.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=xt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.320.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=xt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),et=Me("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),tt=Me("MuiListItemIcon",["root","alignItemsFlexStart"]),st=Me("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function ps(t){return Dt("MuiMenuItem",t)}const me=Me("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),gs=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],js=(t,s)=>{const{ownerState:a}=t;return[s.root,a.dense&&s.dense,a.divider&&s.divider,!a.disableGutters&&s.gutters]},bs=t=>{const{disabled:s,dense:a,divider:l,disableGutters:p,selected:h,classes:x}=t,j=Ft({root:["root",a&&"dense",s&&"disabled",!p&&"gutters",l&&"divider",h&&"selected"]},ps,x);return ge({},x,j)},vs=Et(Rt,{shouldForwardProp:t=>Mt(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:js})(({theme:t,ownerState:s})=>ge({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!s.disableGutters&&{paddingLeft:16,paddingRight:16},s.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${me.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:ye(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${me.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:ye(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${me.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:ye(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:ye(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${me.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${me.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${et.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${et.inset}`]:{marginLeft:52},[`& .${st.root}`]:{marginTop:0,marginBottom:0},[`& .${st.inset}`]:{paddingLeft:36},[`& .${tt.root}`]:{minWidth:36}},!s.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},s.dense&&ge({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{[`& .${tt.root} svg`]:{fontSize:"1.25rem"}}))),at=d.forwardRef(function(s,a){const l=kt({props:s,name:"MuiMenuItem"}),{autoFocus:p=!1,component:h="li",dense:x=!1,divider:o=!1,disableGutters:j=!1,focusVisibleClassName:g,role:m="menuitem",tabIndex:c,className:b}=l,f=It(l,gs),v=d.useContext(Xe),_=d.useMemo(()=>({dense:x||v.dense||!1,disableGutters:j}),[v.dense,x,j]),y=d.useRef(null);Lt(()=>{p&&y.current&&y.current.focus()},[p]);const M=ge({},l,{dense:_.dense,divider:o,disableGutters:j}),C=bs(l),N=$t(y,a);let w;return l.disabled||(w=c!==void 0?c:-1),e.jsx(Xe.Provider,{value:_,children:e.jsx(vs,ge({ref:N,role:m,tabIndex:w,component:h,focusVisibleClassName:Je(C.focusVisible,g),className:Je(C.root,b)},f,{ownerState:M,classes:C}))})}),{palette:ys}=ke(),{augmentColor:ws}=ys,Ns=t=>ws({color:{main:t}}),nt=ke({palette:{mainColor:Ns("#08a5aa")}}),Cs=()=>{const t=d.useRef(),s=d.useRef(),[a,l]=d.useState("");d.useState(!0),d.useEffect(()=>{t.current=window.cloudinary,s.current=t.current.createUploadWidget({cloudName:"divbyxxwx",uploadPreset:"o9yoqewt",multiple:!1,maxFiles:1,clientAllowedFormats:["jpg","jpeg","png"],cropping:!0,croppingAspectRatio:1},(x,o)=>{if(x)E.fire({icon:"error",title:"Upload Error",text:"An error occurred while uploading the image. Please try again or contact support."});else if(o&&o.event==="success"){const j=o.info.secure_url;l(j),localStorage.setItem("profile_pic",j)}})},[]);const p=()=>{s.current.open()},h=async()=>{l(""),localStorage.setItem(a)};return e.jsxs("div",{className:"w-full flex flex-row max-md:flex-col justify-center max-md:gap-5 items-center",children:[e.jsx("div",{className:"w-full flex justify-center",children:a?e.jsx(je,{src:a,alt:"User's image",sx:{width:128,height:128}}):e.jsx(je,{sx:{width:128,height:128,backgroundColor:"rgba(8,165,170,70%)",fontSize:32},children:e.jsx(ht,{size:48})})}),e.jsxs("div",{className:"flex gap-5 max-md:justify-center w-full",children:[e.jsx(_e,{theme:nt,children:e.jsx(De,{variant:"contained",onClick:p,type:"button",color:"mainColor",children:"Upload Image"})}),e.jsx(_e,{theme:nt,children:e.jsx(De,{variant:"outlined",onClick:h,type:"button",color:"mainColor",disabled:!a,children:"Delete Image"})})]})]})};function lt({onClose:t,data:s}){const a=d.useRef(),l=d.useRef(),p=B(),h=localStorage.getItem("currentDealId"),x=y=>{a.current===y.target&&t()},[o,j]=d.useState({title:s.title||"",firstName:s.first_name||"",lastName:s.last_name||"",company:s.organization_name||"",dealSize:0,email:s.email||"",phoneNumber:s.phone_number||"",notes:"",currentStage:"",datetime:""}),[g,m]=d.useState(""),[c,b]=d.useState(!1),f=y=>{if(y&&y.target){const{name:M,value:C}=y.target;j(N=>({...N,[M]:C}))}},v=O({mutationFn:async y=>{if(!h)throw new Error("Deal ID not found in localStorage");return D.post(`/deals/create-contact/${h}`,y)},onSuccess:()=>{p.invalidateQueries(["contacts","deals","followUps","negotiations","notAFits","OnGoingReviews","partners","pitches","prospects","researches","termSheets"]),localStorage.removeItem("profile_pic"),j({title:"",firstName:"",lastName:"",company:"",dealSize:0,email:"",phoneNumber:"",notes:"",currentStage:"",datetime:""}),b(!1),t(),ne.success("Contact created successfully.")},onError:y=>{m("An error occurred. Please try again."),l.current.scrollIntoView({behavior:"smooth"}),b(!1)}}),_=async y=>{y.preventDefault(),b(!0);let M;o.datetime&&(M=new Date(o.datetime).toISOString());const C={deal_id:h,title:o.title,first_name:o.firstName,last_name:o.lastName,organization_name:o.company,deal_size:o.dealSize,email:o.email,phone_number:o.phoneNumber,stage:o.currentStage,meeting_date:M,notes:o.notes,profile_pic:localStorage.getItem("profile_pic")||""};v.mutate(C)};return e.jsx("div",{ref:a,onClick:x,className:" fixed z-50 inset-0 bg-dark-blue bg-opacity-30 backdrop-blur-sm flex justify-center overflow-y-auto h-screen",children:e.jsx("div",{className:" mt-10 flex flex-col w-full",children:e.jsxs("div",{className:" bg-white rounded-xl px-20 max-md:px-5 py-10 flex flex-col gap-7 items-center mx-20 max-md:mx-10",children:[e.jsx("button",{onClick:t,className:" self-end hover:text-dark-blue text-red-500",children:e.jsx(Ie,{size:30})}),e.jsx("h1",{ref:l,className:" text-dark-blue text-3xl max-md:text-2xl max-sm:text-xl font-extrabold",children:"Add a new contact to your pipeline"}),e.jsxs("form",{action:"",onSubmit:_,className:" flex flex-col gap-5 w-full",children:[g&&e.jsx("p",{className:" text-[#ff0000] font-semibold",children:g}),e.jsxs("div",{className:"flex flex-col gap-8 w-full",children:[e.jsx(Cs,{}),e.jsxs("div",{className:" flex flex-row flex-wrap gap-5 justify-center max-md:justify-start",children:[e.jsx(Q,{type:"text",title:"Title",placeholder:"Mr./Mrs./Ms./Dr./Engr.",id:"title",value:o.title,onChange:f}),e.jsx(Se,{type:"text",title:"First Name*",placeholder:"Sundi",id:"firstName",value:o.firstName,onChange:f}),e.jsx(Se,{type:"text",title:"Last Name*",placeholder:"Keita",id:"lastName",value:o.lastName,onChange:f})]}),e.jsxs("div",{className:" flex flex-row flex-wrap gap-x-5 gap-y-8 justify-center max-md:justify-start",children:[e.jsx(Q,{type:"text",title:"Company",placeholder:"Mansa, LLC",id:"company",value:o.company,onChange:f}),e.jsx(Q,{type:"number",title:"Deal Size ($)",placeholder:"1,000,000",id:"dealSize",min:0,value:o.dealSize,onChange:f}),e.jsx(Q,{type:"email",title:"Contact Email",placeholder:"sundi@sankore.com",id:"email",value:o.email,onChange:f}),e.jsx(Q,{type:"tel",title:"Phone Number",placeholder:"+123456789",id:"phoneNumber",maxLength:15,value:o.phoneNumber,onChange:f}),e.jsx(Ye,{label:"Current Stage",id:"currentStage",value:o.currentStage,onChange:f}),e.jsx(dt,{title:"Meeting Date",value:o.datetime,onChange:f})]}),e.jsx("div",{children:e.jsx(ut,{value:o.notes,onChange:f})})]}),e.jsx("div",{className:" mt-8 w-full flex items-center justify-center",children:e.jsx(pe,{type:"submit",disabled:c,text:"Create Contact"})})]})]})})})}function ie({titles:t,titleColors:s,contents:a}){const l=xe("shadow-lg","rounded-2xl","w-full"),p={color:s,minWidth:"210px"},h={backgroundColor:"rgb(255, 255, 255)"};return e.jsxs("div",{className:" flex flex-col gap-5 items-center w-full ",children:[e.jsx("div",{className:l,style:h,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center w-full ",style:p,children:t})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:a})]})}const W=()=>e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(Nt,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})}),{palette:Ss}=ke(),{augmentColor:_s}=Ss,Ds=t=>_s({color:{main:t}}),rt=ke({palette:{mainColor:Ds("#08a5aa")}}),Es=({profile_url:t,contactId:s})=>{const a=d.useRef(),l=d.useRef(),[p,h]=d.useState(t||""),x=localStorage.getItem("currentDealId"),o=B();d.useEffect(()=>{a.current=window.cloudinary,l.current=a.current.createUploadWidget({cloudName:"divbyxxwx",uploadPreset:"o9yoqewt",multiple:!1,maxFiles:1,clientAllowedFormats:["jpg","jpeg","png"],cropping:!0,croppingAspectRatio:1},(b,f)=>{if(b)E.fire({icon:"error",title:"Upload Error",text:"An error occurred while uploading the image. Please try again or contact support."});else if(f&&f.event==="success"){const v=f.info.secure_url;h(v),j.mutate({contactId:s,profile_pic:v})}})},[]);const j=O({mutationFn:({contactId:b,profile_pic:f})=>D.patch(`deals/edit-contact/${x}/${b}`,{profile_pic:f}),onSuccess:()=>{ne.success("Contact image updated successfully."),o.invalidateQueries(["contacts",x])},onError:()=>{ne.error("Contact image failed to update, please try again.")}}),g=O({mutationFn:b=>D.patch(`/contacts/delete_photo/${x}/${b}`),onSuccess:()=>{h(""),ne.success("Contact image deleted successfully."),o.invalidateQueries(["contacts",x])},onError:()=>{ne.error("Contact image failed to delete, please try again.")}}),m=()=>{l.current.open()},c=async()=>{g.mutate(s)};return e.jsxs("div",{className:"w-full flex flex-row max-md:flex-col justify-center max-md:gap-5 items-center",children:[e.jsx("div",{className:"w-full flex justify-center",children:p?e.jsx(je,{src:p,alt:"User's image",sx:{width:128,height:128}}):e.jsx(je,{sx:{width:128,height:128,backgroundColor:"rgba(8,165,170,70%)",fontSize:32},children:e.jsx(ht,{size:48})})}),e.jsxs("div",{className:"flex gap-5 max-md:justify-center w-full",children:[e.jsx(_e,{theme:rt,children:e.jsx(De,{variant:"contained",onClick:m,type:"button",color:"mainColor",children:"Upload Image"})}),e.jsx(_e,{theme:rt,children:e.jsx(De,{variant:"outlined",onClick:c,type:"button",color:"mainColor",disabled:p===""&&!0,children:"Delete Image"})})]})]})};function K({onClose:t,contactDetails:s}){const[a,l]=d.useState(""),[p,h]=d.useState(!1),x=window.location.pathname.split("/").at(-1),o=B();let j=s.id;const g=d.useRef(),m=C=>{g.current===C.target&&t()},c=C=>{if(C&&C.target){const{name:N,value:w}=C.target;v(I=>({...I,[N]:w}))}},b=C=>C?new Date(C).toISOString().slice(0,16):"",[f,v]=d.useState({title:s.title,first_name:s.first_name,last_name:s.last_name,organization_name:s.organization_name,deal_size:s.deal_size,email:s.email,phone_number:s.phone_number,stage:s.stage,datetime:b(s.meeting_date),notes:s.notes,profile_pic:s.profile_pic});let _;f.datetime&&(_=new Date(f.datetime).toISOString());const y=O({mutationFn:async C=>{const N=localStorage.getItem("currentDealId")||x;return await D.patch(`deals/edit-contact/${N}/${s.id}`,C)},onSuccess:()=>{l(""),h(!1),t(),ne.success("Contact updated successfully."),o.invalidateQueries(["contacts","deals",x,"followUps","negotiations","notAFits","OnGoingReviews","partners","pitches","prospects","researches","termSheets"])},onError:C=>{C.response.data.message==="unable to edit contact at this time"&&(t(),E.fire("Error","You are not allowed to edit this dashboard.","error")),l("Something went wrong. Please try again."),h(!1)}}),M=async C=>{if(C.preventDefault(),!(localStorage.getItem("currentDealId")||x)){console.error("Deal ID not found in localStorage");return}const w=JSON.parse(localStorage.getItem("user"));w||(t(),E.fire("Error","You are not allowed to edit this dashboard.","error"));const I={userId:w.id,title:f.title,first_name:f.first_name,last_name:f.last_name,organization_name:f.organization_name,deal_size:f.deal_size,email:f.email,phone_number:f.phone_number,stage:f.stage,meeting_date:_,notes:f.notes};y.mutate(I)};return e.jsx("div",{ref:g,onClick:m,className:"fixed z-50 inset-0 bg-dark-blue bg-opacity-30 backdrop-blur-sm flex justify-center overflow-y-auto h-screen",children:e.jsx("div",{className:" mt-10 flex flex-col",children:e.jsxs("div",{className:"bg-white rounded-xl px-20 max-md:px-5 py-10 flex flex-col gap-7 items-center mx-20 max-md:mx-10",children:[e.jsx("button",{onClick:t,className:"self-end text-red-500 hover:text-dark-blue",children:e.jsx(Ie,{size:30})}),e.jsx("h1",{className:"text-dark-blue text-3xl max-md:text-2xl max-sm:text-xl font-extrabold",children:"Edit Contact Details"}),e.jsxs("form",{action:"",onSubmit:M,className:"flex flex-col gap-5",children:[a&&e.jsx("p",{className:"text-[#ff0000] font-semibold",children:a}),e.jsx(Es,{profile_url:f.profile_pic,contactId:j}),e.jsxs("div",{className:"flex flex-row items-center justify-center flex-wrap gap-5 w-full",children:[e.jsx(Q,{type:"text",title:"Title",placeholder:"Mr./Mrs./Ms./Dr./Engr.",id:"title",value:f.title,onChange:c}),e.jsx(Q,{type:"text",title:"First Name",placeholder:"Sundi",id:"first_name",value:f.first_name,onChange:c}),e.jsx(Q,{type:"text",title:"Last Name",placeholder:"Keita",id:"last_name",value:f.last_name,onChange:c}),e.jsx(Q,{type:"text",title:"Company",placeholder:"Mansa, LLC",id:"organization_name",value:f.organization_name,onChange:c}),e.jsx(Q,{type:"number",title:"Deal Size ($)",placeholder:"1,000,000",id:"deal_size",min:0,value:f.deal_size,onChange:c}),e.jsx(Q,{type:"email",title:"Contact Email",placeholder:"sundi@sankore.com",id:"email",value:f.email,onChange:c}),e.jsx(Q,{type:"tel",title:"Phone Number",placeholder:"+123456789",id:"phone_number",value:f.phone_number,onChange:c,maxLength:15}),e.jsx(Ye,{label:"Current Stage",id:"stage",value:f.stage,onChange:c}),e.jsx(dt,{title:"Meeting Date",value:f.datetime,onChange:c})]}),e.jsx("div",{children:e.jsx(ut,{value:f.notes,onChange:c})}),e.jsx("div",{className:"mt-8 w-full flex items-center justify-center",children:e.jsx(pe,{type:"submit",disabled:p,text:"Update Contact"})})]})]})})})}const Y=t=>t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),H=({profile_url:t,firstName:s,lastName:a,color:l})=>{const p=(h,x)=>`${h[0]}${x[0]}`.toUpperCase();return e.jsx(je,{src:t||"",alt:"User's profile",sx:{width:40,height:40,backgroundColor:t?"transparent":"white",fontSize:20,color:`${l}`},children:!t&&p(s,a)})};var Qe={},Ms=zt;Object.defineProperty(Qe,"__esModule",{value:!0});var gt=Qe.default=void 0,ks=Ms(Tt()),Is=e;gt=Qe.default=(0,ks.default)((0,Is.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert");const J=({anchorEl:t,handleMenuClick:s,handleMenuClose:a,handleViewOrUpdate:l,handleDeleteClick:p})=>e.jsxs(e.Fragment,{children:[e.jsx(Bt,{onClick:s,className:"text-white",size:"small",children:e.jsx(gt,{htmlColor:"#ffffff"})}),e.jsxs(Ot,{anchorEl:t,open:!!t,onClose:a,children:[e.jsx(at,{onClick:l,children:"View or Edit Contact"}),e.jsx(at,{onClick:p,children:"Delete Contact"})]})]});function $s({borderColour:t}){const s=B(),a=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),l={border:`2px solid  ${t}`,width:"210px",minWidth:"210px",overflow:"hidden"},[p,h]=d.useState(!1),[x,o]=d.useState(null),[j,g]=d.useState(null),[m,c]=d.useState(null),{data:b,error:f,isLoading:v}=V({queryKey:["researches",a],queryFn:async()=>(await D.get(`deals/research-contacts/${a}`)).data.data}),_=O({mutationFn:n=>D.delete(`contacts/delete-contact/${a}/${n}`),onSuccess:()=>{s.invalidateQueries(["researches",a]),E.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{E.fire("Error","Failed to delete contact","error")}}),y=async n=>{E.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(u=>{u.isConfirmed&&_.mutate(n)})},M=async n=>{try{const u=await D.get(`contacts/single-contact/${a}/${n}`);o(u.data.contact),h(!0)}catch(u){console.error("Error fetching contact details:",u)}},C=()=>{h(!1),o(null)},N=(n,u)=>{g(n.currentTarget),c(u)},w=()=>{g(null),c(null)},I=()=>{m&&(M(m),w())},R=()=>{m&&(y(m),w())};return v?e.jsx(W,{}):f?e.jsx("div",{children:"Error occurred fetching contacts in research stage."}):e.jsxs(e.Fragment,{children:[b.length===0?e.jsx("div",{}):b.map(n=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...l},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:t},children:[e.jsx(H,{profile_url:n.profile_pic,firstName:n.first_name,lastName:n.last_name,color:t}),e.jsxs("div",{className:"flex-grow overflow-hidden",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${n.first_name} ${n.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:n.organization_name||"No company"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{anchorEl:j,handleMenuClick:u=>N(u,n.id),handleMenuClose:w,handleViewOrUpdate:I,handleDeleteClick:R})})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{className:"overflow-hidden w-full",children:[e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Deal Size: $",n.deal_size?Y(n.deal_size):"0"]}),e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Meeting:"," ",n.meeting_date?new Date(n.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs truncate",children:n.email||"No email"}),e.jsx("p",{className:"text-xs truncate",children:n.phone_number||"No phone number"})]}),e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("p",{className:"text-xs truncate",children:n.notes})})]})]},n.id)),p&&x&&e.jsx(K,{onClose:C,contactDetails:x})]})}function Fs({borderColour:t}){const s=B(),a=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),l={border:`2px solid ${t}`,width:"210px",minWidth:"210px",overflow:"hidden"},[p,h]=d.useState(!1),[x,o]=d.useState(null),[j,g]=d.useState(null),[m,c]=d.useState(null),{data:b,error:f,isLoading:v}=V({queryKey:["contacts",a],queryFn:async()=>(await D.get(`deals/contacted-contacts/${a}`)).data.data}),_=O({mutationFn:n=>D.delete(`contacts/delete-contact/${a}/${n}`),onSuccess:()=>{s.invalidateQueries(["contacts",a]),E.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{E.fire("Error","Failed to delete contact","error")}}),y=async n=>{E.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(u=>{u.isConfirmed&&_.mutate(n)})},M=async n=>{try{const u=await D.get(`contacts/single-contact/${a}/${n}`);o(u.data.contact),h(!0)}catch(u){console.error("Error fetching contact details:",u)}},C=()=>{h(!1),o(null)},N=(n,u)=>{g(n.currentTarget),c(u)},w=()=>{g(null),c(null)},I=()=>{m&&(M(m),w())},R=()=>{m&&(y(m),w())};return v?e.jsx(W,{}):f?e.jsx("div",{children:"Error occurred fetching contacts in contacted stage."}):e.jsxs(e.Fragment,{children:[b.length===0?e.jsx("div",{}):b.map(n=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...l},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:t},children:[e.jsx(H,{profile_url:n.profile_pic,firstName:n.first_name,lastName:n.last_name,color:t}),e.jsxs("div",{className:"flex-grow overflow-hidden",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${n.first_name} ${n.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:n.organization_name||"No company"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{anchorEl:j,handleMenuClick:u=>N(u,n.id),handleMenuClose:w,handleViewOrUpdate:I,handleDeleteClick:R})})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{className:"overflow-hidden w-full",children:[e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Deal Size: $",n.deal_size?Y(n.deal_size):"0"]}),e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Meeting:"," ",n.meeting_date?new Date(n.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs truncate",children:n.email||"No email"}),e.jsx("p",{className:"text-xs truncate",children:n.phone_number||"No phone number"})]}),e.jsx("div",{className:" w-full overflow-hidden",children:e.jsx("p",{className:"text-xs truncate",children:n.notes})})]})]},n.id)),p&&x&&e.jsx(K,{onClose:C,contactDetails:x})]})}function zs({borderColour:t}){const s=B(),a=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),l={border:`2px solid  ${t}`,width:"210px",minWidth:"210px",overflow:"hidden"},[p,h]=d.useState(!1),[x,o]=d.useState(null),[j,g]=d.useState(null),[m,c]=d.useState(null),{data:b,error:f,isLoading:v}=V({queryKey:["pitches",a],queryFn:async()=>(await D.get(`deals/pitch-contacts/${a}`)).data.data}),_=O({mutationFn:n=>D.delete(`contacts/delete-contact/${a}/${n}`),onSuccess:()=>{s.invalidateQueries(["pitches",a]),E.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{E.fire("Error","Failed to delete contact","error")}}),y=async n=>{E.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(u=>{u.isConfirmed&&_.mutate(n)})},M=async n=>{try{const u=await D.get(`contacts/single-contact/${a}/${n}`);o(u.data.contact),h(!0)}catch(u){console.error("Error fetching contact details:",u)}},C=()=>{h(!1),o(null)},N=(n,u)=>{g(n.currentTarget),c(u)},w=()=>{g(null),c(null)},I=()=>{m&&(M(m),w())},R=()=>{m&&(y(m),w())};return v?e.jsx(W,{}):f?e.jsx("div",{children:"Error occurred fetching contacts in pitch stage."}):e.jsxs(e.Fragment,{children:[b.length===0?e.jsx("div",{}):b.map(n=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...l},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:t},children:[e.jsx(H,{profile_url:n.profile_pic,firstName:n.first_name,lastName:n.last_name,color:t}),e.jsxs("div",{className:"flex-grow overflow-hidden",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${n.first_name} ${n.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:n.organization_name||"No company"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{anchorEl:j,handleMenuClick:u=>N(u,n.id),handleMenuClose:w,handleViewOrUpdate:I,handleDeleteClick:R})})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{className:"overflow-hidden w-full",children:[e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Deal Size: $",n.deal_size?Y(n.deal_size):"0"]}),e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Meeting:"," ",n.meeting_date?new Date(n.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs truncate",children:n.email||"No email"}),e.jsx("p",{className:"text-xs truncate",children:n.phone_number||"No phone number"})]}),e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("p",{className:"text-xs truncate",children:n.notes})})]})]},n.id)),p&&x&&e.jsx(K,{onClose:C,contactDetails:x})]})}function Rs({borderColour:t}){const s=B(),a=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),l={border:`2px solid  ${t}`,width:"210px",minWidth:"210px",overflow:"hidden"},[p,h]=d.useState(!1),[x,o]=d.useState(null),[j,g]=d.useState(null),[m,c]=d.useState(null),{data:b,error:f,isLoading:v}=V({queryKey:["negotiations",a],queryFn:async()=>(await D.get(`deals/negotiation-contacts/${a}`)).data.data}),_=O({mutationFn:n=>D.delete(`contacts/delete-contact/${a}/${n}`),onSuccess:()=>{s.invalidateQueries(["negotiations",a]),E.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{E.fire("Error","Failed to delete contact","error")}}),y=async n=>{E.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(u=>{u.isConfirmed&&_.mutate(n)})},M=async n=>{try{const u=await D.get(`contacts/single-contact/${a}/${n}`);o(u.data.contact),h(!0)}catch(u){console.error("Error fetching contact details:",u)}},C=()=>{h(!1),o(null)},N=(n,u)=>{g(n.currentTarget),c(u)},w=()=>{g(null),c(null)},I=()=>{m&&(M(m),w())},R=()=>{m&&(y(m),w())};return v?e.jsx(W,{}):f?e.jsx("div",{children:"Error occurred fetching contacts in negotiation stage."}):e.jsxs(e.Fragment,{children:[b.length===0?e.jsx("div",{}):b.map(n=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...l},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:t},children:[e.jsx(H,{profile_url:n.profile_pic,firstName:n.first_name,lastName:n.last_name,color:t}),e.jsxs("div",{className:"flex-grow overflow-hidden",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${n.first_name} ${n.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:n.organization_name||"No company"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{anchorEl:j,handleMenuClick:u=>N(u,n.id),handleMenuClose:w,handleViewOrUpdate:I,handleDeleteClick:R})})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{className:"overflow-hidden w-full",children:[e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Deal Size: $",n.deal_size?Y(n.deal_size):"0"]}),e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Meeting:"," ",n.meeting_date?new Date(n.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs truncate",children:n.email||"No email"}),e.jsx("p",{className:"text-xs truncate",children:n.phone_number||"No phone number"})]}),e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("p",{className:"text-xs truncate",children:n.notes})})]})]},n.id)),p&&x&&e.jsx(K,{onClose:C,contactDetails:x})]})}function Ts({borderColour:t}){const s=B(),a=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),l={border:`2px solid  ${t}`,width:"210px",minWidth:"210px",overflow:"hidden"},[p,h]=d.useState(!1),[x,o]=d.useState(null),[j,g]=d.useState(null),[m,c]=d.useState(null),{data:b,error:f,isLoading:v}=V({queryKey:["deals",a],queryFn:async()=>(await D.get(`deals/deal-contacts/${a}`)).data.data}),_=O({mutationFn:n=>D.delete(`contacts/delete-contact/${a}/${n}`),onSuccess:()=>{s.invalidateQueries(["deals",a]),E.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{E.fire("Error","Failed to delete contact","error")}}),y=async n=>{E.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(u=>{u.isConfirmed&&_.mutate(n)})},M=async n=>{try{const u=await D.get(`contacts/single-contact/${a}/${n}`);o(u.data.contact),h(!0)}catch(u){console.error("Error fetching contact details:",u)}},C=()=>{h(!1),o(null)},N=(n,u)=>{g(n.currentTarget),c(u)},w=()=>{g(null),c(null)},I=()=>{m&&(M(m),w())},R=()=>{m&&(y(m),w())};return v?e.jsx(W,{}):f?e.jsx("div",{children:"Error occurred fetching contacts in deal stage."}):e.jsxs(e.Fragment,{children:[b.length===0?e.jsx("div",{}):b.map(n=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...l},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:t},children:[e.jsx(H,{profile_url:n.profile_pic,firstName:n.first_name,lastName:n.last_name,color:t}),e.jsxs("div",{className:"flex-grow overflow-hidden",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${n.first_name} ${n.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:n.organization_name||"No company"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{anchorEl:j,handleMenuClick:u=>N(u,n.id),handleMenuClose:w,handleViewOrUpdate:I,handleDeleteClick:R})})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{className:"overflow-hidden w-full",children:[e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Deal Size: $",n.deal_size?Y(n.deal_size):"0"]}),e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Meeting:"," ",n.meeting_date?new Date(n.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs truncate",children:n.email||"No email"}),e.jsx("p",{className:"text-xs truncate",children:n.phone_number||"No phone number"})]}),e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("p",{className:"text-xs truncate",children:n.notes})})]})]},n.id)),p&&x&&e.jsx(K,{onClose:C,contactDetails:x})]})}function Bs({borderColour:t}){const s=B(),a=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),l={border:`2px solid  ${t}`,width:"210px",minWidth:"210px",overflow:"hidden"},[p,h]=d.useState(!1),[x,o]=d.useState(null),[j,g]=d.useState(null),[m,c]=d.useState(null),{data:b,error:f,isLoading:v}=V({queryKey:["notAFits",a],queryFn:async()=>(await D.get(`deals/rejection-contacts/${a}`)).data.data}),_=O({mutationFn:n=>D.delete(`contacts/delete-contact/${a}/${n}`),onSuccess:()=>{s.invalidateQueries(["notAFits",a]),E.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{E.fire("Error","Failed to delete contact","error")}}),y=async n=>{E.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(u=>{u.isConfirmed&&_.mutate(n)})},M=async n=>{try{const u=await D.get(`contacts/single-contact/${a}/${n}`);o(u.data.contact),h(!0)}catch(u){console.error("Error fetching contact details:",u)}},C=()=>{h(!1),o(null)},N=(n,u)=>{g(n.currentTarget),c(u)},w=()=>{g(null),c(null)},I=()=>{m&&(M(m),w())},R=()=>{m&&(y(m),w())};return v?e.jsx(W,{}):f?e.jsx("div",{children:"Error occurred fetching contacts in not-a-fit stage."}):e.jsxs(e.Fragment,{children:[b.length===0?e.jsx("div",{}):b.map(n=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40 ",style:{...l},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:t},children:[e.jsx(H,{profile_url:n.profile_pic,firstName:n.first_name,lastName:n.last_name,color:t}),e.jsxs("div",{className:"flex-grow overflow-hidden",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${n.first_name} ${n.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:n.organization_name||"No company"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{anchorEl:j,handleMenuClick:u=>N(u,n.id),handleMenuClose:w,handleViewOrUpdate:I,handleDeleteClick:R})})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{className:"overflow-hidden w-full",children:[e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Deal Size: $",n.deal_size?Y(n.deal_size):"0"]}),e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Meeting:"," ",n.meeting_date?new Date(n.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs truncate",children:n.email||"No email"}),e.jsx("p",{className:"text-xs truncate",children:n.phone_number||"No phone number"})]}),e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("p",{className:"text-xs truncate",children:n.notes})})]})]},n.id)),p&&x&&e.jsx(K,{onClose:C,contactDetails:x})]})}function Os({borderColour:t,titleColors:s}){const a=B(),l=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),p={border:`2px solid  ${t}`,width:"210px",minWidth:"210px",overflow:"hidden"},h=xe("shadow-lg","rounded-2xl","w-full"),x={color:s,minWidth:"210px"},o={backgroundColor:"rgb(255, 255, 255)"},[j,g]=d.useState(!1),[m,c]=d.useState(null),[b,f]=d.useState(null),[v,_]=d.useState(null),{data:y,error:M,isLoading:C}=V({queryKey:["prospects",l],queryFn:async()=>(await D.get(`deals/prospect-contacts/${l}`)).data.data}),N=O({mutationFn:r=>D.delete(`contacts/delete-contact/${l}/${r}`),onSuccess:()=>{a.invalidateQueries(["prospects",l]),E.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{E.fire("Error","Failed to delete contact","error")}}),w=async r=>{E.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(S=>{S.isConfirmed&&N.mutate(r)})},I=async r=>{try{const S=await D.get(`contacts/single-contact/${l}/${r}`);c(S.data.contact),g(!0)}catch(S){console.error("Error fetching contact details:",S)}},R=()=>{g(!1),c(null)},n=(r,S)=>{f(r.currentTarget),_(S)},u=()=>{f(null),_(null)},A=()=>{v&&(I(v),u())},P=()=>{v&&(w(v),u())};return C?e.jsx(W,{}):M?e.jsx("div",{children:"Error occurred fetching contacts in prospect stage."}):e.jsxs(e.Fragment,{children:[y.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:h,style:o,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:x,children:"Prospect"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:y.map(r=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...p},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:t},children:[e.jsx(H,{profile_url:r.profile_pic,firstName:r.first_name,lastName:r.last_name,color:t}),e.jsxs("div",{className:"flex-grow overflow-hidden",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${r.first_name} ${r.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:r.organization_name||"No company"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{anchorEl:b,handleMenuClick:S=>n(S,r.id),handleMenuClose:u,handleViewOrUpdate:A,handleDeleteClick:P})})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{className:"overflow-hidden w-full",children:[e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Deal Size: $",r.deal_size?Y(r.deal_size):"0"]}),e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Meeting:"," ",r.meeting_date?new Date(r.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs truncate",children:r.email||"No email"}),e.jsx("p",{className:"text-xs truncate",children:r.phone_number||"No phone number"})]}),e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("p",{className:"text-xs truncate",children:r.notes})})]})]},r.id))})]}):null,j&&m&&e.jsx(K,{onClose:R,contactDetails:m})]})}function Ls({borderColour:t,titleColors:s}){const a=B(),l=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),p={border:`2px solid  ${t}`,width:"210px",minWidth:"210px",overflow:"hidden"},h=xe("shadow-lg","rounded-2xl","w-full"),x={color:s,minWidth:"210px"},o={backgroundColor:"rgb(255, 255, 255)"},[j,g]=d.useState(!1),[m,c]=d.useState(null),[b,f]=d.useState(null),[v,_]=d.useState(null),{data:y,error:M,isLoading:C}=V({queryKey:["OnGoingReviews",l],queryFn:async()=>(await D.get(`deals/review-contacts/${l}`)).data.data}),N=O({mutationFn:r=>D.delete(`contacts/delete-contact/${l}/${r}`),onSuccess:()=>{a.invalidateQueries(["OnGoingReviews",l]),E.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{E.fire("Error","Failed to delete contact","error")}}),w=async r=>{E.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(S=>{S.isConfirmed&&N.mutate(r)})},I=async r=>{try{const S=await D.get(`contacts/single-contact/${l}/${r}`);c(S.data.contact),g(!0)}catch(S){console.error("Error fetching contact details:",S)}},R=()=>{g(!1),c(null)},n=(r,S)=>{f(r.currentTarget),_(S)},u=()=>{f(null),_(null)},A=()=>{v&&(I(v),u())},P=()=>{v&&(w(v),u())};return C?e.jsx(W,{}):M?e.jsx("div",{children:"Error occurred fetching contacts in review stage."}):e.jsxs(e.Fragment,{children:[y.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:h,style:o,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:x,children:"Review"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:y.map(r=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...p},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:t},children:[e.jsx(H,{profile_url:r.profile_pic,firstName:r.first_name,lastName:r.last_name,color:t}),e.jsxs("div",{className:"flex-grow overflow-hidden",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${r.first_name} ${r.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:r.organization_name||"No company"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{anchorEl:b,handleMenuClick:S=>n(S,r.id),handleMenuClose:u,handleViewOrUpdate:A,handleDeleteClick:P})})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{className:"overflow-hidden w-full",children:[e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Deal Size: $",r.deal_size?Y(r.deal_size):"0"]}),e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Meeting:"," ",r.meeting_date?new Date(r.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs truncate",children:r.email||"No email"}),e.jsx("p",{className:"text-xs",children:r.phone_number||"No phone number"})]}),e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("p",{className:"text-xs truncate",children:r.notes})})]})]},r.id))})]}):null,j&&m&&e.jsx(K,{onClose:R,contactDetails:m})]})}function Us({borderColour:t,titleColors:s}){const a=B(),l=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),p={border:`2px solid  ${t}`,width:"210px",minWidth:"210px",overflow:"hidden"},h=xe("shadow-lg","rounded-2xl","w-full"),x={color:s,minWidth:"210px"},o={backgroundColor:"rgb(255, 255, 255)"},[j,g]=d.useState(!1),[m,c]=d.useState(null),[b,f]=d.useState(null),[v,_]=d.useState(null),{data:y,error:M,isLoading:C}=V({queryKey:["partners",l],queryFn:async()=>(await D.get(`deals/partner-contacts/${l}`)).data.data}),N=O({mutationFn:r=>D.delete(`contacts/delete-contact/${l}/${r}`),onSuccess:()=>{a.invalidateQueries(["partners",l]),E.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{E.fire("Error","Failed to delete contact","error")}}),w=async r=>{E.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(S=>{S.isConfirmed&&N.mutate(r)})},I=async r=>{try{const S=await D.get(`contacts/single-contact/${l}/${r}`);c(S.data.contact),g(!0)}catch(S){console.error("Error fetching contact details:",S)}},R=()=>{g(!1),c(null)},n=(r,S)=>{f(r.currentTarget),_(S)},u=()=>{f(null),_(null)},A=()=>{v&&(I(v),u())},P=()=>{v&&(w(v),u())};return C?e.jsx(W,{}):M?e.jsx("div",{children:"Error occurred fetching contacts in partners stage."}):e.jsxs(e.Fragment,{children:[y.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:h,style:o,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:x,children:"Partner"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:y.map(r=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...p},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:t},children:[e.jsx(H,{profile_url:r.profile_pic,firstName:r.first_name,lastName:r.last_name,color:t}),e.jsxs("div",{className:"flex-grow overflow-hidden",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${r.first_name} ${r.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:r.organization_name||"No company"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{anchorEl:b,handleMenuClick:S=>n(S,r.id),handleMenuClose:u,handleViewOrUpdate:A,handleDeleteClick:P})})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{className:"overflow-hidden w-full",children:[e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Deal Size: $",r.deal_size?Y(r.deal_size):"0"]}),e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Meeting:"," ",r.meeting_date?new Date(r.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs truncate",children:r.email||"No email"}),e.jsx("p",{className:"text-xs truncate",children:r.phone_number||"No phone number"})]}),e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("p",{className:"text-xs truncate",children:r.notes})})]})]},r.id))})]}):null,j&&m&&e.jsx(K,{onClose:R,contactDetails:m})]})}function qs({borderColour:t,titleColors:s}){const a=B(),l=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),p={border:`2px solid  ${t}`,width:"210px",minWidth:"210px",overflow:"hidden"},h=xe("shadow-lg","rounded-2xl","w-full"),x={color:s,minWidth:"210px"},o={backgroundColor:"rgb(255, 255, 255)"},[j,g]=d.useState(!1),[m,c]=d.useState(null),[b,f]=d.useState(null),[v,_]=d.useState(null),{data:y,error:M,isLoading:C}=V({queryKey:["termSheets",l],queryFn:async()=>(await D.get(`deals/offer-contacts/${l}`)).data.data}),N=O({mutationFn:r=>D.delete(`contacts/delete-contact/${l}/${r}`),onSuccess:()=>{a.invalidateQueries(["termSheets",l]),E.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{E.fire("Error","Failed to delete contact","error")}}),w=async r=>{E.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(S=>{S.isConfirmed&&N.mutate(r)})},I=async r=>{try{const S=await D.get(`contacts/single-contact/${l}/${r}`);c(S.data.contact),g(!0)}catch(S){console.error("Error fetching contact details:",S)}},R=()=>{g(!1),c(null)},n=(r,S)=>{f(r.currentTarget),_(S)},u=()=>{f(null),_(null)},A=()=>{v&&(I(v),u())},P=()=>{v&&(w(v),u())};return C?e.jsx(W,{}):M?e.jsx("div",{children:"Error occurred fetching contacts in termsheet stage."}):e.jsxs(e.Fragment,{children:[y.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:h,style:o,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:x,children:"Term Sheet"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:y.map(r=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...p},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:t},children:[e.jsx(H,{profile_url:r.profile_pic,firstName:r.first_name,lastName:r.last_name,color:t}),e.jsxs("div",{className:"flex-grow overflow-hidden",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${r.first_name} ${r.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:r.organization_name||"No company"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{anchorEl:b,handleMenuClick:S=>n(S,r.id),handleMenuClose:u,handleViewOrUpdate:A,handleDeleteClick:P})})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{className:"overflow-hidden w-full",children:[e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Deal Size: $",r.deal_size?Y(r.deal_size):"0"]}),e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Meeting:"," ",r.meeting_date?new Date(r.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs truncate",children:r.email||"No email"}),e.jsx("p",{className:"text-xs truncate",children:r.phone_number||"No phone number"})]}),e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("p",{className:"text-xs truncate",children:r.notes})})]})]},r.id))})]}):null,j&&m&&e.jsx(K,{onClose:R,contactDetails:m})]})}function Ys({borderColour:t,titleColors:s}){const a=B(),l=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),p={border:`2px solid  ${t}`,width:"210px",minWidth:"210px",overflow:"hidden"},h=xe("shadow-lg","rounded-2xl","w-full"),x={color:s,minWidth:"210px"},o={backgroundColor:"rgb(255, 255, 255)"},[j,g]=d.useState(!1),[m,c]=d.useState(null),[b,f]=d.useState(null),[v,_]=d.useState(null),{data:y,error:M,isLoading:C}=V({queryKey:["followUps",l],queryFn:async()=>(await D.get(`deals/followup-contacts/${l}`)).data.data}),N=O({mutationFn:r=>D.delete(`contacts/delete-contact/${l}/${r}`),onSuccess:()=>{a.invalidateQueries(["followUps",l]),E.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{E.fire("Error","Failed to delete contact","error")}}),w=async r=>{E.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(S=>{S.isConfirmed&&N.mutate(r)})},I=async r=>{try{const S=await D.get(`contacts/single-contact/${l}/${r}`);c(S.data.contact),g(!0)}catch(S){console.error("Error fetching contact details:",S)}},R=()=>{g(!1),c(null)},n=(r,S)=>{f(r.currentTarget),_(S)},u=()=>{f(null),_(null)},A=()=>{v&&(I(v),u())},P=()=>{v&&(w(v),u())};return C?e.jsx(W,{}):M?e.jsx("div",{children:"Error occurred fetching contacts in follow-up stage."}):e.jsxs(e.Fragment,{children:[y.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:h,style:o,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:x,children:"Follow-up"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:y.map(r=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...p},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:t},children:[e.jsx(H,{profile_url:r.profile_pic,firstName:r.first_name,lastName:r.last_name,color:t}),e.jsxs("div",{className:"flex-grow overflow-hidden",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${r.first_name} ${r.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:r.organization_name||"No company"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{anchorEl:b,handleMenuClick:S=>n(S,r.id),handleMenuClose:u,handleViewOrUpdate:A,handleDeleteClick:P})})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{className:"overflow-hidden w-full",children:[e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Deal Size: $",r.deal_size?Y(r.deal_size):"0"]}),e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Meeting:"," ",r.meeting_date?new Date(r.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs truncate",children:r.email||"No email"}),e.jsx("p",{className:"text-xs truncate",children:r.phone_number||"No phone number"})]}),e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("p",{className:"text-xs truncate",children:r.notes})})]})]},r.id))})]}):null,j&&m&&e.jsx(K,{onClose:R,contactDetails:m})]})}const As=()=>{const t=e.jsx($s,{borderColour:"rgb(0, 0, 139)"}),s=e.jsx(Fs,{borderColour:"#87CEEB"}),a=e.jsx(zs,{borderColour:"#08a5aa"}),l=e.jsx(Rs,{borderColour:"orange"}),p=e.jsx(Ts,{borderColour:"green"}),h=e.jsx(Bs,{borderColour:"#FF0000"});return e.jsxs("div",{className:"flex gap-2 pb-10 w-full overflow-y-auto overflow-x-auto",children:[e.jsx(ie,{titles:"Research",titleColors:"rgb(0, 0, 139)",contents:t}),e.jsx(Os,{borderColour:"rgb(115, 147, 179)",titleColors:"rgb(115, 147, 179)"}),e.jsx(ie,{titles:"Contacted",titleColors:"#87CEEB",contents:s}),e.jsx(ie,{titles:"Pitch",titleColors:"#08a5aa",contents:a}),e.jsx(Ls,{borderColour:"#FDDC5C",titleColors:"#FDDC5C"}),e.jsx(Us,{borderColour:"#E67451",titleColors:"#E67451"}),e.jsx(qs,{titleColors:"#000000",borderColour:"#000000"}),e.jsx(ie,{titles:"Negotiation",titleColors:"orange",contents:l}),e.jsx(ie,{titles:"Deal",titleColors:"green",contents:p}),e.jsx(Ys,{borderColour:"#D3D3D3",titleColors:"#D3D3D3"}),e.jsx(ie,{titles:"Not a Fit",titleColors:"#FF0000",contents:h})]})};function Qs({onClose:t}){const s=d.useRef(),a=c=>{s.current===c.target&&t()},[l,p]=d.useState(""),[h,x]=d.useState({firstName:"",lastName:"",moveContact:""}),o=B(),j=O({mutationFn:async c=>{const b=localStorage.getItem("currentDealId");if(!b)throw new Error("Deal ID not found in localStorage");return await D.patch(`/deals/change-stage/${b}`,c)},onSuccess:()=>{o.invalidateQueries(["contacts","deals","followUps","negotiations","notAFits","OnGoingReviews","partners","pitches","prospects","researches","termSheets"]),x({firstName:"",lastName:"",moveContact:""}),t(),ne.success("Contact moved successfully.")},onError:()=>{p("Something went wrong. Please try again.")}}),g=c=>{if(c&&c.target){const{name:b,value:f}=c.target;x(v=>({...v,[b]:f}))}},m=c=>{c.preventDefault();const b={first_name:h.firstName,last_name:h.lastName,stage:h.moveContact};j.mutate(b)};return e.jsx("div",{ref:s,onClick:a,className:" fixed z-50 inset-0 bg-dark-blue bg-opacity-30 backdrop-blur-sm flex justify-center overflow-y-auto h-screen",children:e.jsx("div",{className:" mt-10 flex flex-col",children:e.jsxs("div",{className:" bg-white rounded-xl px-20 py-10 flex flex-col gap-5 items-center mx-4",children:[e.jsx("button",{onClick:t,className:" place-self-end text-red-600 hover:text-dark-blue",children:e.jsx(Ie,{size:30})}),e.jsx("h1",{className:" text-dark-blue text-3xl font-extrabold mb-5",children:"Move contacts within your pipeline"}),e.jsxs("form",{action:"",onSubmit:m,className:" flex flex-col gap-5",children:[j.isError&&e.jsx("p",{className:" text-[#ff0000] font-semibold",children:l}),e.jsxs("div",{className:"flex flex-row items-center justify-center flex-wrap gap-5",children:[e.jsx(Se,{type:"text",title:"First Name*",placeholder:"Sundi",id:"firstName",value:h.firstName,onChange:g}),e.jsx(Se,{type:"text",title:"Last Name*",placeholder:"Keita",id:"lastName",value:h.lastName,onChange:g})]}),e.jsx("div",{className:"flex flex-row items-center justify-center flex-wrap gap-5",children:e.jsx(Ye,{label:"Move Contact To",id:"moveContact",value:h.moveContact,onChange:g})}),e.jsx("div",{className:" mt-8 w-full flex items-center justify-center",children:e.jsx(pe,{type:"submit",disabled:j.isLoading,text:"Move Contact"})})]})]})})})}function Ps({onClose:t,dealDetail:s}){const[a,l]=d.useState(!1),p=d.useRef(),h=JSON.parse(localStorage.getItem("user")),x=c=>{p.current===c.target&&t()},o=`https://crm.mansastars.com${window.location.pathname}`,j=`Hi, ${h.first_name} ${h.last_name} has invited you to collaborate on the Mansa CRM Project titled "${s.deal_name}". Mansa’s CRM helps you manage your leads, target prospects, dealflow and manage follow-ups efficiently and affordably. Click the link below to accept the invitation and get started!`,g="Check out this dashboard",m=()=>{navigator.clipboard.writeText(o),l(!0),setTimeout(()=>{l(!1)},2e3)};return e.jsx("div",{ref:p,onClick:x,className:" fixed z-50 inset-0 bg-dark-blue bg-opacity-30 backdrop-blur-sm flex justify-center overflow-y-auto h-screen",children:e.jsx("div",{className:" mt-10 flex flex-col",children:e.jsxs("div",{className:" bg-white rounded-xl px-10 py-10 flex flex-col gap-5 items-center mx-4",children:[e.jsx("button",{onClick:t,className:" place-self-end text-red-600 hover:text-dark-blue",children:e.jsx(Ie,{size:30})}),e.jsx("h1",{className:" text-dark-blue text-3xl font-extrabold mb-5",children:"Share Dashboard"}),e.jsxs("div",{className:" flex max-md:flex-wrap items-center justify-center gap-5 text-dark-blue font-semibold",children:[e.jsxs("div",{className:" flex flex-col gap-5 items-center justify-center",children:[e.jsx(qt,{url:o,subject:g,body:j,children:e.jsx(Yt,{size:40,round:!0})}),e.jsx("p",{children:"Email"})]}),e.jsxs("div",{className:" flex flex-col gap-5 items-center justify-center",children:[e.jsx(At,{url:o,title:j,separator:" ",children:e.jsx(Qt,{size:40,round:!0})}),e.jsx("p",{children:"WhatsApp"})]}),e.jsxs("div",{className:" flex flex-col gap-5 items-center justify-center",children:[e.jsx(Pt,{url:o,title:j,children:e.jsx(Vt,{size:40,round:!0})}),e.jsx("p",{children:"X"})]}),e.jsxs("div",{className:" flex flex-col gap-5 items-center justify-center",children:[e.jsx(Wt,{url:o,title:j,children:e.jsx(Kt,{size:40,round:!0})}),e.jsx("p",{children:"Facebook"})]}),e.jsxs("div",{className:" flex flex-col gap-5 items-center justify-center",children:[e.jsx(Ht,{url:o,title:j,children:e.jsx(Jt,{size:40,round:!0})}),e.jsx("p",{children:"Telegram"})]})]}),e.jsxs("div",{className:"flex flex-col gap-5 mt-3 text-dark-blue w-full",children:[e.jsx("p",{className:" text-xl font-bold",children:"Page Link"}),e.jsxs("div",{onClick:m,className:" flex items-center justify-between gap-10 py-3 px-5 bg-gray-200 rounded-lg w-full cursor-pointer",children:[e.jsx("p",{className:" text-dark-blue font-semibold",children:o}),e.jsx(ms,{size:32,className:" text-mansa-blue hover:text-dark-blue"})]}),a&&e.jsx("p",{className:" text-mansa-blue text-base",children:"Link copied to clipboard!"})]})]})})})}function Vs({dealDetail:t}){const[s,a]=d.useState(!1);return e.jsxs("div",{children:[e.jsxs("button",{className:`
        flex gap-5 border-4 border-dark-blue  active:bg-dark-blue active:text-white
        text-dark-blue px-5 max-md:px-2 py-2 max-md:py-1 rounded-xl transition-all duration-200 shadow
        hover:bg-dark-blue hover:text-white
        `,onClick:()=>a(!0),children:[e.jsx(fs,{}),e.jsx("p",{className:" font-bold text-lg max-md:hidden",children:"Share"})]}),s&&e.jsx(Ps,{onClose:()=>a(!1),dealDetail:t})]})}function da(){Ct();const[t,s]=d.useState(""),[a,l]=d.useState([]),[p,h]=d.useState(null);St();const[x,o]=d.useState(!1),[j,g]=d.useState(!1),[m,c]=d.useState([]),b=window.location.pathname.split("/").at(-1),[f,v]=d.useState("");localStorage.setItem("currentDealId",b);const _=localStorage.getItem("currentDealId"),y=JSON.parse(localStorage.getItem("user"));d.useEffect(()=>{(async()=>{const w=await Xt(t);l(w)})()},[t]),d.useEffect(()=>{(async()=>{if(_)try{const w=await D.get(`deals/single-deal/${_}`);v(w.data.deal.owner_id);const I=w.data.deal;c(I)}catch(w){console.error("Error fetching a single deal:",w)}else console.error("Current deal ID not found in localStorage")})()},[_]);const M=N=>{h(N)},C=()=>{h(null),s("")};return e.jsxs("div",{className:"",children:[e.jsx("div",{className:" sticky top-0 z-50",children:e.jsx(Ut,{})}),e.jsxs("div",{className:" flex flex-col gap-2 w-full mr-2 h-screen overflow-auto pt-2 px-3",children:[y&&y.id===f&&e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 w-full pr-4",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(_t,{value:t,onChange:N=>s(N.target.value),placeHolder:"Search Contact Database"}),t&&e.jsx("ul",{className:"absolute z-50 min-w-80 p-2 bg-light-grey shadow-lg rounded-lg overflow-y-auto",children:a.map(N=>e.jsxs("li",{className:"hover:bg-dark-blue hover:text-white p-2 flex items-center",title:"Click to add to this dashboard",onClick:()=>M(N),children:[N.profile_pic?e.jsx("img",{src:N.profile_pic,className:"h-12 w-12 rounded-full"}):e.jsx("div",{className:"h-12 w-12 rounded-full border-2 border-white bg-dark-blue text-blue items-center flex justify-center",children:e.jsxs("h3",{className:"text-white",children:[N.first_name[0].toUpperCase()," ",N.last_name[0].toUpperCase()]})}),e.jsxs("div",{className:"px-2",children:[e.jsxs("h3",{children:[N.first_name," ",N.last_name]}),e.jsx("p",{children:N.email})]})]},N.id))})]}),e.jsx("div",{onClick:()=>o(!0),className:"flex",children:e.jsx(pe,{text:"Add a New Contact"})}),e.jsx("div",{onClick:()=>g(!0),className:"flex",children:e.jsx(pe,{text:"Move a Contact"})})]}),e.jsx("div",{className:"",children:e.jsx(Vs,{dealDetail:m})})]}),e.jsxs("div",{className:"flex flex-row max-md:flex-col w-full items-center",children:[e.jsx("div",{className:" bg-dark-blue text-white font-bold text-2xl max-md:text-base py-6 max-md:py-2 rounded-l-xl max-md:rounded-xl w-[40%] max-md:w-full text-center",children:m&&m.deal_name&&m.deal_name.length>15?`${m.deal_name.substring(0,15)}...`:m&&m.deal_name}),e.jsxs("div",{className:" flex flex-col w-[60%] max-md:w-full",children:[e.jsxs("div",{className:" bg-mansa-blue text-white py-2 text-center rounded-tr-xl max-md:rounded-t-xl",children:["Deal Size Amount:"," ",e.jsxs("span",{className:" font-semibold",children:["$",m.deal_size?Y(m.deal_size):"0"]})]}),e.jsxs("div",{className:" flex flex-row  ",children:[e.jsxs("div",{className:" bg-[orange] text-white w-1/2 max-md:w-full py-2 pl-5 max-md:rounded-bl-xl",children:["In-Negotiation Value:"," ",e.jsxs("span",{className:" font-semibold",children:["$",m.negotiation_value?Y(m.negotiation_value):"0"]})]}),e.jsxs("div",{className:" bg-[green] text-white w-1/2 max-md:w-full py-2 pl-5 rounded-br-xl ",children:["Deal Signed Value:"," ",e.jsxs("span",{className:" font-semibold",children:["$",m.signed_value?Y(m.signed_value):"0"]})]})]})]})]}),e.jsx(As,{})]}),x&&e.jsx(lt,{onClose:()=>o(!1),data:{}}),j&&e.jsx(Qs,{onClose:()=>g(!1)}),p&&e.jsx(lt,{onClose:C,data:p})]})}export{da as default};
