var Pe=t=>{throw TypeError(t)};var $e=(t,s,a)=>s.has(t)||Pe("Cannot "+a);var c=(t,s,a)=>($e(t,s,"read from private field"),a?a.call(t):s.get(t)),T=(t,s,a)=>s.has(t)?Pe("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,a),F=(t,s,a,l)=>($e(t,s,"write to private field"),l?l.call(t,a):s.set(t,a),a),z=(t,s,a)=>($e(t,s,"access private method"),a);import{S as it,r as Z,s as Ce,a as we,n as gt,i as Ve,b as We,t as jt,f as bt,c as vt,d as Ke,e as Ee,h as He,g as yt,j as h,u as B,k as e,l as Je,m as D,o as _,B as ne,$ as wt,p as Nt,q as Ct}from"./index-DjDLhsc1.js";import{F as A,a as Se,D as Ye,b as ct,c as dt,B as pe}from"./Reusables-BcCF7SVq.js";import{g as Me,a as St,s as _t,r as Dt,_ as ge,b as ye,u as Et,c as Mt,d as It,e as kt,f as Ie,i as $t}from"./mergeSlotProps-asDb3m-M.js";import{A as je}from"./Avatar-BG115GZA.js";import{U as ut}from"./user-ByfzJVH-.js";import{B as Ft,T as _e,a as De}from"./ThemeProvider-BoFI9cp0.js";import{X as ke}from"./x-sHKT79xp.js";import{c as xe}from"./index-DhQdIaQK.js";import{r as zt,I as Rt}from"./createSvgIcon-BYGETxdL.js";import{L as Xe,M as Tt}from"./Menu-CngbHIzk.js";import{u as Bt}from"./index-CTbmEJIh.js";import{F as Ot}from"./FreeTrialBanner-CHeWRH8n.js";import{E as Lt,a as Ut,W as qt,b as Yt,T as Qt,c as At,F as Pt,d as Vt,e as Wt,f as Kt}from"./index-S0s42cRI.js";import{c as ht}from"./createLucideIcon-DsjihXgd.js";import"./tag-B8ShL8se.js";var U,E,be,L,le,ce,X,ve,de,ue,re,oe,te,he,k,fe,Fe,ze,Re,Te,Be,Oe,Le,xt,rt,Ht=(rt=class extends it{constructor(s,a){super();T(this,k);T(this,U);T(this,E);T(this,be);T(this,L);T(this,le);T(this,ce);T(this,X);T(this,ve);T(this,de);T(this,ue);T(this,re);T(this,oe);T(this,te);T(this,he,new Set);this.options=a,F(this,U,s),F(this,X,null),this.bindMethods(),this.setOptions(a)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(c(this,E).addObserver(this),Ze(c(this,E),this.options)?z(this,k,fe).call(this):this.updateResult(),z(this,k,Te).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ue(c(this,E),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ue(c(this,E),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,z(this,k,Be).call(this),z(this,k,Oe).call(this),c(this,E).removeObserver(this)}setOptions(s,a){const l=this.options,d=c(this,E);if(this.options=c(this,U).defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Z(this.options.enabled,c(this,E))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");z(this,k,Le).call(this),c(this,E).setOptions(this.options),l._defaulted&&!Ce(this.options,l)&&c(this,U).getQueryCache().notify({type:"observerOptionsUpdated",query:c(this,E),observer:this});const x=this.hasListeners();x&&Ge(c(this,E),d,this.options,l)&&z(this,k,fe).call(this),this.updateResult(a),x&&(c(this,E)!==d||Z(this.options.enabled,c(this,E))!==Z(l.enabled,c(this,E))||we(this.options.staleTime,c(this,E))!==we(l.staleTime,c(this,E)))&&z(this,k,Fe).call(this);const o=z(this,k,ze).call(this);x&&(c(this,E)!==d||Z(this.options.enabled,c(this,E))!==Z(l.enabled,c(this,E))||o!==c(this,te))&&z(this,k,Re).call(this,o)}getOptimisticResult(s){const a=c(this,U).getQueryCache().build(c(this,U),s),l=this.createResult(a,s);return Xt(this,l)&&(F(this,L,l),F(this,ce,this.options),F(this,le,c(this,E).state)),l}getCurrentResult(){return c(this,L)}trackResult(s,a){const l={};return Object.keys(s).forEach(d=>{Object.defineProperty(l,d,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(d),a==null||a(d),s[d])})}),l}trackProp(s){c(this,he).add(s)}getCurrentQuery(){return c(this,E)}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const a=c(this,U).defaultQueryOptions(s),l=c(this,U).getQueryCache().build(c(this,U),a);return l.isFetchingOptimistic=!0,l.fetch().then(()=>this.createResult(l,a))}fetch(s){return z(this,k,fe).call(this,{...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),c(this,L)))}createResult(s,a){var n;const l=c(this,E),d=this.options,x=c(this,L),o=c(this,le),m=c(this,ce),j=s!==l?s.state:c(this,be),{state:p}=s;let i={...p},g=!1,f;if(a._optimisticResults){const u=this.hasListeners(),Q=!u&&Ze(s,a),P=u&&Ge(s,l,a,d);(Q||P)&&(i={...i,...vt(p.data,s.options)}),a._optimisticResults==="isRestoring"&&(i.fetchStatus="idle")}let{error:v,errorUpdatedAt:w,status:C}=i;if(a.select&&i.data!==void 0)if(x&&i.data===(o==null?void 0:o.data)&&a.select===c(this,ve))f=c(this,de);else try{F(this,ve,a.select),f=a.select(i.data),f=Ke(x==null?void 0:x.data,f,a),F(this,de,f),F(this,X,null)}catch(u){F(this,X,u)}else f=i.data;if(a.placeholderData!==void 0&&f===void 0&&C==="pending"){let u;if(x!=null&&x.isPlaceholderData&&a.placeholderData===(m==null?void 0:m.placeholderData))u=x.data;else if(u=typeof a.placeholderData=="function"?a.placeholderData((n=c(this,ue))==null?void 0:n.state.data,c(this,ue)):a.placeholderData,a.select&&u!==void 0)try{u=a.select(u),F(this,X,null)}catch(Q){F(this,X,Q)}u!==void 0&&(C="success",f=Ke(x==null?void 0:x.data,u,a),g=!0)}c(this,X)&&(v=c(this,X),f=c(this,de),w=Date.now(),C="error");const M=i.fetchStatus==="fetching",N=C==="pending",I=C==="error",S=N&&M,$=f!==void 0;return{status:C,fetchStatus:i.fetchStatus,isPending:N,isSuccess:C==="success",isError:I,isInitialLoading:S,isLoading:S,data:f,dataUpdatedAt:i.dataUpdatedAt,error:v,errorUpdatedAt:w,failureCount:i.fetchFailureCount,failureReason:i.fetchFailureReason,errorUpdateCount:i.errorUpdateCount,isFetched:i.dataUpdateCount>0||i.errorUpdateCount>0,isFetchedAfterMount:i.dataUpdateCount>j.dataUpdateCount||i.errorUpdateCount>j.errorUpdateCount,isFetching:M,isRefetching:M&&!N,isLoadingError:I&&!$,isPaused:i.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:I&&$,isStale:Qe(s,a),refetch:this.refetch}}updateResult(s){const a=c(this,L),l=this.createResult(c(this,E),this.options);if(F(this,le,c(this,E).state),F(this,ce,this.options),c(this,le).data!==void 0&&F(this,ue,c(this,E)),Ce(l,a))return;F(this,L,l);const d={},x=()=>{if(!a)return!0;const{notifyOnChangeProps:o}=this.options,m=typeof o=="function"?o():o;if(m==="all"||!m&&!c(this,he).size)return!0;const b=new Set(m??c(this,he));return this.options.throwOnError&&b.add("error"),Object.keys(c(this,L)).some(j=>{const p=j;return c(this,L)[p]!==a[p]&&b.has(p)})};(s==null?void 0:s.listeners)!==!1&&x()&&(d.listeners=!0),z(this,k,xt).call(this,{...d,...s})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&z(this,k,Te).call(this)}},U=new WeakMap,E=new WeakMap,be=new WeakMap,L=new WeakMap,le=new WeakMap,ce=new WeakMap,X=new WeakMap,ve=new WeakMap,de=new WeakMap,ue=new WeakMap,re=new WeakMap,oe=new WeakMap,te=new WeakMap,he=new WeakMap,k=new WeakSet,fe=function(s){z(this,k,Le).call(this);let a=c(this,E).fetch(this.options,s);return s!=null&&s.throwOnError||(a=a.catch(gt)),a},Fe=function(){z(this,k,Be).call(this);const s=we(this.options.staleTime,c(this,E));if(Ve||c(this,L).isStale||!We(s))return;const l=jt(c(this,L).dataUpdatedAt,s)+1;F(this,re,setTimeout(()=>{c(this,L).isStale||this.updateResult()},l))},ze=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(c(this,E)):this.options.refetchInterval)??!1},Re=function(s){z(this,k,Oe).call(this),F(this,te,s),!(Ve||Z(this.options.enabled,c(this,E))===!1||!We(c(this,te))||c(this,te)===0)&&F(this,oe,setInterval(()=>{(this.options.refetchIntervalInBackground||bt.isFocused())&&z(this,k,fe).call(this)},c(this,te)))},Te=function(){z(this,k,Fe).call(this),z(this,k,Re).call(this,z(this,k,ze).call(this))},Be=function(){c(this,re)&&(clearTimeout(c(this,re)),F(this,re,void 0))},Oe=function(){c(this,oe)&&(clearInterval(c(this,oe)),F(this,oe,void 0))},Le=function(){const s=c(this,U).getQueryCache().build(c(this,U),this.options);if(s===c(this,E))return;const a=c(this,E);F(this,E,s),F(this,be,s.state),this.hasListeners()&&(a==null||a.removeObserver(this),s.addObserver(this))},xt=function(s){Ee.batch(()=>{s.listeners&&this.listeners.forEach(a=>{a(c(this,L))}),c(this,U).getQueryCache().notify({query:c(this,E),type:"observerResultsUpdated"})})},rt);function Jt(t,s){return Z(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function Ze(t,s){return Jt(t,s)||t.state.data!==void 0&&Ue(t,s,s.refetchOnMount)}function Ue(t,s,a){if(Z(s.enabled,t)!==!1){const l=typeof a=="function"?a(t):a;return l==="always"||l!==!1&&Qe(t,s)}return!1}function Ge(t,s,a,l){return(t!==s||Z(l.enabled,t)===!1)&&(!a.suspense||t.state.status!=="error")&&Qe(t,a)}function Qe(t,s){return Z(s.enabled,t)!==!1&&t.isStaleByTime(we(s.staleTime,t))}function Xt(t,s){return!Ce(t.getCurrentResult(),s)}var se,ae,q,G,ee,Ne,qe,ot,Zt=(ot=class extends it{constructor(s,a){super();T(this,ee);T(this,se);T(this,ae);T(this,q);T(this,G);F(this,se,s),this.setOptions(a),this.bindMethods(),z(this,ee,Ne).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){var l;const a=this.options;this.options=c(this,se).defaultMutationOptions(s),Ce(this.options,a)||c(this,se).getMutationCache().notify({type:"observerOptionsUpdated",mutation:c(this,q),observer:this}),a!=null&&a.mutationKey&&this.options.mutationKey&&He(a.mutationKey)!==He(this.options.mutationKey)?this.reset():((l=c(this,q))==null?void 0:l.state.status)==="pending"&&c(this,q).setOptions(this.options)}onUnsubscribe(){var s;this.hasListeners()||(s=c(this,q))==null||s.removeObserver(this)}onMutationUpdate(s){z(this,ee,Ne).call(this),z(this,ee,qe).call(this,s)}getCurrentResult(){return c(this,ae)}reset(){var s;(s=c(this,q))==null||s.removeObserver(this),F(this,q,void 0),z(this,ee,Ne).call(this),z(this,ee,qe).call(this)}mutate(s,a){var l;return F(this,G,a),(l=c(this,q))==null||l.removeObserver(this),F(this,q,c(this,se).getMutationCache().build(c(this,se),this.options)),c(this,q).addObserver(this),c(this,q).execute(s)}},se=new WeakMap,ae=new WeakMap,q=new WeakMap,G=new WeakMap,ee=new WeakSet,Ne=function(){var a;const s=((a=c(this,q))==null?void 0:a.state)??yt();F(this,ae,{...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset})},qe=function(s){Ee.batch(()=>{var a,l,d,x,o,m,b,j;if(c(this,G)&&this.hasListeners()){const p=c(this,ae).variables,i=c(this,ae).context;(s==null?void 0:s.type)==="success"?((l=(a=c(this,G)).onSuccess)==null||l.call(a,s.data,p,i),(x=(d=c(this,G)).onSettled)==null||x.call(d,s.data,null,p,i)):(s==null?void 0:s.type)==="error"&&((m=(o=c(this,G)).onError)==null||m.call(o,s.error,p,i),(j=(b=c(this,G)).onSettled)==null||j.call(b,void 0,s.error,p,i))}this.listeners.forEach(p=>{p(c(this,ae))})})},ot),mt=h.createContext(!1),Gt=()=>h.useContext(mt);mt.Provider;function es(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var ts=h.createContext(es()),ss=()=>h.useContext(ts);function ft(t,s){return typeof t=="function"?t(...s):!!t}function as(){}var ns=(t,s)=>{(t.suspense||t.throwOnError)&&(s.isReset()||(t.retryOnMount=!1))},ls=t=>{h.useEffect(()=>{t.clearReset()},[t])},rs=({result:t,errorResetBoundary:s,throwOnError:a,query:l})=>t.isError&&!s.isReset()&&!t.isFetching&&l&&ft(a,[t.error,l]),os=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},is=(t,s)=>(t==null?void 0:t.suspense)&&s.isPending,cs=(t,s,a)=>s.fetchOptimistic(t).catch(()=>{a.clearReset()});function ds(t,s,a){var j,p,i,g;const l=B(),d=Gt(),x=ss(),o=l.defaultQueryOptions(t);(p=(j=l.getDefaultOptions().queries)==null?void 0:j._experimental_beforeQuery)==null||p.call(j,o),o._optimisticResults=d?"isRestoring":"optimistic",os(o),ns(o,x),ls(x);const[m]=h.useState(()=>new s(l,o)),b=m.getOptimisticResult(o);if(h.useSyncExternalStore(h.useCallback(f=>{const v=d?()=>{}:m.subscribe(Ee.batchCalls(f));return m.updateResult(),v},[m,d]),()=>m.getCurrentResult(),()=>m.getCurrentResult()),h.useEffect(()=>{m.setOptions(o,{listeners:!1})},[o,m]),is(o,b))throw cs(o,m,x);if(rs({result:b,errorResetBoundary:x,throwOnError:o.throwOnError,query:l.getQueryCache().get(o.queryHash)}))throw b.error;return(g=(i=l.getDefaultOptions().queries)==null?void 0:i._experimental_afterQuery)==null||g.call(i,o,b),o.notifyOnChangeProps?b:m.trackResult(b)}function V(t,s){return ds(t,Ht)}function O(t,s){const a=B(),[l]=h.useState(()=>new Zt(a,t));h.useEffect(()=>{l.setOptions(t)},[l,t]);const d=h.useSyncExternalStore(h.useCallback(o=>l.subscribe(Ee.batchCalls(o)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),x=h.useCallback((o,m)=>{l.mutate(o,m).catch(as)},[l]);if(d.error&&ft(l.options.throwOnError,[d.error]))throw d.error;return{...d,mutate:x,mutateAsync:d.mutate}}/**
 * @license lucide-react v0.320.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=ht("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.320.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=ht("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),et=Me("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),tt=Me("MuiListItemIcon",["root","alignItemsFlexStart"]),st=Me("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function xs(t){return St("MuiMenuItem",t)}const me=Me("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),ms=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],fs=(t,s)=>{const{ownerState:a}=t;return[s.root,a.dense&&s.dense,a.divider&&s.divider,!a.disableGutters&&s.gutters]},ps=t=>{const{disabled:s,dense:a,divider:l,disableGutters:d,selected:x,classes:o}=t,b=kt({root:["root",a&&"dense",s&&"disabled",!d&&"gutters",l&&"divider",x&&"selected"]},xs,o);return ge({},o,b)},gs=_t(Ft,{shouldForwardProp:t=>Dt(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:fs})(({theme:t,ownerState:s})=>ge({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!s.disableGutters&&{paddingLeft:16,paddingRight:16},s.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${me.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:ye(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${me.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:ye(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${me.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:ye(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:ye(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${me.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${me.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${et.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${et.inset}`]:{marginLeft:52},[`& .${st.root}`]:{marginTop:0,marginBottom:0},[`& .${st.inset}`]:{paddingLeft:36},[`& .${tt.root}`]:{minWidth:36}},!s.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},s.dense&&ge({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{[`& .${tt.root} svg`]:{fontSize:"1.25rem"}}))),at=h.forwardRef(function(s,a){const l=Et({props:s,name:"MuiMenuItem"}),{autoFocus:d=!1,component:x="li",dense:o=!1,divider:m=!1,disableGutters:b=!1,focusVisibleClassName:j,role:p="menuitem",tabIndex:i,className:g}=l,f=Mt(l,ms),v=h.useContext(Xe),w=h.useMemo(()=>({dense:o||v.dense||!1,disableGutters:b}),[v.dense,o,b]),C=h.useRef(null);Bt(()=>{d&&C.current&&C.current.focus()},[d]);const M=ge({},l,{dense:w.dense,divider:m,disableGutters:b}),N=ps(l),I=It(C,a);let S;return l.disabled||(S=i!==void 0?i:-1),e.jsx(Xe.Provider,{value:w,children:e.jsx(gs,ge({ref:I,role:p,tabIndex:S,component:x,focusVisibleClassName:Je(N.focusVisible,j),className:Je(N.root,g)},f,{ownerState:M,classes:N}))})}),{palette:js}=Ie(),{augmentColor:bs}=js,vs=t=>bs({color:{main:t}}),nt=Ie({palette:{mainColor:vs("#08a5aa")}}),ys=()=>{const t=h.useRef(),s=h.useRef(),[a,l]=h.useState("");h.useState(!0),h.useEffect(()=>{t.current=window.cloudinary,s.current=t.current.createUploadWidget({cloudName:"divbyxxwx",uploadPreset:"o9yoqewt",multiple:!1,maxFiles:1,clientAllowedFormats:["jpg","jpeg","png"],cropping:!0,croppingAspectRatio:1},(o,m)=>{if(o)D.fire({icon:"error",title:"Upload Error",text:"An error occurred while uploading the image. Please try again or contact support."});else if(m&&m.event==="success"){const b=m.info.secure_url;l(b),localStorage.setItem("profile_pic",b)}})},[]);const d=()=>{s.current.open()},x=async()=>{l(""),localStorage.setItem(a)};return e.jsxs("div",{className:"w-full flex flex-row max-md:flex-col justify-center max-md:gap-5 items-center",children:[e.jsx("div",{className:"w-full flex justify-center",children:a?e.jsx(je,{src:a,alt:"User's image",sx:{width:128,height:128}}):e.jsx(je,{sx:{width:128,height:128,backgroundColor:"rgba(8,165,170,70%)",fontSize:32},children:e.jsx(ut,{size:48})})}),e.jsxs("div",{className:"flex gap-5 max-md:justify-center w-full",children:[e.jsx(_e,{theme:nt,children:e.jsx(De,{variant:"contained",onClick:d,type:"button",color:"mainColor",children:"Upload Image"})}),e.jsx(_e,{theme:nt,children:e.jsx(De,{variant:"outlined",onClick:x,type:"button",color:"mainColor",disabled:!a,children:"Delete Image"})})]})]})};function ws({onClose:t}){const s=h.useRef(),a=h.useRef(),l=B(),d=localStorage.getItem("currentDealId"),x=w=>{s.current===w.target&&t()},[o,m]=h.useState({title:"",firstName:"",lastName:"",company:"",dealSize:0,email:"",phoneNumber:"",notes:"",currentStage:"",datetime:""}),[b,j]=h.useState(""),[p,i]=h.useState(!1),g=w=>{if(w&&w.target){const{name:C,value:M}=w.target;m(N=>({...N,[C]:M}))}},f=O({mutationFn:async w=>{if(!d)throw new Error("Deal ID not found in localStorage");return _.post(`/deals/create-contact/${d}`,w)},onSuccess:()=>{l.invalidateQueries(["contacts","deals","followUps","negotiations","notAFits","OnGoingReviews","partners","pitches","prospects","researches","termSheets"]),localStorage.removeItem("profile_pic"),m({title:"",firstName:"",lastName:"",company:"",dealSize:0,email:"",phoneNumber:"",notes:"",currentStage:"",datetime:""}),i(!1),t(),ne.success("Contact created successfully.")},onError:w=>{j("An error occurred. Please try again."),a.current.scrollIntoView({behavior:"smooth"}),i(!1)}}),v=async w=>{w.preventDefault(),i(!0);let C;o.datetime&&(C=new Date(o.datetime).toISOString());const M={deal_id:d,title:o.title,first_name:o.firstName,last_name:o.lastName,organization_name:o.company,deal_size:o.dealSize,email:o.email,phone_number:o.phoneNumber,stage:o.currentStage,meeting_date:C,notes:o.notes,profile_pic:localStorage.getItem("profile_pic")||""};f.mutate(M)};return e.jsx("div",{ref:s,onClick:x,className:" fixed z-50 inset-0 bg-dark-blue bg-opacity-30 backdrop-blur-sm flex justify-center overflow-y-auto h-screen",children:e.jsx("div",{className:" mt-10 flex flex-col w-full",children:e.jsxs("div",{className:" bg-white rounded-xl px-20 max-md:px-5 py-10 flex flex-col gap-7 items-center mx-20 max-md:mx-10",children:[e.jsx("button",{onClick:t,className:" self-end hover:text-dark-blue text-red-500",children:e.jsx(ke,{size:30})}),e.jsx("h1",{ref:a,className:" text-dark-blue text-3xl max-md:text-2xl max-sm:text-xl font-extrabold",children:"Add a new contact to your pipeline"}),e.jsxs("form",{action:"",onSubmit:v,className:" flex flex-col gap-5 w-full",children:[b&&e.jsx("p",{className:" text-[#ff0000] font-semibold",children:b}),e.jsxs("div",{className:"flex flex-col gap-8 w-full",children:[e.jsx(ys,{}),e.jsxs("div",{className:" flex flex-row flex-wrap gap-5 justify-center max-md:justify-start",children:[e.jsx(A,{type:"text",title:"Title",placeholder:"Mr./Mrs./Ms./Dr./Engr.",id:"title",value:o.title,onChange:g}),e.jsx(Se,{type:"text",title:"First Name*",placeholder:"Sundi",id:"firstName",value:o.firstName,onChange:g}),e.jsx(Se,{type:"text",title:"Last Name*",placeholder:"Keita",id:"lastName",value:o.lastName,onChange:g})]}),e.jsxs("div",{className:" flex flex-row flex-wrap gap-x-5 gap-y-8 justify-center max-md:justify-start",children:[e.jsx(A,{type:"text",title:"Company",placeholder:"Mansa, LLC",id:"company",value:o.company,onChange:g}),e.jsx(A,{type:"number",title:"Deal Size ($)",placeholder:"1,000,000",id:"dealSize",min:0,value:o.dealSize,onChange:g}),e.jsx(A,{type:"email",title:"Contact Email",placeholder:"sundi@sankore.com",id:"email",value:o.email,onChange:g}),e.jsx(A,{type:"tel",title:"Phone Number",placeholder:"+123456789",id:"phoneNumber",maxLength:15,value:o.phoneNumber,onChange:g}),e.jsx(Ye,{label:"Current Stage",id:"currentStage",value:o.currentStage,onChange:g}),e.jsx(ct,{title:"Meeting Date",value:o.datetime,onChange:g})]}),e.jsx("div",{children:e.jsx(dt,{value:o.notes,onChange:g})})]}),e.jsx("div",{className:" mt-8 w-full flex items-center justify-center",children:e.jsx(pe,{type:"submit",disabled:p,text:"Create Contact"})})]})]})})})}function ie({titles:t,titleColors:s,contents:a}){const l=xe("shadow-lg","rounded-2xl","w-full"),d={color:s,minWidth:"210px"},x={backgroundColor:"rgb(255, 255, 255)"};return e.jsxs("div",{className:" flex flex-col gap-5 items-center w-full ",children:[e.jsx("div",{className:l,style:x,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center w-full ",style:d,children:t})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:a})]})}const W=()=>e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(wt,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})}),{palette:Ns}=Ie(),{augmentColor:Cs}=Ns,Ss=t=>Cs({color:{main:t}}),lt=Ie({palette:{mainColor:Ss("#08a5aa")}}),_s=({profile_url:t,contactId:s})=>{const a=h.useRef(),l=h.useRef(),[d,x]=h.useState(t||""),o=localStorage.getItem("currentDealId"),m=B();h.useEffect(()=>{a.current=window.cloudinary,l.current=a.current.createUploadWidget({cloudName:"divbyxxwx",uploadPreset:"o9yoqewt",multiple:!1,maxFiles:1,clientAllowedFormats:["jpg","jpeg","png"],cropping:!0,croppingAspectRatio:1},(g,f)=>{if(g)D.fire({icon:"error",title:"Upload Error",text:"An error occurred while uploading the image. Please try again or contact support."});else if(f&&f.event==="success"){const v=f.info.secure_url;x(v),b.mutate({contactId:s,profile_pic:v})}})},[]);const b=O({mutationFn:({contactId:g,profile_pic:f})=>_.patch(`deals/edit-contact/${o}/${g}`,{profile_pic:f}),onSuccess:()=>{ne.success("Contact image updated successfully."),m.invalidateQueries(["contacts",o])},onError:()=>{ne.error("Contact image failed to update, please try again.")}}),j=O({mutationFn:g=>_.patch(`/contacts/delete_photo/${o}/${g}`),onSuccess:()=>{x(""),ne.success("Contact image deleted successfully."),m.invalidateQueries(["contacts",o])},onError:()=>{ne.error("Contact image failed to delete, please try again.")}}),p=()=>{l.current.open()},i=async()=>{j.mutate(s)};return e.jsxs("div",{className:"w-full flex flex-row max-md:flex-col justify-center max-md:gap-5 items-center",children:[e.jsx("div",{className:"w-full flex justify-center",children:d?e.jsx(je,{src:d,alt:"User's image",sx:{width:128,height:128}}):e.jsx(je,{sx:{width:128,height:128,backgroundColor:"rgba(8,165,170,70%)",fontSize:32},children:e.jsx(ut,{size:48})})}),e.jsxs("div",{className:"flex gap-5 max-md:justify-center w-full",children:[e.jsx(_e,{theme:lt,children:e.jsx(De,{variant:"contained",onClick:p,type:"button",color:"mainColor",children:"Upload Image"})}),e.jsx(_e,{theme:lt,children:e.jsx(De,{variant:"outlined",onClick:i,type:"button",color:"mainColor",disabled:d===""&&!0,children:"Delete Image"})})]})]})};function K({onClose:t,contactDetails:s}){const[a,l]=h.useState(""),[d,x]=h.useState(!1),o=window.location.pathname.split("/").at(-1),m=B();let b=s.id;const j=h.useRef(),p=N=>{j.current===N.target&&t()},i=N=>{if(N&&N.target){const{name:I,value:S}=N.target;v($=>({...$,[I]:S}))}},g=N=>N?new Date(N).toISOString().slice(0,16):"",[f,v]=h.useState({title:s.title,first_name:s.first_name,last_name:s.last_name,organization_name:s.organization_name,deal_size:s.deal_size,email:s.email,phone_number:s.phone_number,stage:s.stage,datetime:g(s.meeting_date),notes:s.notes,profile_pic:s.profile_pic});let w;f.datetime&&(w=new Date(f.datetime).toISOString());const C=O({mutationFn:async N=>{const I=localStorage.getItem("currentDealId")||o;return await _.patch(`deals/edit-contact/${I}/${s.id}`,N)},onSuccess:()=>{l(""),x(!1),t(),ne.success("Contact updated successfully."),m.invalidateQueries(["contacts","deals",o,"followUps","negotiations","notAFits","OnGoingReviews","partners","pitches","prospects","researches","termSheets"])},onError:N=>{N.response.data.message==="unable to edit contact at this time"&&(t(),D.fire("Error","You are not allowed to edit this dashboard.","error")),l("Something went wrong. Please try again."),x(!1)}}),M=async N=>{if(N.preventDefault(),!(localStorage.getItem("currentDealId")||o)){console.error("Deal ID not found in localStorage");return}const S=JSON.parse(localStorage.getItem("user"));S||(t(),D.fire("Error","You are not allowed to edit this dashboard.","error"));const $={userId:S.id,title:f.title,first_name:f.first_name,last_name:f.last_name,organization_name:f.organization_name,deal_size:f.deal_size,email:f.email,phone_number:f.phone_number,stage:f.stage,meeting_date:w,notes:f.notes};C.mutate($)};return e.jsx("div",{ref:j,onClick:p,className:"fixed z-50 inset-0 bg-dark-blue bg-opacity-30 backdrop-blur-sm flex justify-center overflow-y-auto h-screen",children:e.jsx("div",{className:" mt-10 flex flex-col",children:e.jsxs("div",{className:"bg-white rounded-xl px-20 max-md:px-5 py-10 flex flex-col gap-7 items-center mx-20 max-md:mx-10",children:[e.jsx("button",{onClick:t,className:"self-end text-red-500 hover:text-dark-blue",children:e.jsx(ke,{size:30})}),e.jsx("h1",{className:"text-dark-blue text-3xl max-md:text-2xl max-sm:text-xl font-extrabold",children:"Edit Contact Details"}),e.jsxs("form",{action:"",onSubmit:M,className:"flex flex-col gap-5",children:[a&&e.jsx("p",{className:"text-[#ff0000] font-semibold",children:a}),e.jsx(_s,{profile_url:f.profile_pic,contactId:b}),e.jsxs("div",{className:"flex flex-row items-center justify-center flex-wrap gap-5 w-full",children:[e.jsx(A,{type:"text",title:"Title",placeholder:"Mr./Mrs./Ms./Dr./Engr.",id:"title",value:f.title,onChange:i}),e.jsx(A,{type:"text",title:"First Name",placeholder:"Sundi",id:"first_name",value:f.first_name,onChange:i}),e.jsx(A,{type:"text",title:"Last Name",placeholder:"Keita",id:"last_name",value:f.last_name,onChange:i}),e.jsx(A,{type:"text",title:"Company",placeholder:"Mansa, LLC",id:"organization_name",value:f.organization_name,onChange:i}),e.jsx(A,{type:"number",title:"Deal Size ($)",placeholder:"1,000,000",id:"deal_size",min:0,value:f.deal_size,onChange:i}),e.jsx(A,{type:"email",title:"Contact Email",placeholder:"sundi@sankore.com",id:"email",value:f.email,onChange:i}),e.jsx(A,{type:"tel",title:"Phone Number",placeholder:"+123456789",id:"phone_number",value:f.phone_number,onChange:i,maxLength:15}),e.jsx(Ye,{label:"Current Stage",id:"stage",value:f.stage,onChange:i}),e.jsx(ct,{title:"Meeting Date",value:f.datetime,onChange:i})]}),e.jsx("div",{children:e.jsx(dt,{value:f.notes,onChange:i})}),e.jsx("div",{className:"mt-8 w-full flex items-center justify-center",children:e.jsx(pe,{type:"submit",disabled:d,text:"Update Contact"})})]})]})})})}const Y=t=>t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),H=({profile_url:t,firstName:s,lastName:a,color:l})=>{const d=(x,o)=>`${x[0]}${o[0]}`.toUpperCase();return e.jsx(je,{src:t||"",alt:"User's profile",sx:{width:40,height:40,backgroundColor:t?"transparent":"white",fontSize:20,color:`${l}`},children:!t&&d(s,a)})};var Ae={},Ds=$t;Object.defineProperty(Ae,"__esModule",{value:!0});var pt=Ae.default=void 0,Es=Ds(zt()),Ms=e;pt=Ae.default=(0,Es.default)((0,Ms.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert");const J=({anchorEl:t,handleMenuClick:s,handleMenuClose:a,handleViewOrUpdate:l,handleDeleteClick:d})=>e.jsxs(e.Fragment,{children:[e.jsx(Rt,{onClick:s,className:"text-white",size:"small",children:e.jsx(pt,{htmlColor:"#ffffff"})}),e.jsxs(Tt,{anchorEl:t,open:!!t,onClose:a,children:[e.jsx(at,{onClick:l,children:"View or Edit Contact"}),e.jsx(at,{onClick:d,children:"Delete Contact"})]})]});function Is({borderColour:t}){const s=B(),a=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),l={border:`2px solid  ${t}`,width:"210px",minWidth:"210px",overflow:"hidden"},[d,x]=h.useState(!1),[o,m]=h.useState(null),[b,j]=h.useState(null),[p,i]=h.useState(null),{data:g,error:f,isLoading:v}=V({queryKey:["researches",a],queryFn:async()=>(await _.get(`deals/research-contacts/${a}`)).data.data}),w=O({mutationFn:n=>_.delete(`contacts/delete-contact/${a}/${n}`),onSuccess:()=>{s.invalidateQueries(["researches",a]),D.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{D.fire("Error","Failed to delete contact","error")}}),C=async n=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(u=>{u.isConfirmed&&w.mutate(n)})},M=async n=>{try{const u=await _.get(`contacts/single-contact/${a}/${n}`);m(u.data.contact),x(!0)}catch(u){console.error("Error fetching contact details:",u)}},N=()=>{x(!1),m(null)},I=(n,u)=>{j(n.currentTarget),i(u)},S=()=>{j(null),i(null)},$=()=>{p&&(M(p),S())},R=()=>{p&&(C(p),S())};return v?e.jsx(W,{}):f?e.jsx("div",{children:"Error occurred fetching contacts in research stage."}):e.jsxs(e.Fragment,{children:[g.length===0?e.jsx("div",{}):g.map(n=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...l},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:t},children:[e.jsx(H,{profile_url:n.profile_pic,firstName:n.first_name,lastName:n.last_name,color:t}),e.jsxs("div",{className:"flex-grow overflow-hidden",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${n.first_name} ${n.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:n.organization_name||"No company"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{anchorEl:b,handleMenuClick:u=>I(u,n.id),handleMenuClose:S,handleViewOrUpdate:$,handleDeleteClick:R})})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{className:"overflow-hidden w-full",children:[e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Deal Size: $",n.deal_size?Y(n.deal_size):"0"]}),e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Meeting:"," ",n.meeting_date?new Date(n.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs truncate",children:n.email||"No email"}),e.jsx("p",{className:"text-xs truncate",children:n.phone_number||"No phone number"})]}),e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("p",{className:"text-xs truncate",children:n.notes})})]})]},n.id)),d&&o&&e.jsx(K,{onClose:N,contactDetails:o})]})}function ks({borderColour:t}){const s=B(),a=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),l={border:`2px solid ${t}`,width:"210px",minWidth:"210px",overflow:"hidden"},[d,x]=h.useState(!1),[o,m]=h.useState(null),[b,j]=h.useState(null),[p,i]=h.useState(null),{data:g,error:f,isLoading:v}=V({queryKey:["contacts",a],queryFn:async()=>(await _.get(`deals/contacted-contacts/${a}`)).data.data}),w=O({mutationFn:n=>_.delete(`contacts/delete-contact/${a}/${n}`),onSuccess:()=>{s.invalidateQueries(["contacts",a]),D.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{D.fire("Error","Failed to delete contact","error")}}),C=async n=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(u=>{u.isConfirmed&&w.mutate(n)})},M=async n=>{try{const u=await _.get(`contacts/single-contact/${a}/${n}`);m(u.data.contact),x(!0)}catch(u){console.error("Error fetching contact details:",u)}},N=()=>{x(!1),m(null)},I=(n,u)=>{j(n.currentTarget),i(u)},S=()=>{j(null),i(null)},$=()=>{p&&(M(p),S())},R=()=>{p&&(C(p),S())};return v?e.jsx(W,{}):f?e.jsx("div",{children:"Error occurred fetching contacts in contacted stage."}):e.jsxs(e.Fragment,{children:[g.length===0?e.jsx("div",{}):g.map(n=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...l},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:t},children:[e.jsx(H,{profile_url:n.profile_pic,firstName:n.first_name,lastName:n.last_name,color:t}),e.jsxs("div",{className:"flex-grow overflow-hidden",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${n.first_name} ${n.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:n.organization_name||"No company"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{anchorEl:b,handleMenuClick:u=>I(u,n.id),handleMenuClose:S,handleViewOrUpdate:$,handleDeleteClick:R})})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{className:"overflow-hidden w-full",children:[e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Deal Size: $",n.deal_size?Y(n.deal_size):"0"]}),e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Meeting:"," ",n.meeting_date?new Date(n.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs truncate",children:n.email||"No email"}),e.jsx("p",{className:"text-xs truncate",children:n.phone_number||"No phone number"})]}),e.jsx("div",{className:" w-full overflow-hidden",children:e.jsx("p",{className:"text-xs truncate",children:n.notes})})]})]},n.id)),d&&o&&e.jsx(K,{onClose:N,contactDetails:o})]})}function $s({borderColour:t}){const s=B(),a=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),l={border:`2px solid  ${t}`,width:"210px",minWidth:"210px",overflow:"hidden"},[d,x]=h.useState(!1),[o,m]=h.useState(null),[b,j]=h.useState(null),[p,i]=h.useState(null),{data:g,error:f,isLoading:v}=V({queryKey:["pitches",a],queryFn:async()=>(await _.get(`deals/pitch-contacts/${a}`)).data.data}),w=O({mutationFn:n=>_.delete(`contacts/delete-contact/${a}/${n}`),onSuccess:()=>{s.invalidateQueries(["pitches",a]),D.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{D.fire("Error","Failed to delete contact","error")}}),C=async n=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(u=>{u.isConfirmed&&w.mutate(n)})},M=async n=>{try{const u=await _.get(`contacts/single-contact/${a}/${n}`);m(u.data.contact),x(!0)}catch(u){console.error("Error fetching contact details:",u)}},N=()=>{x(!1),m(null)},I=(n,u)=>{j(n.currentTarget),i(u)},S=()=>{j(null),i(null)},$=()=>{p&&(M(p),S())},R=()=>{p&&(C(p),S())};return v?e.jsx(W,{}):f?e.jsx("div",{children:"Error occurred fetching contacts in pitch stage."}):e.jsxs(e.Fragment,{children:[g.length===0?e.jsx("div",{}):g.map(n=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...l},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:t},children:[e.jsx(H,{profile_url:n.profile_pic,firstName:n.first_name,lastName:n.last_name,color:t}),e.jsxs("div",{className:"flex-grow overflow-hidden",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${n.first_name} ${n.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:n.organization_name||"No company"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{anchorEl:b,handleMenuClick:u=>I(u,n.id),handleMenuClose:S,handleViewOrUpdate:$,handleDeleteClick:R})})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{className:"overflow-hidden w-full",children:[e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Deal Size: $",n.deal_size?Y(n.deal_size):"0"]}),e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Meeting:"," ",n.meeting_date?new Date(n.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs truncate",children:n.email||"No email"}),e.jsx("p",{className:"text-xs truncate",children:n.phone_number||"No phone number"})]}),e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("p",{className:"text-xs truncate",children:n.notes})})]})]},n.id)),d&&o&&e.jsx(K,{onClose:N,contactDetails:o})]})}function Fs({borderColour:t}){const s=B(),a=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),l={border:`2px solid  ${t}`,width:"210px",minWidth:"210px",overflow:"hidden"},[d,x]=h.useState(!1),[o,m]=h.useState(null),[b,j]=h.useState(null),[p,i]=h.useState(null),{data:g,error:f,isLoading:v}=V({queryKey:["negotiations",a],queryFn:async()=>(await _.get(`deals/negotiation-contacts/${a}`)).data.data}),w=O({mutationFn:n=>_.delete(`contacts/delete-contact/${a}/${n}`),onSuccess:()=>{s.invalidateQueries(["negotiations",a]),D.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{D.fire("Error","Failed to delete contact","error")}}),C=async n=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(u=>{u.isConfirmed&&w.mutate(n)})},M=async n=>{try{const u=await _.get(`contacts/single-contact/${a}/${n}`);m(u.data.contact),x(!0)}catch(u){console.error("Error fetching contact details:",u)}},N=()=>{x(!1),m(null)},I=(n,u)=>{j(n.currentTarget),i(u)},S=()=>{j(null),i(null)},$=()=>{p&&(M(p),S())},R=()=>{p&&(C(p),S())};return v?e.jsx(W,{}):f?e.jsx("div",{children:"Error occurred fetching contacts in negotiation stage."}):e.jsxs(e.Fragment,{children:[g.length===0?e.jsx("div",{}):g.map(n=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...l},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:t},children:[e.jsx(H,{profile_url:n.profile_pic,firstName:n.first_name,lastName:n.last_name,color:t}),e.jsxs("div",{className:"flex-grow overflow-hidden",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${n.first_name} ${n.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:n.organization_name||"No company"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{anchorEl:b,handleMenuClick:u=>I(u,n.id),handleMenuClose:S,handleViewOrUpdate:$,handleDeleteClick:R})})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{className:"overflow-hidden w-full",children:[e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Deal Size: $",n.deal_size?Y(n.deal_size):"0"]}),e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Meeting:"," ",n.meeting_date?new Date(n.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs truncate",children:n.email||"No email"}),e.jsx("p",{className:"text-xs truncate",children:n.phone_number||"No phone number"})]}),e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("p",{className:"text-xs truncate",children:n.notes})})]})]},n.id)),d&&o&&e.jsx(K,{onClose:N,contactDetails:o})]})}function zs({borderColour:t}){const s=B(),a=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),l={border:`2px solid  ${t}`,width:"210px",minWidth:"210px",overflow:"hidden"},[d,x]=h.useState(!1),[o,m]=h.useState(null),[b,j]=h.useState(null),[p,i]=h.useState(null),{data:g,error:f,isLoading:v}=V({queryKey:["deals",a],queryFn:async()=>(await _.get(`deals/deal-contacts/${a}`)).data.data}),w=O({mutationFn:n=>_.delete(`contacts/delete-contact/${a}/${n}`),onSuccess:()=>{s.invalidateQueries(["deals",a]),D.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{D.fire("Error","Failed to delete contact","error")}}),C=async n=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(u=>{u.isConfirmed&&w.mutate(n)})},M=async n=>{try{const u=await _.get(`contacts/single-contact/${a}/${n}`);m(u.data.contact),x(!0)}catch(u){console.error("Error fetching contact details:",u)}},N=()=>{x(!1),m(null)},I=(n,u)=>{j(n.currentTarget),i(u)},S=()=>{j(null),i(null)},$=()=>{p&&(M(p),S())},R=()=>{p&&(C(p),S())};return v?e.jsx(W,{}):f?e.jsx("div",{children:"Error occurred fetching contacts in deal stage."}):e.jsxs(e.Fragment,{children:[g.length===0?e.jsx("div",{}):g.map(n=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...l},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:t},children:[e.jsx(H,{profile_url:n.profile_pic,firstName:n.first_name,lastName:n.last_name,color:t}),e.jsxs("div",{className:"flex-grow overflow-hidden",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${n.first_name} ${n.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:n.organization_name||"No company"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{anchorEl:b,handleMenuClick:u=>I(u,n.id),handleMenuClose:S,handleViewOrUpdate:$,handleDeleteClick:R})})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{className:"overflow-hidden w-full",children:[e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Deal Size: $",n.deal_size?Y(n.deal_size):"0"]}),e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Meeting:"," ",n.meeting_date?new Date(n.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs truncate",children:n.email||"No email"}),e.jsx("p",{className:"text-xs truncate",children:n.phone_number||"No phone number"})]}),e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("p",{className:"text-xs truncate",children:n.notes})})]})]},n.id)),d&&o&&e.jsx(K,{onClose:N,contactDetails:o})]})}function Rs({borderColour:t}){const s=B(),a=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),l={border:`2px solid  ${t}`,width:"210px",minWidth:"210px",overflow:"hidden"},[d,x]=h.useState(!1),[o,m]=h.useState(null),[b,j]=h.useState(null),[p,i]=h.useState(null),{data:g,error:f,isLoading:v}=V({queryKey:["notAFits",a],queryFn:async()=>(await _.get(`deals/rejection-contacts/${a}`)).data.data}),w=O({mutationFn:n=>_.delete(`contacts/delete-contact/${a}/${n}`),onSuccess:()=>{s.invalidateQueries(["notAFits",a]),D.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{D.fire("Error","Failed to delete contact","error")}}),C=async n=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(u=>{u.isConfirmed&&w.mutate(n)})},M=async n=>{try{const u=await _.get(`contacts/single-contact/${a}/${n}`);m(u.data.contact),x(!0)}catch(u){console.error("Error fetching contact details:",u)}},N=()=>{x(!1),m(null)},I=(n,u)=>{j(n.currentTarget),i(u)},S=()=>{j(null),i(null)},$=()=>{p&&(M(p),S())},R=()=>{p&&(C(p),S())};return v?e.jsx(W,{}):f?e.jsx("div",{children:"Error occurred fetching contacts in not-a-fit stage."}):e.jsxs(e.Fragment,{children:[g.length===0?e.jsx("div",{}):g.map(n=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40 ",style:{...l},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:t},children:[e.jsx(H,{profile_url:n.profile_pic,firstName:n.first_name,lastName:n.last_name,color:t}),e.jsxs("div",{className:"flex-grow overflow-hidden",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${n.first_name} ${n.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:n.organization_name||"No company"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{anchorEl:b,handleMenuClick:u=>I(u,n.id),handleMenuClose:S,handleViewOrUpdate:$,handleDeleteClick:R})})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{className:"overflow-hidden w-full",children:[e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Deal Size: $",n.deal_size?Y(n.deal_size):"0"]}),e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Meeting:"," ",n.meeting_date?new Date(n.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs truncate",children:n.email||"No email"}),e.jsx("p",{className:"text-xs truncate",children:n.phone_number||"No phone number"})]}),e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("p",{className:"text-xs truncate",children:n.notes})})]})]},n.id)),d&&o&&e.jsx(K,{onClose:N,contactDetails:o})]})}function Ts({borderColour:t,titleColors:s}){const a=B(),l=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),d={border:`2px solid  ${t}`,width:"210px",minWidth:"210px",overflow:"hidden"},x=xe("shadow-lg","rounded-2xl","w-full"),o={color:s,minWidth:"210px"},m={backgroundColor:"rgb(255, 255, 255)"},[b,j]=h.useState(!1),[p,i]=h.useState(null),[g,f]=h.useState(null),[v,w]=h.useState(null),{data:C,error:M,isLoading:N}=V({queryKey:["prospects",l],queryFn:async()=>(await _.get(`deals/prospect-contacts/${l}`)).data.data}),I=O({mutationFn:r=>_.delete(`contacts/delete-contact/${l}/${r}`),onSuccess:()=>{a.invalidateQueries(["prospects",l]),D.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{D.fire("Error","Failed to delete contact","error")}}),S=async r=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(y=>{y.isConfirmed&&I.mutate(r)})},$=async r=>{try{const y=await _.get(`contacts/single-contact/${l}/${r}`);i(y.data.contact),j(!0)}catch(y){console.error("Error fetching contact details:",y)}},R=()=>{j(!1),i(null)},n=(r,y)=>{f(r.currentTarget),w(y)},u=()=>{f(null),w(null)},Q=()=>{v&&($(v),u())},P=()=>{v&&(S(v),u())};return N?e.jsx(W,{}):M?e.jsx("div",{children:"Error occurred fetching contacts in prospect stage."}):e.jsxs(e.Fragment,{children:[C.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:x,style:m,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:o,children:"Prospect"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:C.map(r=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...d},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:t},children:[e.jsx(H,{profile_url:r.profile_pic,firstName:r.first_name,lastName:r.last_name,color:t}),e.jsxs("div",{className:"flex-grow overflow-hidden",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${r.first_name} ${r.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:r.organization_name||"No company"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{anchorEl:g,handleMenuClick:y=>n(y,r.id),handleMenuClose:u,handleViewOrUpdate:Q,handleDeleteClick:P})})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{className:"overflow-hidden w-full",children:[e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Deal Size: $",r.deal_size?Y(r.deal_size):"0"]}),e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Meeting:"," ",r.meeting_date?new Date(r.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs truncate",children:r.email||"No email"}),e.jsx("p",{className:"text-xs truncate",children:r.phone_number||"No phone number"})]}),e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("p",{className:"text-xs truncate",children:r.notes})})]})]},r.id))})]}):null,b&&p&&e.jsx(K,{onClose:R,contactDetails:p})]})}function Bs({borderColour:t,titleColors:s}){const a=B(),l=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),d={border:`2px solid  ${t}`,width:"210px",minWidth:"210px",overflow:"hidden"},x=xe("shadow-lg","rounded-2xl","w-full"),o={color:s,minWidth:"210px"},m={backgroundColor:"rgb(255, 255, 255)"},[b,j]=h.useState(!1),[p,i]=h.useState(null),[g,f]=h.useState(null),[v,w]=h.useState(null),{data:C,error:M,isLoading:N}=V({queryKey:["OnGoingReviews",l],queryFn:async()=>(await _.get(`deals/review-contacts/${l}`)).data.data}),I=O({mutationFn:r=>_.delete(`contacts/delete-contact/${l}/${r}`),onSuccess:()=>{a.invalidateQueries(["OnGoingReviews",l]),D.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{D.fire("Error","Failed to delete contact","error")}}),S=async r=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(y=>{y.isConfirmed&&I.mutate(r)})},$=async r=>{try{const y=await _.get(`contacts/single-contact/${l}/${r}`);i(y.data.contact),j(!0)}catch(y){console.error("Error fetching contact details:",y)}},R=()=>{j(!1),i(null)},n=(r,y)=>{f(r.currentTarget),w(y)},u=()=>{f(null),w(null)},Q=()=>{v&&($(v),u())},P=()=>{v&&(S(v),u())};return N?e.jsx(W,{}):M?e.jsx("div",{children:"Error occurred fetching contacts in review stage."}):e.jsxs(e.Fragment,{children:[C.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:x,style:m,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:o,children:"Review"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:C.map(r=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...d},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:t},children:[e.jsx(H,{profile_url:r.profile_pic,firstName:r.first_name,lastName:r.last_name,color:t}),e.jsxs("div",{className:"flex-grow overflow-hidden",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${r.first_name} ${r.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:r.organization_name||"No company"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{anchorEl:g,handleMenuClick:y=>n(y,r.id),handleMenuClose:u,handleViewOrUpdate:Q,handleDeleteClick:P})})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{className:"overflow-hidden w-full",children:[e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Deal Size: $",r.deal_size?Y(r.deal_size):"0"]}),e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Meeting:"," ",r.meeting_date?new Date(r.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs truncate",children:r.email||"No email"}),e.jsx("p",{className:"text-xs",children:r.phone_number||"No phone number"})]}),e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("p",{className:"text-xs truncate",children:r.notes})})]})]},r.id))})]}):null,b&&p&&e.jsx(K,{onClose:R,contactDetails:p})]})}function Os({borderColour:t,titleColors:s}){const a=B(),l=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),d={border:`2px solid  ${t}`,width:"210px",minWidth:"210px",overflow:"hidden"},x=xe("shadow-lg","rounded-2xl","w-full"),o={color:s,minWidth:"210px"},m={backgroundColor:"rgb(255, 255, 255)"},[b,j]=h.useState(!1),[p,i]=h.useState(null),[g,f]=h.useState(null),[v,w]=h.useState(null),{data:C,error:M,isLoading:N}=V({queryKey:["partners",l],queryFn:async()=>(await _.get(`deals/partner-contacts/${l}`)).data.data}),I=O({mutationFn:r=>_.delete(`contacts/delete-contact/${l}/${r}`),onSuccess:()=>{a.invalidateQueries(["partners",l]),D.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{D.fire("Error","Failed to delete contact","error")}}),S=async r=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(y=>{y.isConfirmed&&I.mutate(r)})},$=async r=>{try{const y=await _.get(`contacts/single-contact/${l}/${r}`);i(y.data.contact),j(!0)}catch(y){console.error("Error fetching contact details:",y)}},R=()=>{j(!1),i(null)},n=(r,y)=>{f(r.currentTarget),w(y)},u=()=>{f(null),w(null)},Q=()=>{v&&($(v),u())},P=()=>{v&&(S(v),u())};return N?e.jsx(W,{}):M?e.jsx("div",{children:"Error occurred fetching contacts in partners stage."}):e.jsxs(e.Fragment,{children:[C.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:x,style:m,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:o,children:"Partner"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:C.map(r=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...d},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:t},children:[e.jsx(H,{profile_url:r.profile_pic,firstName:r.first_name,lastName:r.last_name,color:t}),e.jsxs("div",{className:"flex-grow overflow-hidden",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${r.first_name} ${r.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:r.organization_name||"No company"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{anchorEl:g,handleMenuClick:y=>n(y,r.id),handleMenuClose:u,handleViewOrUpdate:Q,handleDeleteClick:P})})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{className:"overflow-hidden w-full",children:[e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Deal Size: $",r.deal_size?Y(r.deal_size):"0"]}),e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Meeting:"," ",r.meeting_date?new Date(r.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs truncate",children:r.email||"No email"}),e.jsx("p",{className:"text-xs truncate",children:r.phone_number||"No phone number"})]}),e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("p",{className:"text-xs truncate",children:r.notes})})]})]},r.id))})]}):null,b&&p&&e.jsx(K,{onClose:R,contactDetails:p})]})}function Ls({borderColour:t,titleColors:s}){const a=B(),l=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),d={border:`2px solid  ${t}`,width:"210px",minWidth:"210px",overflow:"hidden"},x=xe("shadow-lg","rounded-2xl","w-full"),o={color:s,minWidth:"210px"},m={backgroundColor:"rgb(255, 255, 255)"},[b,j]=h.useState(!1),[p,i]=h.useState(null),[g,f]=h.useState(null),[v,w]=h.useState(null),{data:C,error:M,isLoading:N}=V({queryKey:["termSheets",l],queryFn:async()=>(await _.get(`deals/offer-contacts/${l}`)).data.data}),I=O({mutationFn:r=>_.delete(`contacts/delete-contact/${l}/${r}`),onSuccess:()=>{a.invalidateQueries(["termSheets",l]),D.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{D.fire("Error","Failed to delete contact","error")}}),S=async r=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(y=>{y.isConfirmed&&I.mutate(r)})},$=async r=>{try{const y=await _.get(`contacts/single-contact/${l}/${r}`);i(y.data.contact),j(!0)}catch(y){console.error("Error fetching contact details:",y)}},R=()=>{j(!1),i(null)},n=(r,y)=>{f(r.currentTarget),w(y)},u=()=>{f(null),w(null)},Q=()=>{v&&($(v),u())},P=()=>{v&&(S(v),u())};return N?e.jsx(W,{}):M?e.jsx("div",{children:"Error occurred fetching contacts in termsheet stage."}):e.jsxs(e.Fragment,{children:[C.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:x,style:m,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:o,children:"Term Sheet"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:C.map(r=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...d},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:t},children:[e.jsx(H,{profile_url:r.profile_pic,firstName:r.first_name,lastName:r.last_name,color:t}),e.jsxs("div",{className:"flex-grow overflow-hidden",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${r.first_name} ${r.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:r.organization_name||"No company"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{anchorEl:g,handleMenuClick:y=>n(y,r.id),handleMenuClose:u,handleViewOrUpdate:Q,handleDeleteClick:P})})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{className:"overflow-hidden w-full",children:[e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Deal Size: $",r.deal_size?Y(r.deal_size):"0"]}),e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Meeting:"," ",r.meeting_date?new Date(r.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs truncate",children:r.email||"No email"}),e.jsx("p",{className:"text-xs truncate",children:r.phone_number||"No phone number"})]}),e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("p",{className:"text-xs truncate",children:r.notes})})]})]},r.id))})]}):null,b&&p&&e.jsx(K,{onClose:R,contactDetails:p})]})}function Us({borderColour:t,titleColors:s}){const a=B(),l=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),d={border:`2px solid  ${t}`,width:"210px",minWidth:"210px",overflow:"hidden"},x=xe("shadow-lg","rounded-2xl","w-full"),o={color:s,minWidth:"210px"},m={backgroundColor:"rgb(255, 255, 255)"},[b,j]=h.useState(!1),[p,i]=h.useState(null),[g,f]=h.useState(null),[v,w]=h.useState(null),{data:C,error:M,isLoading:N}=V({queryKey:["followUps",l],queryFn:async()=>(await _.get(`deals/followup-contacts/${l}`)).data.data}),I=O({mutationFn:r=>_.delete(`contacts/delete-contact/${l}/${r}`),onSuccess:()=>{a.invalidateQueries(["followUps",l]),D.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{D.fire("Error","Failed to delete contact","error")}}),S=async r=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(y=>{y.isConfirmed&&I.mutate(r)})},$=async r=>{try{const y=await _.get(`contacts/single-contact/${l}/${r}`);i(y.data.contact),j(!0)}catch(y){console.error("Error fetching contact details:",y)}},R=()=>{j(!1),i(null)},n=(r,y)=>{f(r.currentTarget),w(y)},u=()=>{f(null),w(null)},Q=()=>{v&&($(v),u())},P=()=>{v&&(S(v),u())};return N?e.jsx(W,{}):M?e.jsx("div",{children:"Error occurred fetching contacts in follow-up stage."}):e.jsxs(e.Fragment,{children:[C.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:x,style:m,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:o,children:"Follow-up"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:C.map(r=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...d},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:t},children:[e.jsx(H,{profile_url:r.profile_pic,firstName:r.first_name,lastName:r.last_name,color:t}),e.jsxs("div",{className:"flex-grow overflow-hidden",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${r.first_name} ${r.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:r.organization_name||"No company"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{anchorEl:g,handleMenuClick:y=>n(y,r.id),handleMenuClose:u,handleViewOrUpdate:Q,handleDeleteClick:P})})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{className:"overflow-hidden w-full",children:[e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Deal Size: $",r.deal_size?Y(r.deal_size):"0"]}),e.jsxs("p",{className:"text-xs font-semibold truncate",children:["Meeting:"," ",r.meeting_date?new Date(r.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs truncate",children:r.email||"No email"}),e.jsx("p",{className:"text-xs truncate",children:r.phone_number||"No phone number"})]}),e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("p",{className:"text-xs truncate",children:r.notes})})]})]},r.id))})]}):null,b&&p&&e.jsx(K,{onClose:R,contactDetails:p})]})}const qs=()=>{const t=e.jsx(Is,{borderColour:"rgb(0, 0, 139)"}),s=e.jsx(ks,{borderColour:"#87CEEB"}),a=e.jsx($s,{borderColour:"#08a5aa"}),l=e.jsx(Fs,{borderColour:"orange"}),d=e.jsx(zs,{borderColour:"green"}),x=e.jsx(Rs,{borderColour:"#FF0000"});return e.jsxs("div",{className:"flex gap-2 pb-10 w-full overflow-y-auto overflow-x-auto",children:[e.jsx(ie,{titles:"Research",titleColors:"rgb(0, 0, 139)",contents:t}),e.jsx(Ts,{borderColour:"rgb(115, 147, 179)",titleColors:"rgb(115, 147, 179)"}),e.jsx(ie,{titles:"Contacted",titleColors:"#87CEEB",contents:s}),e.jsx(ie,{titles:"Pitch",titleColors:"#08a5aa",contents:a}),e.jsx(Bs,{borderColour:"#FDDC5C",titleColors:"#FDDC5C"}),e.jsx(Os,{borderColour:"#E67451",titleColors:"#E67451"}),e.jsx(Ls,{titleColors:"#000000",borderColour:"#000000"}),e.jsx(ie,{titles:"Negotiation",titleColors:"orange",contents:l}),e.jsx(ie,{titles:"Deal",titleColors:"green",contents:d}),e.jsx(Us,{borderColour:"#D3D3D3",titleColors:"#D3D3D3"}),e.jsx(ie,{titles:"Not a Fit",titleColors:"#FF0000",contents:x})]})};function Ys({onClose:t}){const s=h.useRef(),a=i=>{s.current===i.target&&t()},[l,d]=h.useState(""),[x,o]=h.useState({firstName:"",lastName:"",moveContact:""}),m=B(),b=O({mutationFn:async i=>{const g=localStorage.getItem("currentDealId");if(!g)throw new Error("Deal ID not found in localStorage");return await _.patch(`/deals/change-stage/${g}`,i)},onSuccess:()=>{m.invalidateQueries(["contacts","deals","followUps","negotiations","notAFits","OnGoingReviews","partners","pitches","prospects","researches","termSheets"]),o({firstName:"",lastName:"",moveContact:""}),t(),ne.success("Contact moved successfully.")},onError:()=>{d("Something went wrong. Please try again.")}}),j=i=>{if(i&&i.target){const{name:g,value:f}=i.target;o(v=>({...v,[g]:f}))}},p=i=>{i.preventDefault();const g={first_name:x.firstName,last_name:x.lastName,stage:x.moveContact};b.mutate(g)};return e.jsx("div",{ref:s,onClick:a,className:" fixed z-50 inset-0 bg-dark-blue bg-opacity-30 backdrop-blur-sm flex justify-center overflow-y-auto h-screen",children:e.jsx("div",{className:" mt-10 flex flex-col",children:e.jsxs("div",{className:" bg-white rounded-xl px-20 py-10 flex flex-col gap-5 items-center mx-4",children:[e.jsx("button",{onClick:t,className:" place-self-end text-red-600 hover:text-dark-blue",children:e.jsx(ke,{size:30})}),e.jsx("h1",{className:" text-dark-blue text-3xl font-extrabold mb-5",children:"Move contacts within your pipeline"}),e.jsxs("form",{action:"",onSubmit:p,className:" flex flex-col gap-5",children:[b.isError&&e.jsx("p",{className:" text-[#ff0000] font-semibold",children:l}),e.jsxs("div",{className:"flex flex-row items-center justify-center flex-wrap gap-5",children:[e.jsx(Se,{type:"text",title:"First Name*",placeholder:"Sundi",id:"firstName",value:x.firstName,onChange:j}),e.jsx(Se,{type:"text",title:"Last Name*",placeholder:"Keita",id:"lastName",value:x.lastName,onChange:j})]}),e.jsx("div",{className:"flex flex-row items-center justify-center flex-wrap gap-5",children:e.jsx(Ye,{label:"Move Contact To",id:"moveContact",value:x.moveContact,onChange:j})}),e.jsx("div",{className:" mt-8 w-full flex items-center justify-center",children:e.jsx(pe,{type:"submit",disabled:b.isLoading,text:"Move Contact"})})]})]})})})}function Qs({onClose:t,dealDetail:s}){const[a,l]=h.useState(!1),d=h.useRef(),x=JSON.parse(localStorage.getItem("user")),o=i=>{d.current===i.target&&t()},m=`https://crm.mansastars.com${window.location.pathname}`,b=`Hi, ${x.first_name} ${x.last_name} has invited you to collaborate on the Mansa CRM Project titled "${s.deal_name}". Mansas CRM helps you manage your leads, target prospects, dealflow and manage follow-ups efficiently and affordably. Click the link below to accept the invitation and get started!`,j="Check out this dashboard",p=()=>{navigator.clipboard.writeText(m),l(!0),setTimeout(()=>{l(!1)},2e3)};return e.jsx("div",{ref:d,onClick:o,className:" fixed z-50 inset-0 bg-dark-blue bg-opacity-30 backdrop-blur-sm flex justify-center overflow-y-auto h-screen",children:e.jsx("div",{className:" mt-10 flex flex-col",children:e.jsxs("div",{className:" bg-white rounded-xl px-10 py-10 flex flex-col gap-5 items-center mx-4",children:[e.jsx("button",{onClick:t,className:" place-self-end text-red-600 hover:text-dark-blue",children:e.jsx(ke,{size:30})}),e.jsx("h1",{className:" text-dark-blue text-3xl font-extrabold mb-5",children:"Share Dashboard"}),e.jsxs("div",{className:" flex max-md:flex-wrap items-center justify-center gap-5 text-dark-blue font-semibold",children:[e.jsxs("div",{className:" flex flex-col gap-5 items-center justify-center",children:[e.jsx(Lt,{url:m,subject:j,body:b,children:e.jsx(Ut,{size:40,round:!0})}),e.jsx("p",{children:"Email"})]}),e.jsxs("div",{className:" flex flex-col gap-5 items-center justify-center",children:[e.jsx(qt,{url:m,title:b,separator:" ",children:e.jsx(Yt,{size:40,round:!0})}),e.jsx("p",{children:"WhatsApp"})]}),e.jsxs("div",{className:" flex flex-col gap-5 items-center justify-center",children:[e.jsx(Qt,{url:m,title:b,children:e.jsx(At,{size:40,round:!0})}),e.jsx("p",{children:"X"})]}),e.jsxs("div",{className:" flex flex-col gap-5 items-center justify-center",children:[e.jsx(Pt,{url:m,title:b,children:e.jsx(Vt,{size:40,round:!0})}),e.jsx("p",{children:"Facebook"})]}),e.jsxs("div",{className:" flex flex-col gap-5 items-center justify-center",children:[e.jsx(Wt,{url:m,title:b,children:e.jsx(Kt,{size:40,round:!0})}),e.jsx("p",{children:"Telegram"})]})]}),e.jsxs("div",{className:"flex flex-col gap-5 mt-3 text-dark-blue w-full",children:[e.jsx("p",{className:" text-xl font-bold",children:"Page Link"}),e.jsxs("div",{onClick:p,className:" flex items-center justify-between gap-10 py-3 px-5 bg-gray-200 rounded-lg w-full cursor-pointer",children:[e.jsx("p",{className:" text-dark-blue font-semibold",children:m}),e.jsx(us,{size:32,className:" text-mansa-blue hover:text-dark-blue"})]}),a&&e.jsx("p",{className:" text-mansa-blue text-base",children:"Link copied to clipboard!"})]})]})})})}function As({dealDetail:t}){const[s,a]=h.useState(!1);return e.jsxs("div",{children:[e.jsxs("button",{className:`
        flex gap-5 border-4 border-dark-blue  active:bg-dark-blue active:text-white
        text-dark-blue px-5 max-md:px-2 py-2 max-md:py-1 rounded-xl transition-all duration-200 shadow
        hover:bg-dark-blue hover:text-white
        `,onClick:()=>a(!0),children:[e.jsx(hs,{}),e.jsx("p",{className:" font-bold text-lg max-md:hidden",children:"Share"})]}),s&&e.jsx(Qs,{onClose:()=>a(!1),dealDetail:t})]})}function oa(){Nt(),Ct();const[t,s]=h.useState(!1),[a,l]=h.useState(!1),[d,x]=h.useState([]),o=window.location.pathname.split("/").at(-1),[m,b]=h.useState("");localStorage.setItem("currentDealId",o);const j=localStorage.getItem("currentDealId"),p=JSON.parse(localStorage.getItem("user"));return h.useEffect(()=>{(async()=>{if(j)try{const g=await _.get(`deals/single-deal/${j}`);b(g.data.deal.owner_id);const f=g.data.deal;x(f)}catch(g){console.error("Error fetching a single deal:",g)}else console.error("Current deal ID not found in localStorage")})()},[j]),e.jsxs("div",{className:"",children:[e.jsx("div",{className:" sticky top-0 z-50",children:e.jsx(Ot,{})}),e.jsxs("div",{className:" flex flex-col gap-2 w-full mr-2 h-screen overflow-auto pt-2 px-3",children:[p&&p.id===m&&e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("div",{className:" flex items-center gap-4",children:[e.jsx("div",{onClick:()=>s(!0),className:"flex",children:e.jsx(pe,{text:"Add a New Contact"})}),e.jsx("div",{onClick:()=>l(!0),className:"flex",children:e.jsx(pe,{text:"Move a Contact"})})]}),e.jsx("div",{className:"",children:e.jsx(As,{dealDetail:d})})]}),e.jsxs("div",{className:"flex flex-row max-md:flex-col w-full items-center",children:[e.jsx("div",{className:" bg-dark-blue text-white font-bold text-2xl max-md:text-base py-6 max-md:py-2 rounded-l-xl max-md:rounded-xl w-[40%] max-md:w-full text-center",children:d&&d.deal_name&&d.deal_name.length>15?`${d.deal_name.substring(0,15)}...`:d&&d.deal_name}),e.jsxs("div",{className:" flex flex-col w-[60%] max-md:w-full",children:[e.jsxs("div",{className:" bg-mansa-blue text-white py-2 text-center rounded-tr-xl max-md:rounded-t-xl",children:["Deal Size Amount:"," ",e.jsxs("span",{className:" font-semibold",children:["$",d.deal_size?Y(d.deal_size):"0"]})]}),e.jsxs("div",{className:" flex flex-row  ",children:[e.jsxs("div",{className:" bg-[orange] text-white w-1/2 max-md:w-full py-2 pl-5 max-md:rounded-bl-xl",children:["In-Negotiation Value:"," ",e.jsxs("span",{className:" font-semibold",children:["$",d.negotiation_value?Y(d.negotiation_value):"0"]})]}),e.jsxs("div",{className:" bg-[green] text-white w-1/2 max-md:w-full py-2 pl-5 rounded-br-xl ",children:["Deal Signed Value:"," ",e.jsxs("span",{className:" font-semibold",children:["$",d.signed_value?Y(d.signed_value):"0"]})]})]})]})]}),e.jsx(qs,{})]}),t&&e.jsx(ws,{onClose:()=>s(!1)}),a&&e.jsx(Ys,{onClose:()=>l(!1)})]})}export{oa as default};
