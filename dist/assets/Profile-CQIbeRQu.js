import{u as H,b as J,r,j as e,a as d,S as g}from"./index-CdcmEy-k.js";import{B as j,f as n,g as K}from"./Reusables-vmaUGnmQ.js";import{F as X}from"./FreeTrialBanner-C86glc8f.js";import{S as Z}from"./SidePanel-BQE7iuDV.js";import{Q as ee,B as o}from"./ReactToastify-DmKxdnFv.js";import{c as se}from"./checkPasswordStrength-CgIlBevu.js";import{E as N,a as y}from"./eye-B3xlQ2mh.js";/* empty css              */import"./createLucideIcon-BnOggqer.js";function ue(){const u=H(),{isAuthenticated:v}=J(),[x,C]=r.useState(!1),[p,P]=r.useState(!1),[f,E]=r.useState(!1),[te,I]=r.useState(null),[D,B]=r.useState(!1),[V,U]=r.useState(!1),[F,z]=r.useState(!1),[l,i]=r.useState({first_name:"",last_name:"",phone_number:"",bio:"",email:"",old_password:"",new_password:"",confirm_password:""}),[$,A]=r.useState(""),[h,G]=r.useState(0),[Y,T]=r.useState(!1),m={borderBottom:"1px solid  #d3d3d3"};r.useEffect(()=>{v||u("/auth/login")},[v,u]);const W=t=>{A(t)};r.useEffect(()=>{(async()=>{try{const s=(await d.get("users/single-user")).data.user;I(s),i({first_name:s.first_name||"",last_name:s.last_name||"",phone_number:s.phone_number||"",bio:s.bio||"",email:s.email||"",old_password:"",new_password:"",confirm_password:""})}catch(a){console.error("Error fetching user details:",a)}})()},[]);const b=t=>{if(t&&t.target){const{name:a,value:s}=t.target;i(c=>({...c,[a]:s}))}},L=async t=>{t.preventDefault();const a={first_name:l.first_name,last_name:l.last_name,phone_number:$,bio:l.bio};try{const s=await d.patch("users/update-profile",a);o.success(`${s.data.message}`)}catch(s){console.log(s),o.error(`${s.response.data.message}`),B(!1)}},M=t=>{if(t&&t.target){const{name:a,value:s}=t.target;i(c=>({...c,[a]:s}))}},O=async t=>{t.preventDefault();const a={email:l.email};try{const s=await d.patch("users/update-email",a);o.success(`${s.data.message}`)}catch(s){console.log(s),o.error(`${s.response.data.message}`),U(!1)}},w=t=>{if(t&&t.target){const{name:s,value:c}=t.target;i(q=>({...q,[s]:c}))}const a=se(l.new_password);G(a),T(a>=2)},Q=async t=>{t.preventDefault();const a={old_password:l.old_password,new_password:l.new_password,confirm_password:l.confirm_password};try{if(Y){const s=await d.patch("users/change-password",a);i({old_password:"",new_password:"",confirm_password:""}),o.success(`${s.data.message}`)}else o.error("Password must be at least eight characters long.")}catch(s){console.log(s),o.error(`${s.response.data.message}`),z(!1)}},R=async()=>{g.fire({title:"Are you sure?",text:"You will not be able to recover your account!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(async t=>{if(t.isConfirmed)try{await d.delete("users/delete-account"),g.fire("Deleted!","Your account has been deleted.","success"),u("/auth/sign_up")}catch(a){console.error("Error:",a),g.fire("Error","Failed to delete user","error")}})},_=()=>{C(!x)},S=()=>{E(!f)},k=()=>{P(!p)};return e.jsxs("div",{className:"",children:[e.jsx("div",{className:" sticky top-0 z-50",children:e.jsx(X,{})}),e.jsxs("div",{className:" flex gap-3 h-screen",children:[e.jsx("div",{className:" h-screen",children:e.jsx(Z,{})}),e.jsx("div",{className:" flex flex-col w-full items-center overflow-y-auto",children:e.jsxs("div",{className:" bg-white py-10 px-6 max-sm:px-3 flex flex-col justify-center mt-10 mb-10 rounded-2xl items-start gap-10 w-[75%] max-sm:w-full",children:[e.jsxs("form",{onSubmit:L,className:" w-full",children:[e.jsxs("div",{className:" flex flex-row max-sm:flex-col justify-between pb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:" text-dark-blue font-bold text-3xl",children:"General Info"}),e.jsx("p",{className:" text-dark-blue text-base",children:"Use the form below to update your profile."})]}),e.jsx("div",{className:"",children:e.jsx(j,{text:"Update Profile",type:"submit",disabled:D})})]}),e.jsxs("div",{className:"flex flex-col gap-5 pb-8",children:[e.jsxs("div",{className:"flex max-[768px]:flex-col gap-5 w-full",children:[e.jsx(n,{type:"text",title:"First Name",placeholder:"",id:"first_name",value:l.first_name,onChange:b}),e.jsx(n,{type:"text",title:"Last Name",placeholder:"",id:"last_name",value:l.last_name,onChange:b})]}),e.jsxs("div",{className:" flex flex-col gap-1 w-1/2 max-[768px]:w-full",children:[e.jsx(K,{title:"Phone Number",placeholder:"",id:"phone_number",value:l.phone_number,onChange:W}),e.jsx("p",{className:" text-dark-blue text-base",children:"We collect this incase of emergencies."})]})]}),e.jsxs("div",{className:"flex flex-col justify-between pb-8",style:m,children:[e.jsx("h2",{className:" text-dark-blue font-bold text-xl pb-6",children:"Profile Section"}),e.jsxs("div",{className:" relative col-span-full",children:[e.jsx("label",{htmlFor:"bio",className:" absolute -top-3 left-3 bg-white px-1 text-sm leading-6 text-dark-blue font-semibold",children:"Bio"}),e.jsx("div",{className:"mt-1",children:e.jsx("textarea",{id:"bio",name:"bio",rows:2,className:"block w-full rounded-md border border-dark-blue py-2.5 pl-2 text-dark-blue focus:outline-none shadow-sm placeholder:text-gray-400 focus:border focus:border-mansa-blue sm:text-sm sm:leading-6 hover:border-mansa-blue",placeholder:"",value:l.bio,onChange:b})})]}),e.jsx("p",{className:"text-dark-blue text-base",children:"Brief description of your profile."})]})]}),e.jsxs("form",{onSubmit:O,className:" w-full pb-8",style:m,children:[e.jsxs("div",{className:" flex flex-row justify-between pb-8 max-sm:flex-col",children:[e.jsxs("div",{className:"",children:[e.jsx("h1",{className:" text-dark-blue font-bold text-3xl",children:"Email"}),e.jsx("p",{className:"text-dark-blue text-base",children:"Use this form to update your email."})]}),e.jsx("div",{className:"",children:e.jsx(j,{text:"Update Email",type:"submit",disabled:V})})]}),e.jsxs("div",{children:[e.jsx(n,{type:"email",title:"Email",placeholder:"",id:"email",value:l.email,onChange:M}),e.jsx("p",{className:"text-dark-blue text-base",children:"You will need this email to log in."})]})]}),e.jsxs("form",{onSubmit:Q,className:" w-full pb-8",style:m,children:[e.jsxs("div",{className:" flex flex-row justify-between pb-8 max-sm:flex-col",children:[e.jsxs("div",{className:"",children:[e.jsx("h1",{className:" text-dark-blue font-bold text-3xl",children:"Password"}),e.jsx("p",{className:"text-dark-blue text-base",children:"Use this form to update your password."})]}),e.jsx("div",{className:"",children:e.jsx(j,{text:"Update Password",type:"submit",disabled:F})})]}),e.jsxs("div",{className:" flex flex-col gap-2",children:[e.jsxs("div",{className:" flex flex-col gap-6",children:[e.jsx(n,{type:x?"text":"password",title:"Current Password",placeholder:"",id:"old_password",icon:x?e.jsx(N,{size:14,onClick:_}):e.jsx(y,{size:14,onClick:_}),value:l.old_password,onChange:w}),e.jsxs("div",{children:[e.jsx(n,{type:p?"text":"password",title:"New Password",placeholder:"",id:"new_password",icon:p?e.jsx(N,{size:14,onClick:k}):e.jsx(y,{size:14,onClick:k}),value:l.new_password,onChange:w}),h>0&&e.jsx("p",{className:`text-sm ${h>=2?"text-green-500":"text-red-500"}`,children:h>=2?"Strong password":"Weak password"})]}),e.jsx(n,{type:f?"text":"password",title:"Confirm Password",placeholder:"",id:"confirm_password",icon:f?e.jsx(N,{size:14,onClick:S}):e.jsx(y,{size:14,onClick:S}),value:l.confirm_password,onChange:w})]}),e.jsx("p",{className:"text-dark-blue text-base",children:"Must be at least 8 characters long."})]})]}),e.jsx("div",{className:" w-full pb-8",style:m,children:e.jsxs("div",{className:" flex flex-col gap-5 pb-8 max-sm:flex-col",children:[e.jsxs("div",{className:" flex flex-col gap-5",children:[e.jsx("h1",{className:"font-bold text-3xl text-red-500",children:"Delete Account"}),e.jsx("p",{className:"text-dark-blue text-base font-semibold",children:"By clicking the button below, you will permanently delete your account. Are you sure you want to proceed?"})]}),e.jsx("div",{className:"",children:e.jsx("button",{className:" bg-red-500  active:bg-dark-blue text-white px-12 py-4 rounded-xl transition-all duration-200 shadow hover:bg-dark-blue",onClick:()=>R(),children:e.jsx("p",{className:" font-bold",children:"Delete Account"})})})]})}),e.jsx(ee,{})]})})]})]})}export{ue as default};
