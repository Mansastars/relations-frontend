var Ae=s=>{throw TypeError(s)};var Fe=(s,a,l)=>a.has(s)||Ae("Cannot "+l);var c=(s,a,l)=>(Fe(s,a,"read from private field"),l?l.call(s):a.get(s)),R=(s,a,l)=>a.has(s)?Ae("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(s):a.set(s,l),z=(s,a,l,r)=>(Fe(s,a,"write to private field"),r?r.call(s,l):a.set(s,l),l),F=(s,a,l)=>(Fe(s,a,"access private method"),l);import{S as dt,r as ee,s as Se,a as we,n as jt,i as Ke,b as He,t as yt,f as vt,c as Nt,d as Je,e as Me,h as Xe,g as Ct,j as m,u as O,k as e,l as Ze,m as D,o as S,B as re,$ as wt,p as _t,q as St}from"./index-CAlRQ0j_.js";import{F as U,a as $e,D as Ue,b as ut,c as mt,B as be}from"./Reusables-B2HCpJyW.js";import{g as Ie,a as $t,s as Dt,r as Et,_ as je,b as Ce,u as Mt,c as It,d as kt,e as zt,f as ke,i as Ft}from"./mergeSlotProps-xzo62seT.js";import{A as ye}from"./Avatar-Ceib2EFR.js";import{U as xt}from"./user-vLyshO-3.js";import{B as Tt,T as De,a as Ee}from"./ThemeProvider-D4T4464g.js";import{X as ze}from"./x-MapowpOu.js";import{c as fe}from"./index-OyJbXWWW.js";import{r as Bt,I as Rt}from"./createSvgIcon--aKv_YS9.js";import{L as Ge,M as Ot}from"./Menu-lX3a1m_c.js";import{u as Lt}from"./index-BmLPy3bG.js";import{F as qt}from"./FreeTrialBanner-Caw_PtQf.js";import{E as Yt,a as Pt,W as Qt,b as Ut,T as Vt,c as Wt,F as At,d as Kt,e as Ht,f as Jt}from"./index-D5Rd9DsV.js";import{c as ht}from"./createLucideIcon-B94osJQJ.js";import"./tag-BYmauMhF.js";var Y,E,ve,q,ie,ue,G,Ne,me,xe,oe,ce,ae,he,I,pe,Te,Be,Re,Oe,Le,qe,Ye,ft,ot,Xt=(ot=class extends dt{constructor(a,l){super();R(this,I);R(this,Y);R(this,E);R(this,ve);R(this,q);R(this,ie);R(this,ue);R(this,G);R(this,Ne);R(this,me);R(this,xe);R(this,oe);R(this,ce);R(this,ae);R(this,he,new Set);this.options=l,z(this,Y,a),z(this,G,null),this.bindMethods(),this.setOptions(l)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(c(this,E).addObserver(this),et(c(this,E),this.options)?F(this,I,pe).call(this):this.updateResult(),F(this,I,Oe).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Pe(c(this,E),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Pe(c(this,E),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,F(this,I,Le).call(this),F(this,I,qe).call(this),c(this,E).removeObserver(this)}setOptions(a,l){const r=this.options,d=c(this,E);if(this.options=c(this,Y).defaultQueryOptions(a),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ee(this.options.enabled,c(this,E))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");F(this,I,Ye).call(this),c(this,E).setOptions(this.options),r._defaulted&&!Se(this.options,r)&&c(this,Y).getQueryCache().notify({type:"observerOptionsUpdated",query:c(this,E),observer:this});const x=this.hasListeners();x&&tt(c(this,E),d,this.options,r)&&F(this,I,pe).call(this),this.updateResult(l),x&&(c(this,E)!==d||ee(this.options.enabled,c(this,E))!==ee(r.enabled,c(this,E))||we(this.options.staleTime,c(this,E))!==we(r.staleTime,c(this,E)))&&F(this,I,Te).call(this);const i=F(this,I,Be).call(this);x&&(c(this,E)!==d||ee(this.options.enabled,c(this,E))!==ee(r.enabled,c(this,E))||i!==c(this,ae))&&F(this,I,Re).call(this,i)}getOptimisticResult(a){const l=c(this,Y).getQueryCache().build(c(this,Y),a),r=this.createResult(l,a);return Gt(this,r)&&(z(this,q,r),z(this,ue,this.options),z(this,ie,c(this,E).state)),r}getCurrentResult(){return c(this,q)}trackResult(a,l){const r={};return Object.keys(a).forEach(d=>{Object.defineProperty(r,d,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(d),l==null||l(d),a[d])})}),r}trackProp(a){c(this,he).add(a)}getCurrentQuery(){return c(this,E)}refetch({...a}={}){return this.fetch({...a})}fetchOptimistic(a){const l=c(this,Y).defaultQueryOptions(a),r=c(this,Y).getQueryCache().build(c(this,Y),l);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,l))}fetch(a){return F(this,I,pe).call(this,{...a,cancelRefetch:a.cancelRefetch??!0}).then(()=>(this.updateResult(),c(this,q)))}createResult(a,l){var t;const r=c(this,E),d=this.options,x=c(this,q),i=c(this,ie),f=c(this,ue),b=a!==r?a.state:c(this,ve),{state:g}=a;let o={...g},p=!1,h;if(l._optimisticResults){const u=this.hasListeners(),Q=!u&&et(a,l),V=u&&tt(a,r,l,d);(Q||V)&&(o={...o,...Nt(g.data,a.options)}),l._optimisticResults==="isRestoring"&&(o.fetchStatus="idle")}let{error:y,errorUpdatedAt:N,status:w}=o;if(l.select&&o.data!==void 0)if(x&&o.data===(i==null?void 0:i.data)&&l.select===c(this,Ne))h=c(this,me);else try{z(this,Ne,l.select),h=l.select(o.data),h=Je(x==null?void 0:x.data,h,l),z(this,me,h),z(this,G,null)}catch(u){z(this,G,u)}else h=o.data;if(l.placeholderData!==void 0&&h===void 0&&w==="pending"){let u;if(x!=null&&x.isPlaceholderData&&l.placeholderData===(f==null?void 0:f.placeholderData))u=x.data;else if(u=typeof l.placeholderData=="function"?l.placeholderData((t=c(this,xe))==null?void 0:t.state.data,c(this,xe)):l.placeholderData,l.select&&u!==void 0)try{u=l.select(u),z(this,G,null)}catch(Q){z(this,G,Q)}u!==void 0&&(w="success",h=Je(x==null?void 0:x.data,u,l),p=!0)}c(this,G)&&(y=c(this,G),h=c(this,me),N=Date.now(),w="error");const $=o.fetchStatus==="fetching",C=w==="pending",M=w==="error",_=C&&$,k=h!==void 0;return{status:w,fetchStatus:o.fetchStatus,isPending:C,isSuccess:w==="success",isError:M,isInitialLoading:_,isLoading:_,data:h,dataUpdatedAt:o.dataUpdatedAt,error:y,errorUpdatedAt:N,failureCount:o.fetchFailureCount,failureReason:o.fetchFailureReason,errorUpdateCount:o.errorUpdateCount,isFetched:o.dataUpdateCount>0||o.errorUpdateCount>0,isFetchedAfterMount:o.dataUpdateCount>b.dataUpdateCount||o.errorUpdateCount>b.errorUpdateCount,isFetching:$,isRefetching:$&&!C,isLoadingError:M&&!k,isPaused:o.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:M&&k,isStale:Ve(a,l),refetch:this.refetch}}updateResult(a){const l=c(this,q),r=this.createResult(c(this,E),this.options);if(z(this,ie,c(this,E).state),z(this,ue,this.options),c(this,ie).data!==void 0&&z(this,xe,c(this,E)),Se(r,l))return;z(this,q,r);const d={},x=()=>{if(!l)return!0;const{notifyOnChangeProps:i}=this.options,f=typeof i=="function"?i():i;if(f==="all"||!f&&!c(this,he).size)return!0;const j=new Set(f??c(this,he));return this.options.throwOnError&&j.add("error"),Object.keys(c(this,q)).some(b=>{const g=b;return c(this,q)[g]!==l[g]&&j.has(g)})};(a==null?void 0:a.listeners)!==!1&&x()&&(d.listeners=!0),F(this,I,ft).call(this,{...d,...a})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&F(this,I,Oe).call(this)}},Y=new WeakMap,E=new WeakMap,ve=new WeakMap,q=new WeakMap,ie=new WeakMap,ue=new WeakMap,G=new WeakMap,Ne=new WeakMap,me=new WeakMap,xe=new WeakMap,oe=new WeakMap,ce=new WeakMap,ae=new WeakMap,he=new WeakMap,I=new WeakSet,pe=function(a){F(this,I,Ye).call(this);let l=c(this,E).fetch(this.options,a);return a!=null&&a.throwOnError||(l=l.catch(jt)),l},Te=function(){F(this,I,Le).call(this);const a=we(this.options.staleTime,c(this,E));if(Ke||c(this,q).isStale||!He(a))return;const r=yt(c(this,q).dataUpdatedAt,a)+1;z(this,oe,setTimeout(()=>{c(this,q).isStale||this.updateResult()},r))},Be=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(c(this,E)):this.options.refetchInterval)??!1},Re=function(a){F(this,I,qe).call(this),z(this,ae,a),!(Ke||ee(this.options.enabled,c(this,E))===!1||!He(c(this,ae))||c(this,ae)===0)&&z(this,ce,setInterval(()=>{(this.options.refetchIntervalInBackground||vt.isFocused())&&F(this,I,pe).call(this)},c(this,ae)))},Oe=function(){F(this,I,Te).call(this),F(this,I,Re).call(this,F(this,I,Be).call(this))},Le=function(){c(this,oe)&&(clearTimeout(c(this,oe)),z(this,oe,void 0))},qe=function(){c(this,ce)&&(clearInterval(c(this,ce)),z(this,ce,void 0))},Ye=function(){const a=c(this,Y).getQueryCache().build(c(this,Y),this.options);if(a===c(this,E))return;const l=c(this,E);z(this,E,a),z(this,ve,a.state),this.hasListeners()&&(l==null||l.removeObserver(this),a.addObserver(this))},ft=function(a){Me.batch(()=>{a.listeners&&this.listeners.forEach(l=>{l(c(this,q))}),c(this,Y).getQueryCache().notify({query:c(this,E),type:"observerResultsUpdated"})})},ot);function Zt(s,a){return ee(a.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&a.retryOnMount===!1)}function et(s,a){return Zt(s,a)||s.state.data!==void 0&&Pe(s,a,a.refetchOnMount)}function Pe(s,a,l){if(ee(a.enabled,s)!==!1){const r=typeof l=="function"?l(s):l;return r==="always"||r!==!1&&Ve(s,a)}return!1}function tt(s,a,l,r){return(s!==a||ee(r.enabled,s)===!1)&&(!l.suspense||s.state.status!=="error")&&Ve(s,l)}function Ve(s,a){return ee(a.enabled,s)!==!1&&s.isStaleByTime(we(a.staleTime,s))}function Gt(s,a){return!Se(s.getCurrentResult(),a)}var ne,le,P,te,se,_e,Qe,ct,es=(ct=class extends dt{constructor(a,l){super();R(this,se);R(this,ne);R(this,le);R(this,P);R(this,te);z(this,ne,a),this.setOptions(l),this.bindMethods(),F(this,se,_e).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){var r;const l=this.options;this.options=c(this,ne).defaultMutationOptions(a),Se(this.options,l)||c(this,ne).getMutationCache().notify({type:"observerOptionsUpdated",mutation:c(this,P),observer:this}),l!=null&&l.mutationKey&&this.options.mutationKey&&Xe(l.mutationKey)!==Xe(this.options.mutationKey)?this.reset():((r=c(this,P))==null?void 0:r.state.status)==="pending"&&c(this,P).setOptions(this.options)}onUnsubscribe(){var a;this.hasListeners()||(a=c(this,P))==null||a.removeObserver(this)}onMutationUpdate(a){F(this,se,_e).call(this),F(this,se,Qe).call(this,a)}getCurrentResult(){return c(this,le)}reset(){var a;(a=c(this,P))==null||a.removeObserver(this),z(this,P,void 0),F(this,se,_e).call(this),F(this,se,Qe).call(this)}mutate(a,l){var r;return z(this,te,l),(r=c(this,P))==null||r.removeObserver(this),z(this,P,c(this,ne).getMutationCache().build(c(this,ne),this.options)),c(this,P).addObserver(this),c(this,P).execute(a)}},ne=new WeakMap,le=new WeakMap,P=new WeakMap,te=new WeakMap,se=new WeakSet,_e=function(){var l;const a=((l=c(this,P))==null?void 0:l.state)??Ct();z(this,le,{...a,isPending:a.status==="pending",isSuccess:a.status==="success",isError:a.status==="error",isIdle:a.status==="idle",mutate:this.mutate,reset:this.reset})},Qe=function(a){Me.batch(()=>{var l,r,d,x,i,f,j,b;if(c(this,te)&&this.hasListeners()){const g=c(this,le).variables,o=c(this,le).context;(a==null?void 0:a.type)==="success"?((r=(l=c(this,te)).onSuccess)==null||r.call(l,a.data,g,o),(x=(d=c(this,te)).onSettled)==null||x.call(d,a.data,null,g,o)):(a==null?void 0:a.type)==="error"&&((f=(i=c(this,te)).onError)==null||f.call(i,a.error,g,o),(b=(j=c(this,te)).onSettled)==null||b.call(j,void 0,a.error,g,o))}this.listeners.forEach(g=>{g(c(this,le))})})},ct),gt=m.createContext(!1),ts=()=>m.useContext(gt);gt.Provider;function ss(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var as=m.createContext(ss()),ns=()=>m.useContext(as);function pt(s,a){return typeof s=="function"?s(...a):!!s}function ls(){}var rs=(s,a)=>{(s.suspense||s.throwOnError)&&(a.isReset()||(s.retryOnMount=!1))},is=s=>{m.useEffect(()=>{s.clearReset()},[s])},os=({result:s,errorResetBoundary:a,throwOnError:l,query:r})=>s.isError&&!a.isReset()&&!s.isFetching&&r&&pt(l,[s.error,r]),cs=s=>{s.suspense&&typeof s.staleTime!="number"&&(s.staleTime=1e3)},ds=(s,a)=>(s==null?void 0:s.suspense)&&a.isPending,us=(s,a,l)=>a.fetchOptimistic(s).catch(()=>{l.clearReset()});function ms(s,a,l){var b,g,o,p;const r=O(),d=ts(),x=ns(),i=r.defaultQueryOptions(s);(g=(b=r.getDefaultOptions().queries)==null?void 0:b._experimental_beforeQuery)==null||g.call(b,i),i._optimisticResults=d?"isRestoring":"optimistic",cs(i),rs(i,x),is(x);const[f]=m.useState(()=>new a(r,i)),j=f.getOptimisticResult(i);if(m.useSyncExternalStore(m.useCallback(h=>{const y=d?()=>{}:f.subscribe(Me.batchCalls(h));return f.updateResult(),y},[f,d]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),m.useEffect(()=>{f.setOptions(i,{listeners:!1})},[i,f]),ds(i,j))throw us(i,f,x);if(os({result:j,errorResetBoundary:x,throwOnError:i.throwOnError,query:r.getQueryCache().get(i.queryHash)}))throw j.error;return(p=(o=r.getDefaultOptions().queries)==null?void 0:o._experimental_afterQuery)==null||p.call(o,i,j),i.notifyOnChangeProps?j:f.trackResult(j)}function W(s,a){return ms(s,Xt)}function L(s,a){const l=O(),[r]=m.useState(()=>new es(l,s));m.useEffect(()=>{r.setOptions(s)},[r,s]);const d=m.useSyncExternalStore(m.useCallback(i=>r.subscribe(Me.batchCalls(i)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),x=m.useCallback((i,f)=>{r.mutate(i,f).catch(ls)},[r]);if(d.error&&pt(r.options.throwOnError,[d.error]))throw d.error;return{...d,mutate:x,mutateAsync:d.mutate}}/**
 * @license lucide-react v0.320.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=ht("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.320.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=ht("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),st=Ie("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),at=Ie("MuiListItemIcon",["root","alignItemsFlexStart"]),nt=Ie("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function fs(s){return $t("MuiMenuItem",s)}const ge=Ie("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),gs=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],ps=(s,a)=>{const{ownerState:l}=s;return[a.root,l.dense&&a.dense,l.divider&&a.divider,!l.disableGutters&&a.gutters]},bs=s=>{const{disabled:a,dense:l,divider:r,disableGutters:d,selected:x,classes:i}=s,j=zt({root:["root",l&&"dense",a&&"disabled",!d&&"gutters",r&&"divider",x&&"selected"]},fs,i);return je({},i,j)},js=Dt(Tt,{shouldForwardProp:s=>Et(s)||s==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:ps})(({theme:s,ownerState:a})=>je({},s.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!a.disableGutters&&{paddingLeft:16,paddingRight:16},a.divider&&{borderBottom:`1px solid ${(s.vars||s).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(s.vars||s).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ge.selected}`]:{backgroundColor:s.vars?`rgba(${s.vars.palette.primary.mainChannel} / ${s.vars.palette.action.selectedOpacity})`:Ce(s.palette.primary.main,s.palette.action.selectedOpacity),[`&.${ge.focusVisible}`]:{backgroundColor:s.vars?`rgba(${s.vars.palette.primary.mainChannel} / calc(${s.vars.palette.action.selectedOpacity} + ${s.vars.palette.action.focusOpacity}))`:Ce(s.palette.primary.main,s.palette.action.selectedOpacity+s.palette.action.focusOpacity)}},[`&.${ge.selected}:hover`]:{backgroundColor:s.vars?`rgba(${s.vars.palette.primary.mainChannel} / calc(${s.vars.palette.action.selectedOpacity} + ${s.vars.palette.action.hoverOpacity}))`:Ce(s.palette.primary.main,s.palette.action.selectedOpacity+s.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:s.vars?`rgba(${s.vars.palette.primary.mainChannel} / ${s.vars.palette.action.selectedOpacity})`:Ce(s.palette.primary.main,s.palette.action.selectedOpacity)}},[`&.${ge.focusVisible}`]:{backgroundColor:(s.vars||s).palette.action.focus},[`&.${ge.disabled}`]:{opacity:(s.vars||s).palette.action.disabledOpacity},[`& + .${st.root}`]:{marginTop:s.spacing(1),marginBottom:s.spacing(1)},[`& + .${st.inset}`]:{marginLeft:52},[`& .${nt.root}`]:{marginTop:0,marginBottom:0},[`& .${nt.inset}`]:{paddingLeft:36},[`& .${at.root}`]:{minWidth:36}},!a.dense&&{[s.breakpoints.up("sm")]:{minHeight:"auto"}},a.dense&&je({minHeight:32,paddingTop:4,paddingBottom:4},s.typography.body2,{[`& .${at.root} svg`]:{fontSize:"1.25rem"}}))),lt=m.forwardRef(function(a,l){const r=Mt({props:a,name:"MuiMenuItem"}),{autoFocus:d=!1,component:x="li",dense:i=!1,divider:f=!1,disableGutters:j=!1,focusVisibleClassName:b,role:g="menuitem",tabIndex:o,className:p}=r,h=It(r,gs),y=m.useContext(Ge),N=m.useMemo(()=>({dense:i||y.dense||!1,disableGutters:j}),[y.dense,i,j]),w=m.useRef(null);Lt(()=>{d&&w.current&&w.current.focus()},[d]);const $=je({},r,{dense:N.dense,divider:f,disableGutters:j}),C=bs(r),M=kt(w,l);let _;return r.disabled||(_=o!==void 0?o:-1),e.jsx(Ge.Provider,{value:N,children:e.jsx(js,je({ref:M,role:g,tabIndex:_,component:x,focusVisibleClassName:Ze(C.focusVisible,b),className:Ze(C.root,p)},h,{ownerState:$,classes:C}))})}),{palette:ys}=ke(),{augmentColor:vs}=ys,Ns=s=>vs({color:{main:s}}),rt=ke({palette:{mainColor:Ns("#08a5aa")}}),Cs=()=>{const s=m.useRef(),a=m.useRef(),[l,r]=m.useState("");m.useState(!0),m.useEffect(()=>{s.current=window.cloudinary,a.current=s.current.createUploadWidget({cloudName:"divbyxxwx",uploadPreset:"o9yoqewt",multiple:!1,maxFiles:1,clientAllowedFormats:["jpg","jpeg","png"]},(i,f)=>{if(i)D.fire({icon:"error",title:"Upload Error",text:"An error occurred while uploading the image. Please try again or contact support."});else if(f&&f.event==="success"){const j=f.info.secure_url;r(j),localStorage.setItem("profile_pic",j)}})},[]);const d=()=>{a.current.open()},x=async()=>{r(""),localStorage.setItem(l)};return e.jsxs("div",{className:"w-full flex flex-row max-md:flex-col justify-center max-md:gap-5 items-center",children:[e.jsx("div",{className:"w-full flex justify-center",children:l?e.jsx(ye,{src:l,alt:"User's image",sx:{width:128,height:128}}):e.jsx(ye,{sx:{width:128,height:128,backgroundColor:"rgba(8,165,170,70%)",fontSize:32},children:e.jsx(xt,{size:48})})}),e.jsxs("div",{className:"flex gap-5 max-md:justify-center w-full",children:[e.jsx(De,{theme:rt,children:e.jsx(Ee,{variant:"contained",onClick:d,type:"button",color:"mainColor",children:"Upload Image"})}),e.jsx(De,{theme:rt,children:e.jsx(Ee,{variant:"outlined",onClick:x,type:"button",color:"mainColor",disabled:!l,children:"Delete Image"})})]})]})};function ws({onClose:s}){const a=m.useRef(),l=m.useRef(),r=O(),d=localStorage.getItem("currentDealId"),x=N=>{a.current===N.target&&s()},[i,f]=m.useState({title:"",firstName:"",lastName:"",company:"",dealSize:0,email:"",phoneNumber:"",notes:"",currentStage:"",datetime:""}),[j,b]=m.useState(""),[g,o]=m.useState(!1),p=N=>{if(N&&N.target){const{name:w,value:$}=N.target;f(C=>({...C,[w]:$}))}},h=L({mutationFn:async N=>{if(!d)throw new Error("Deal ID not found in localStorage");return S.post(`/deals/create-contact/${d}`,N)},onSuccess:()=>{r.invalidateQueries(["contacts","deals","followUps","negotiations","notAFits","OnGoingReviews","partners","pitches","prospects","researches","termSheets"]),localStorage.removeItem("profile_pic"),f({title:"",firstName:"",lastName:"",company:"",dealSize:0,email:"",phoneNumber:"",notes:"",currentStage:"",datetime:""}),o(!1),s(),re.success("Contact created successfully.")},onError:N=>{b("An error occurred. Please try again."),l.current.scrollIntoView({behavior:"smooth"}),o(!1)}}),y=async N=>{N.preventDefault(),o(!0);let w;i.datetime&&(w=new Date(i.datetime).toISOString());const $={deal_id:d,title:i.title,first_name:i.firstName,last_name:i.lastName,organization_name:i.company,deal_size:i.dealSize,email:i.email,phone_number:i.phoneNumber,stage:i.currentStage,meeting_date:w,notes:i.notes,profile_pic:localStorage.getItem("profile_pic")||""};h.mutate($)};return e.jsx("div",{ref:a,onClick:x,className:" fixed z-50 inset-0 bg-dark-blue bg-opacity-30 backdrop-blur-sm flex justify-center overflow-y-auto h-screen",children:e.jsx("div",{className:" mt-10 flex flex-col w-full",children:e.jsxs("div",{className:" bg-white rounded-xl px-20 max-md:px-5 py-10 flex flex-col gap-7 items-center mx-20 max-md:mx-10",children:[e.jsx("button",{onClick:s,className:" self-end hover:text-dark-blue text-red-500",children:e.jsx(ze,{size:30})}),e.jsx("h1",{ref:l,className:" text-dark-blue text-3xl max-md:text-2xl max-sm:text-xl font-extrabold",children:"Add a new contact to your pipeline"}),e.jsxs("form",{action:"",onSubmit:y,className:" flex flex-col gap-5 w-full",children:[j&&e.jsx("p",{className:" text-[#ff0000] font-semibold",children:j}),e.jsxs("div",{className:"flex flex-col gap-8 w-full",children:[e.jsx(Cs,{}),e.jsxs("div",{className:" flex flex-row flex-wrap gap-5 justify-center max-md:justify-start",children:[e.jsx(U,{type:"text",title:"Title",placeholder:"Mr./Mrs./Ms./Dr./Engr.",id:"title",value:i.title,onChange:p}),e.jsx($e,{type:"text",title:"First Name*",placeholder:"Sundi",id:"firstName",value:i.firstName,onChange:p}),e.jsx($e,{type:"text",title:"Last Name*",placeholder:"Keita",id:"lastName",value:i.lastName,onChange:p})]}),e.jsxs("div",{className:" flex flex-row flex-wrap gap-x-5 gap-y-8 justify-center max-md:justify-start",children:[e.jsx(U,{type:"text",title:"Company",placeholder:"Mansa, LLC",id:"company",value:i.company,onChange:p}),e.jsx(U,{type:"number",title:"Deal Size ($)",placeholder:"1,000,000",id:"dealSize",min:0,value:i.dealSize,onChange:p}),e.jsx(U,{type:"email",title:"Contact Email",placeholder:"sundi@sankore.com",id:"email",value:i.email,onChange:p}),e.jsx(U,{type:"tel",title:"Phone Number",placeholder:"+123456789",id:"phoneNumber",maxLength:15,value:i.phoneNumber,onChange:p}),e.jsx(Ue,{label:"Current Stage",id:"currentStage",value:i.currentStage,onChange:p}),e.jsx(ut,{title:"Meeting Date",value:i.datetime,onChange:p})]}),e.jsx("div",{children:e.jsx(mt,{value:i.notes,onChange:p})})]}),e.jsx("div",{className:" mt-8 w-full flex items-center justify-center",children:e.jsx(be,{type:"submit",disabled:g,text:"Create Contact"})})]})]})})})}function de({titles:s,titleColors:a,contents:l}){const r=fe("shadow-lg","rounded-2xl","w-full"),d={color:a,minWidth:"210px"},x={backgroundColor:"rgb(255, 255, 255)"};return e.jsxs("div",{className:" flex flex-col gap-5 items-center w-full ",children:[e.jsx("div",{className:r,style:x,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center w-full ",style:d,children:s})}),e.jsx("div",{className:" w-full overflow-x-hidden",style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:l})]})}const A=()=>e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(wt,{visible:!0,height:20,width:20,color:"#32384b",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})}),{palette:_s}=ke(),{augmentColor:Ss}=_s,$s=s=>Ss({color:{main:s}}),it=ke({palette:{mainColor:$s("#08a5aa")}}),Ds=({profile_url:s,contactId:a})=>{const l=m.useRef(),r=m.useRef(),[d,x]=m.useState(s||""),i=localStorage.getItem("currentDealId"),f=O();m.useEffect(()=>{l.current=window.cloudinary,r.current=l.current.createUploadWidget({cloudName:"divbyxxwx",uploadPreset:"o9yoqewt",multiple:!1,maxFiles:1,clientAllowedFormats:["jpg","jpeg","png"]},(p,h)=>{if(p)D.fire({icon:"error",title:"Upload Error",text:"An error occurred while uploading the image. Please try again or contact support."});else if(h&&h.event==="success"){const y=h.info.secure_url;x(y),j.mutate({contactId:a,profile_pic:y})}})},[]);const j=L({mutationFn:({contactId:p,profile_pic:h})=>S.patch(`deals/edit-contact/${i}/${p}`,{profile_pic:h}),onSuccess:()=>{re.success("Contact image updated successfully."),f.invalidateQueries(["contacts",i])},onError:()=>{re.error("Contact image failed to update, please try again.")}}),b=L({mutationFn:p=>S.patch(`/contacts/delete_photo/${i}/${p}`),onSuccess:()=>{x(""),re.success("Contact image deleted successfully."),f.invalidateQueries(["contacts",i])},onError:()=>{re.error("Contact image failed to delete, please try again.")}}),g=()=>{r.current.open()},o=async()=>{b.mutate(a)};return e.jsxs("div",{className:"w-full flex flex-row max-md:flex-col justify-center max-md:gap-5 items-center",children:[e.jsx("div",{className:"w-full flex justify-center",children:d?e.jsx(ye,{src:d,alt:"User's image",sx:{width:128,height:128}}):e.jsx(ye,{sx:{width:128,height:128,backgroundColor:"rgba(8,165,170,70%)",fontSize:32},children:e.jsx(xt,{size:48})})}),e.jsxs("div",{className:"flex gap-5 max-md:justify-center w-full",children:[e.jsx(De,{theme:it,children:e.jsx(Ee,{variant:"contained",onClick:g,type:"button",color:"mainColor",children:"Upload Image"})}),e.jsx(De,{theme:it,children:e.jsx(Ee,{variant:"outlined",onClick:o,type:"button",color:"mainColor",disabled:d===""&&!0,children:"Delete Image"})})]})]})};function K({onClose:s,contactDetails:a}){const[l,r]=m.useState(""),[d,x]=m.useState(!1),i=window.location.pathname.split("/").at(-1),f=O();let j=a.id;const b=m.useRef(),g=C=>{b.current===C.target&&s()},o=C=>{if(C&&C.target){const{name:M,value:_}=C.target;y(k=>({...k,[M]:_}))}},p=C=>C?new Date(C).toISOString().slice(0,16):"",[h,y]=m.useState({title:a.title,first_name:a.first_name,last_name:a.last_name,organization_name:a.organization_name,deal_size:a.deal_size,email:a.email,phone_number:a.phone_number,stage:a.stage,datetime:p(a.meeting_date),notes:a.notes,profile_pic:a.profile_pic});let N;h.datetime&&(N=new Date(h.datetime).toISOString());const w=L({mutationFn:async C=>{const M=localStorage.getItem("currentDealId")||i;return await S.patch(`deals/edit-contact/${M}/${a.id}`,C)},onSuccess:()=>{r(""),x(!1),s(),re.success("Contact updated successfully."),f.invalidateQueries(["contacts","deals",i,"followUps","negotiations","notAFits","OnGoingReviews","partners","pitches","prospects","researches","termSheets"])},onError:C=>{C.response.data.message==="unable to edit contact at this time"&&(s(),D.fire("Error","You are not allowed to edit this dashboard.","error")),r("Something went wrong. Please try again."),x(!1)}}),$=async C=>{if(C.preventDefault(),!(localStorage.getItem("currentDealId")||i)){console.error("Deal ID not found in localStorage");return}const _=JSON.parse(localStorage.getItem("user"));_||(s(),D.fire("Error","You are not allowed to edit this dashboard.","error"));const k={userId:_.id,title:h.title,first_name:h.first_name,last_name:h.last_name,organization_name:h.organization_name,deal_size:h.deal_size,email:h.email,phone_number:h.phone_number,stage:h.stage,meeting_date:N,notes:h.notes};w.mutate(k)};return e.jsx("div",{ref:b,onClick:g,className:"fixed z-50 inset-0 bg-dark-blue bg-opacity-30 backdrop-blur-sm flex justify-center overflow-y-auto h-screen",children:e.jsx("div",{className:" mt-10 flex flex-col",children:e.jsxs("div",{className:"bg-white rounded-xl px-20 max-md:px-5 py-10 flex flex-col gap-7 items-center mx-20 max-md:mx-10",children:[e.jsx("button",{onClick:s,className:"self-end text-red-500 hover:text-dark-blue",children:e.jsx(ze,{size:30})}),e.jsx("h1",{className:"text-dark-blue text-3xl max-md:text-2xl max-sm:text-xl font-extrabold",children:"Edit Contact Details"}),e.jsxs("form",{action:"",onSubmit:$,className:"flex flex-col gap-5",children:[l&&e.jsx("p",{className:"text-[#ff0000] font-semibold",children:l}),e.jsx(Ds,{profile_url:h.profile_pic,contactId:j}),e.jsxs("div",{className:"flex flex-row items-center justify-center flex-wrap gap-5 w-full",children:[e.jsx(U,{type:"text",title:"Title",placeholder:"Mr./Mrs./Ms./Dr./Engr.",id:"title",value:h.title,onChange:o}),e.jsx(U,{type:"text",title:"First Name",placeholder:"Sundi",id:"first_name",value:h.first_name,onChange:o}),e.jsx(U,{type:"text",title:"Last Name",placeholder:"Keita",id:"last_name",value:h.last_name,onChange:o}),e.jsx(U,{type:"text",title:"Company",placeholder:"Mansa, LLC",id:"organization_name",value:h.organization_name,onChange:o}),e.jsx(U,{type:"number",title:"Deal Size ($)",placeholder:"1,000,000",id:"deal_size",min:0,value:h.deal_size,onChange:o}),e.jsx(U,{type:"email",title:"Contact Email",placeholder:"sundi@sankore.com",id:"email",value:h.email,onChange:o}),e.jsx(U,{type:"tel",title:"Phone Number",placeholder:"+123456789",id:"phone_number",value:h.phone_number,onChange:o,maxLength:15}),e.jsx(Ue,{label:"Current Stage",id:"stage",value:h.stage,onChange:o}),e.jsx(ut,{title:"Meeting Date",value:h.datetime,onChange:o})]}),e.jsx("div",{children:e.jsx(mt,{value:h.notes,onChange:o})}),e.jsx("div",{className:"mt-8 w-full flex items-center justify-center",children:e.jsx(be,{type:"submit",disabled:d,text:"Update Contact"})})]})]})})})}const T=s=>s.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),H=(s,a)=>s.length<=a?s:`${s.substring(0,a-3)}...`,J=(s,a)=>{const l=s.replace(/\D/g,"");return l.length<=a?s:"+"+l.substring(0,a-1)+"..."},X=({profile_url:s,firstName:a,lastName:l,color:r})=>{const d=(x,i)=>`${x[0]}${i[0]}`.toUpperCase();return e.jsx(ye,{src:s||"",alt:"User's profile",sx:{width:40,height:40,backgroundColor:s?"transparent":"white",fontSize:20,color:`${r}`},children:!s&&d(a,l)})};var We={},Es=Ft;Object.defineProperty(We,"__esModule",{value:!0});var bt=We.default=void 0,Ms=Es(Bt()),Is=e;bt=We.default=(0,Ms.default)((0,Is.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert");const Z=({anchorEl:s,handleMenuClick:a,handleMenuClose:l,handleViewOrUpdate:r,handleDeleteClick:d})=>e.jsxs(e.Fragment,{children:[e.jsx(Rt,{onClick:a,className:"text-white",size:"small",children:e.jsx(bt,{htmlColor:"#ffffff"})}),e.jsxs(Ot,{anchorEl:s,open:!!s,onClose:l,children:[e.jsx(lt,{onClick:r,children:"View or Edit Contact"}),e.jsx(lt,{onClick:d,children:"Delete Contact"})]})]});function ks({borderColour:s}){const a=O(),l=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),r={border:`2px solid  ${s}`},[d,x]=m.useState(!1),[i,f]=m.useState(null),[j,b]=m.useState(null),[g,o]=m.useState(null),{data:p,error:h,isLoading:y}=W({queryKey:["researches",l],queryFn:async()=>(await S.get(`deals/research-contacts/${l}`)).data.data}),N=L({mutationFn:t=>S.delete(`contacts/delete-contact/${l}/${t}`),onSuccess:()=>{a.invalidateQueries(["researches",l]),D.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{D.fire("Error","Failed to delete contact","error")}}),w=async t=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(u=>{u.isConfirmed&&N.mutate(t)})},$=async t=>{try{const u=await S.get(`contacts/single-contact/${l}/${t}`);f(u.data.contact),x(!0)}catch(u){console.error("Error fetching contact details:",u)}},C=()=>{x(!1),f(null)},M=(t,u)=>{b(t.currentTarget),o(u)},_=()=>{b(null),o(null)},k=()=>{g&&($(g),_())},B=()=>{g&&(w(g),_())};return y?e.jsx(A,{}):h?e.jsxs("div",{children:["Error: ",h.message]}):e.jsxs(e.Fragment,{children:[p.length===0?e.jsx("div",{}):p.map(t=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...r,minWidth:"210px"},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:s},children:[e.jsx(X,{profile_url:t.profile_pic,firstName:t.first_name,lastName:t.last_name,color:s}),e.jsxs("div",{className:"flex flex-row w-full items-center",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${t.first_name} ${t.last_name}`.length>12?`${t.first_name} ${t.last_name}`.substring(0,9)+"...":`${t.first_name} ${t.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:t.organization_name?t.organization_name.length>15?t.organization_name.substring(0,12)+"...":t.organization_name:"No company"})]}),e.jsx("div",{className:" self-end",children:e.jsx(Z,{anchorEl:j,handleMenuClick:u=>M(u,t.id),handleMenuClose:_,handleViewOrUpdate:k,handleDeleteClick:B})})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size:"," ",t.deal_size?t.deal_size.length>15?"$"+T(t.deal_size.substring(0,12))+"...":"$"+T(t.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting:"," ",t.meeting_date?new Date(t.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs",children:t.email?H(t.email,28):"No email"}),e.jsx("p",{className:"text-xs",children:t.phone_number?J(t.phone_number,15):"No phone number"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap truncate",children:t.notes.length>30?t.notes.substring(0,27)+"...":t.notes})})]})]},t.id)),d&&i&&e.jsx(K,{onClose:C,contactDetails:i})]})}function zs({borderColour:s}){const a=O(),l=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),r={border:`2px solid ${s}`},[d,x]=m.useState(!1),[i,f]=m.useState(null),[j,b]=m.useState(null),[g,o]=m.useState(null),{data:p,error:h,isLoading:y}=W({queryKey:["contacts",l],queryFn:async()=>(await S.get(`deals/contacted-contacts/${l}`)).data.data}),N=L({mutationFn:t=>S.delete(`contacts/delete-contact/${l}/${t}`),onSuccess:()=>{a.invalidateQueries(["contacts",l]),D.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{D.fire("Error","Failed to delete contact","error")}}),w=async t=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(u=>{u.isConfirmed&&N.mutate(t)})},$=async t=>{try{const u=await S.get(`contacts/single-contact/${l}/${t}`);f(u.data.contact),x(!0)}catch(u){console.error("Error fetching contact details:",u)}},C=()=>{x(!1),f(null)},M=(t,u)=>{b(t.currentTarget),o(u)},_=()=>{b(null),o(null)},k=()=>{g&&($(g),_())},B=()=>{g&&(w(g),_())};return y?e.jsx(A,{}):h?e.jsxs("div",{children:["Error: ",h.message]}):e.jsxs(e.Fragment,{children:[p.length===0?e.jsx("div",{}):p.map(t=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...r,minWidth:"210px"},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:s},children:[e.jsx(X,{profile_url:t.profile_pic,firstName:t.first_name,lastName:t.last_name,color:s}),e.jsxs("div",{className:"flex flex-row w-full items-center",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${t.first_name} ${t.last_name}`.length>12?`${t.first_name} ${t.last_name}`.substring(0,9)+"...":`${t.first_name} ${t.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:t.organization_name?t.organization_name.length>15?t.organization_name.substring(0,12)+"...":t.organization_name:"No company"})]}),e.jsx("div",{className:" self-end",children:e.jsx(Z,{anchorEl:j,handleMenuClick:u=>M(u,t.id),handleMenuClose:_,handleViewOrUpdate:k,handleDeleteClick:B})})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size:"," ",t.deal_size?"$"+T(t.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting:"," ",t.meeting_date?new Date(t.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs",children:t.email?H(t.email,28):"No email"}),e.jsx("p",{className:"text-xs",children:t.phone_number?J(t.phone_number,15):"No phone number"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap truncate",children:t.notes.length>30?t.notes.substring(0,27)+"...":t.notes})})]})]},t.id)),d&&i&&e.jsx(K,{onClose:C,contactDetails:i})]})}function Fs({borderColour:s}){const a=O(),l=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),r={border:`2px solid  ${s}`},[d,x]=m.useState(!1),[i,f]=m.useState(null),[j,b]=m.useState(null),[g,o]=m.useState(null),{data:p,error:h,isLoading:y}=W({queryKey:["pitches",l],queryFn:async()=>(await S.get(`deals/pitch-contacts/${l}`)).data.data}),N=L({mutationFn:t=>S.delete(`contacts/delete-contact/${l}/${t}`),onSuccess:()=>{a.invalidateQueries(["pitches",l]),D.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{D.fire("Error","Failed to delete contact","error")}}),w=async t=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(u=>{u.isConfirmed&&N.mutate(t)})},$=async t=>{try{const u=await S.get(`contacts/single-contact/${l}/${t}`);f(u.data.contact),x(!0)}catch(u){console.error("Error fetching contact details:",u)}},C=()=>{x(!1),f(null)},M=(t,u)=>{b(t.currentTarget),o(u)},_=()=>{b(null),o(null)},k=()=>{g&&($(g),_())},B=()=>{g&&(w(g),_())};return y?e.jsx(A,{}):h?e.jsxs("div",{children:["Error: ",h.message]}):e.jsxs(e.Fragment,{children:[p.length===0?e.jsx("div",{}):p.map(t=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...r,minWidth:"210px"},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:s},children:[e.jsx(X,{profile_url:t.profile_pic,firstName:t.first_name,lastName:t.last_name,color:s}),e.jsxs("div",{className:"flex flex-row w-full items-center",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${t.first_name} ${t.last_name}`.length>12?`${t.first_name} ${t.last_name}`.substring(0,9)+"...":`${t.first_name} ${t.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:t.organization_name?t.organization_name.length>15?t.organization_name.substring(0,12)+"...":t.organization_name:"No company"})]}),e.jsx("div",{className:" self-end",children:e.jsx(Z,{anchorEl:j,handleMenuClick:u=>M(u,t.id),handleMenuClose:_,handleViewOrUpdate:k,handleDeleteClick:B})})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size:"," ",t.deal_size?t.deal_size.length>15?"$"+T(t.deal_size.substring(0,12))+"...":"$"+T(t.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting:"," ",t.meeting_date?new Date(t.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs",children:t.email?H(t.email,28):"No email"}),e.jsx("p",{className:"text-xs",children:t.phone_number?J(t.phone_number,15):"No phone number"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap truncate",children:t.notes.length>30?t.notes.substring(0,27)+"...":t.notes})})]})]},t.id)),d&&i&&e.jsx(K,{onClose:C,contactDetails:i})]})}function Ts({borderColour:s}){const a=O(),l=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),r={border:`2px solid  ${s}`},[d,x]=m.useState(!1),[i,f]=m.useState(null),[j,b]=m.useState(null),[g,o]=m.useState(null),{data:p,error:h,isLoading:y}=W({queryKey:["negotiations",l],queryFn:async()=>(await S.get(`deals/negotiation-contacts/${l}`)).data.data}),N=L({mutationFn:t=>S.delete(`contacts/delete-contact/${l}/${t}`),onSuccess:()=>{a.invalidateQueries(["negotiations",l]),D.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{D.fire("Error","Failed to delete contact","error")}}),w=async t=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(u=>{u.isConfirmed&&N.mutate(t)})},$=async t=>{try{const u=await S.get(`contacts/single-contact/${l}/${t}`);f(u.data.contact),x(!0)}catch(u){console.error("Error fetching contact details:",u)}},C=()=>{x(!1),f(null)},M=(t,u)=>{b(t.currentTarget),o(u)},_=()=>{b(null),o(null)},k=()=>{g&&($(g),_())},B=()=>{g&&(w(g),_())};return y?e.jsx(A,{}):h?e.jsxs("div",{children:["Error: ",h.message]}):e.jsxs(e.Fragment,{children:[p.length===0?e.jsx("div",{}):p.map(t=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...r,minWidth:"210px"},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:s},children:[e.jsx(X,{profile_url:t.profile_pic,firstName:t.first_name,lastName:t.last_name,color:s}),e.jsxs("div",{className:"flex flex-row w-full items-center",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${t.first_name} ${t.last_name}`.length>12?`${t.first_name} ${t.last_name}`.substring(0,9)+"...":`${t.first_name} ${t.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:t.organization_name?t.organization_name.length>15?t.organization_name.substring(0,12)+"...":t.organization_name:"No company"})]}),e.jsx("div",{className:" self-end",children:e.jsx(Z,{anchorEl:j,handleMenuClick:u=>M(u,t.id),handleMenuClose:_,handleViewOrUpdate:k,handleDeleteClick:B})})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size:"," ",t.deal_size?t.deal_size.length>15?"$"+T(t.deal_size.substring(0,15))+"...":"$"+T(t.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting:"," ",t.meeting_date?new Date(t.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs",children:t.email?H(t.email,27):"No email"}),e.jsx("p",{className:"text-xs",children:t.phone_number?J(t.phone_number,15):"No phone number"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap truncate",children:t.notes.length>30?t.notes.substring(0,27)+"...":t.notes})})]})]},t.id)),d&&i&&e.jsx(K,{onClose:C,contactDetails:i})]})}function Bs({borderColour:s}){const a=O(),l=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),r={border:`2px solid  ${s}`},[d,x]=m.useState(!1),[i,f]=m.useState(null),[j,b]=m.useState(null),[g,o]=m.useState(null),{data:p,error:h,isLoading:y}=W({queryKey:["deals",l],queryFn:async()=>(await S.get(`deals/deal-contacts/${l}`)).data.data}),N=L({mutationFn:t=>S.delete(`contacts/delete-contact/${l}/${t}`),onSuccess:()=>{a.invalidateQueries(["deals",l]),D.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{D.fire("Error","Failed to delete contact","error")}}),w=async t=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(u=>{u.isConfirmed&&N.mutate(t)})},$=async t=>{try{const u=await S.get(`contacts/single-contact/${l}/${t}`);f(u.data.contact),x(!0)}catch(u){console.error("Error fetching contact details:",u)}},C=()=>{x(!1),f(null)},M=(t,u)=>{b(t.currentTarget),o(u)},_=()=>{b(null),o(null)},k=()=>{g&&($(g),_())},B=()=>{g&&(w(g),_())};return y?e.jsx(A,{}):h?e.jsxs("div",{children:["Error: ",h.message]}):e.jsxs(e.Fragment,{children:[p.length===0?e.jsx("div",{}):p.map(t=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...r,minWidth:"210px"},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:s},children:[e.jsx(X,{profile_url:t.profile_pic,firstName:t.first_name,lastName:t.last_name,color:s}),e.jsxs("div",{className:"flex flex-row w-full items-center",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${t.first_name} ${t.last_name}`.length>12?`${t.first_name} ${t.last_name}`.substring(0,9)+"...":`${t.first_name} ${t.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:t.organization_name?t.organization_name.length>15?t.organization_name.substring(0,12)+"...":t.organization_name:"No company"})]}),e.jsx("div",{className:" self-end",children:e.jsx(Z,{anchorEl:j,handleMenuClick:u=>M(u,t.id),handleMenuClose:_,handleViewOrUpdate:k,handleDeleteClick:B})})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size:"," ",t.deal_size?t.deal_size.length>15?"$"+T(t.deal_size.substring(0,15))+"...":"$"+T(t.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting:"," ",t.meeting_date?new Date(t.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs",children:t.email?H(t.email,27):"No email"}),e.jsx("p",{className:"text-xs",children:t.phone_number?J(t.phone_number,15):"No phone number"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap",children:t.notes.length>30?t.notes.substring(0,27)+"...":t.notes})})]})]},t.id)),d&&i&&e.jsx(K,{onClose:C,contactDetails:i})]})}function Rs({borderColour:s}){const a=O(),l=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),r={border:`2px solid  ${s}`},[d,x]=m.useState(!1),[i,f]=m.useState(null),[j,b]=m.useState(null),[g,o]=m.useState(null),{data:p,error:h,isLoading:y}=W({queryKey:["notAFits",l],queryFn:async()=>(await S.get(`deals/rejection-contacts/${l}`)).data.data}),N=L({mutationFn:t=>S.delete(`contacts/delete-contact/${l}/${t}`),onSuccess:()=>{a.invalidateQueries(["notAFits",l]),D.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{D.fire("Error","Failed to delete contact","error")}}),w=async t=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(u=>{u.isConfirmed&&N.mutate(t)})},$=async t=>{try{const u=await S.get(`contacts/single-contact/${l}/${t}`);f(u.data.contact),x(!0)}catch(u){console.error("Error fetching contact details:",u)}},C=()=>{x(!1),f(null)},M=(t,u)=>{b(t.currentTarget),o(u)},_=()=>{b(null),o(null)},k=()=>{g&&($(g),_())},B=()=>{g&&(w(g),_())};return y?e.jsx(A,{}):h?e.jsxs("div",{children:["Error: ",h.message]}):e.jsxs(e.Fragment,{children:[p.length===0?e.jsx("div",{}):p.map(t=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40 ",style:{...r,minWidth:"210px"},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:s},children:[e.jsx(X,{profile_url:t.profile_pic,firstName:t.first_name,lastName:t.last_name,color:s}),e.jsxs("div",{className:"flex flex-row w-full items-center",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${t.first_name} ${t.last_name}`.length>12?`${t.first_name} ${t.last_name}`.substring(0,9)+"...":`${t.first_name} ${t.last_name}`}),e.jsx("p",{className:"text-sm text-white",children:t.organization_name?t.organization_name.length>15?t.organization_name.substring(0,12)+"...":t.organization_name:"No company"})]}),e.jsx("div",{className:" self-end",children:e.jsx(Z,{anchorEl:j,handleMenuClick:u=>M(u,t.id),handleMenuClose:_,handleViewOrUpdate:k,handleDeleteClick:B})})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size:"," ",t.deal_size?t.deal_size.length>15?"$"+T(t.deal_size.substring(0,12))+"...":"$"+T(t.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting:"," ",t.meeting_date?new Date(t.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs",children:t.email?H(t.email,27):"No email"}),e.jsx("p",{className:"text-xs",children:t.phone_number?J(t.phone_number,15):"No phone number"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap truncate",children:t.notes.length>30?t.notes.substring(0,27)+"...":t.notes})})]})]},t.id)),d&&i&&e.jsx(K,{onClose:C,contactDetails:i})]})}function Os({borderColour:s,titleColors:a}){const l=O(),r=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),d={border:`2px solid  ${s}`},x=fe("shadow-lg","rounded-2xl","w-full"),i={color:a,minWidth:"210px"},f={backgroundColor:"rgb(255, 255, 255)"},[j,b]=m.useState(!1),[g,o]=m.useState(null),[p,h]=m.useState(null),[y,N]=m.useState(null),{data:w,error:$,isLoading:C}=W({queryKey:["prospects",r],queryFn:async()=>(await S.get(`deals/prospect-contacts/${r}`)).data.data}),M=L({mutationFn:n=>S.delete(`contacts/delete-contact/${r}/${n}`),onSuccess:()=>{l.invalidateQueries(["prospects",r]),D.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{D.fire("Error","Failed to delete contact","error")}}),_=async n=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(v=>{v.isConfirmed&&M.mutate(n)})},k=async n=>{try{const v=await S.get(`contacts/single-contact/${r}/${n}`);o(v.data.contact),b(!0)}catch(v){console.error("Error fetching contact details:",v)}},B=()=>{b(!1),o(null)},t=(n,v)=>{h(n.currentTarget),N(v)},u=()=>{h(null),N(null)},Q=()=>{y&&(k(y),u())},V=()=>{y&&(_(y),u())};return C?e.jsx(A,{}):$?e.jsxs("div",{children:["Error: ",$.message]}):e.jsxs(e.Fragment,{children:[w.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:x,style:f,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:i,children:"Prospect"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:w.map(n=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...d,minWidth:"210px"},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:s},children:[e.jsx(X,{profile_url:n.profile_pic,firstName:n.first_name,lastName:n.last_name,color:s}),e.jsxs("div",{className:"flex flex-row w-full items-center",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${n.first_name} ${n.last_name}`.length>12?`${n.first_name} ${n.last_name}`.substring(0,9)+"...":`${n.first_name} ${n.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:n.organization_name?n.organization_name.length>15?n.organization_name.substring(0,12)+"...":n.organization_name:"No company"})]}),e.jsx("div",{className:" self-end",children:e.jsx(Z,{anchorEl:p,handleMenuClick:v=>t(v,n.id),handleMenuClose:u,handleViewOrUpdate:Q,handleDeleteClick:V})})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size:"," ",n.deal_size?n.deal_size.length>15?"$"+T(n.deal_size.substring(0,12))+"...":"$"+T(n.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting:"," ",n.meeting_date?new Date(n.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs",children:n.email?H(n.email,28):"No email"}),e.jsx("p",{className:"text-xs",children:n.phone_number?J(n.phone_number,15):"No phone number"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap truncate",children:n.notes.length>32?n.notes.substring(0,29)+"...":n.notes})})]})]},n.id))})]}):null,j&&g&&e.jsx(K,{onClose:B,contactDetails:g})]})}function Ls({borderColour:s,titleColors:a}){const l=O(),r=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),d={border:`2px solid  ${s}`},x=fe("shadow-lg","rounded-2xl","w-full"),i={color:a,minWidth:"210px"},f={backgroundColor:"rgb(255, 255, 255)"},[j,b]=m.useState(!1),[g,o]=m.useState(null),[p,h]=m.useState(null),[y,N]=m.useState(null),{data:w,error:$,isLoading:C}=W({queryKey:["OnGoingReviews",r],queryFn:async()=>(await S.get(`deals/review-contacts/${r}`)).data.data}),M=L({mutationFn:n=>S.delete(`contacts/delete-contact/${r}/${n}`),onSuccess:()=>{l.invalidateQueries(["OnGoingReviews",r]),D.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{D.fire("Error","Failed to delete contact","error")}}),_=async n=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(v=>{v.isConfirmed&&M.mutate(n)})},k=async n=>{try{const v=await S.get(`contacts/single-contact/${r}/${n}`);o(v.data.contact),b(!0)}catch(v){console.error("Error fetching contact details:",v)}},B=()=>{b(!1),o(null)},t=(n,v)=>{h(n.currentTarget),N(v)},u=()=>{h(null),N(null)},Q=()=>{y&&(k(y),u())},V=()=>{y&&(_(y),u())};return C?e.jsx(A,{}):$?e.jsxs("div",{children:["Error: ",$.message]}):e.jsxs(e.Fragment,{children:[w.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:x,style:f,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:i,children:"Review"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:w.map(n=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...d,minWidth:"210px"},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:s},children:[e.jsx(X,{profile_url:n.profile_pic,firstName:n.first_name,lastName:n.last_name,color:s}),e.jsxs("div",{className:"flex flex-row w-full items-center",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${n.first_name} ${n.last_name}`.length>12?`${n.first_name} ${n.last_name}`.substring(0,9)+"...":`${n.first_name} ${n.last_name}`}),e.jsx("p",{className:"text-sm text-white",children:n.organization_name?n.organization_name.length>15?n.organization_name.substring(0,12)+"...":n.organization_name:"No company"})]}),e.jsx("div",{className:" self-end",children:e.jsx(Z,{anchorEl:p,handleMenuClick:v=>t(v,n.id),handleMenuClose:u,handleViewOrUpdate:Q,handleDeleteClick:V})})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size:"," ",n.deal_size?n.deal_size.length>15?"$"+T(n.deal_size.substring(0,12))+"...":"$"+T(n.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting:"," ",n.meeting_date?new Date(n.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs",children:n.email?H(n.email,28):"No email"}),e.jsx("p",{className:"text-xs",children:n.phone_number?J(n.phone_number,15):"No phone number"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap truncate",children:n.notes.length>32?n.notes.substring(0,29)+"...":n.notes})})]})]},n.id))})]}):null,j&&g&&e.jsx(K,{onClose:B,contactDetails:g})]})}function qs({borderColour:s,titleColors:a}){const l=O(),r=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),d={border:`2px solid  ${s}`},x=fe("shadow-lg","rounded-2xl","w-full"),i={color:a,minWidth:"210px"},f={backgroundColor:"rgb(255, 255, 255)"},[j,b]=m.useState(!1),[g,o]=m.useState(null),[p,h]=m.useState(null),[y,N]=m.useState(null),{data:w,error:$,isLoading:C}=W({queryKey:["partners",r],queryFn:async()=>(await S.get(`deals/partner-contacts/${r}`)).data.data}),M=L({mutationFn:n=>S.delete(`contacts/delete-contact/${r}/${n}`),onSuccess:()=>{l.invalidateQueries(["partners",r]),D.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{D.fire("Error","Failed to delete contact","error")}}),_=async n=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(v=>{v.isConfirmed&&M.mutate(n)})},k=async n=>{try{const v=await S.get(`contacts/single-contact/${r}/${n}`);o(v.data.contact),b(!0)}catch(v){console.error("Error fetching contact details:",v)}},B=()=>{b(!1),o(null)},t=(n,v)=>{h(n.currentTarget),N(v)},u=()=>{h(null),N(null)},Q=()=>{y&&(k(y),u())},V=()=>{y&&(_(y),u())};return C?e.jsx(A,{}):$?e.jsxs("div",{children:["Error: ",$.message]}):e.jsxs(e.Fragment,{children:[w.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:x,style:f,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:i,children:"Partner"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:w.map(n=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...d,minWidth:"210px"},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:s},children:[e.jsx(X,{profile_url:n.profile_pic,firstName:n.first_name,lastName:n.last_name,color:s}),e.jsxs("div",{className:"flex flex-row w-full items-center",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${n.first_name} ${n.last_name}`.length>12?`${n.first_name} ${n.last_name}`.substring(0,9)+"...":`${n.first_name} ${n.last_name}`}),e.jsx("p",{className:"text-sm text-white",children:n.organization_name?n.organization_name.length>15?n.organization_name.substring(0,12)+"...":n.organization_name:"No company"})]}),e.jsx("div",{className:" self-end",children:e.jsx(Z,{anchorEl:p,handleMenuClick:v=>t(v,n.id),handleMenuClose:u,handleViewOrUpdate:Q,handleDeleteClick:V})})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size:"," ",n.deal_size?n.deal_size.length>15?"$"+T(n.deal_size.substring(0,12))+"...":"$"+T(n.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting:"," ",n.meeting_date?new Date(n.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs",children:n.email?H(n.email,28):"No email"}),e.jsx("p",{className:"text-xs",children:n.phone_number?J(n.phone_number,15):"No phone number"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap truncate",children:n.notes.length>32?n.notes.substring(0,29)+"...":n.notes})})]})]},n.id))})]}):null,j&&g&&e.jsx(K,{onClose:B,contactDetails:g})]})}function Ys({borderColour:s,titleColors:a}){const l=O(),r=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),d={border:`2px solid  ${s}`},x=fe("shadow-lg","rounded-2xl","w-full"),i={color:a,minWidth:"210px"},f={backgroundColor:"rgb(255, 255, 255)"},[j,b]=m.useState(!1),[g,o]=m.useState(null),[p,h]=m.useState(null),[y,N]=m.useState(null),{data:w,error:$,isLoading:C}=W({queryKey:["termSheets",r],queryFn:async()=>(await S.get(`deals/offer-contacts/${r}`)).data.data}),M=L({mutationFn:n=>S.delete(`contacts/delete-contact/${r}/${n}`),onSuccess:()=>{l.invalidateQueries(["termSheets",r]),D.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{D.fire("Error","Failed to delete contact","error")}}),_=async n=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(v=>{v.isConfirmed&&M.mutate(n)})},k=async n=>{try{const v=await S.get(`contacts/single-contact/${r}/${n}`);o(v.data.contact),b(!0)}catch(v){console.error("Error fetching contact details:",v)}},B=()=>{b(!1),o(null)},t=(n,v)=>{h(n.currentTarget),N(v)},u=()=>{h(null),N(null)},Q=()=>{y&&(k(y),u())},V=()=>{y&&(_(y),u())};return C?e.jsx(A,{}):$?e.jsxs("div",{children:["Error: ",$.message]}):e.jsxs(e.Fragment,{children:[w.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:x,style:f,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:i,children:"Term Sheet"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:w.map(n=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...d,minWidth:"210px"},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:s},children:[e.jsx(X,{profile_url:n.profile_pic,firstName:n.first_name,lastName:n.last_name,color:s}),e.jsxs("div",{className:"flex flex-row w-full items-center",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white",children:`${n.first_name} ${n.last_name}`.length>12?`${n.first_name} ${n.last_name}`.substring(0,9)+"...":`${n.first_name} ${n.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:n.organization_name?n.organization_name.length>15?n.organization_name.substring(0,12)+"...":n.organization_name:"No company"})]}),e.jsx("div",{className:" self-end",children:e.jsx(Z,{anchorEl:p,handleMenuClick:v=>t(v,n.id),handleMenuClose:u,handleViewOrUpdate:Q,handleDeleteClick:V})})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size:"," ",n.deal_size?n.deal_size.length>15?"$"+T(n.deal_size.substring(0,12))+"...":"$"+T(n.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting:"," ",n.meeting_date?new Date(n.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs",children:n.email?H(n.email,28):"No email"}),e.jsx("p",{className:"text-xs",children:n.phone_number?J(n.phone_number,15):"No phone number"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap truncate",children:n.notes.length>32?n.notes.substring(0,29)+"...":n.notes})})]})]},n.id))})]}):null,j&&g&&e.jsx(K,{onClose:B,contactDetails:g})]})}function Ps({borderColour:s,titleColors:a}){const l=O(),r=localStorage.getItem("currentDealId")||window.location.pathname.split("/").at(-1),d={border:`2px solid  ${s}`},x=fe("shadow-lg","rounded-2xl","w-full"),i={color:a,minWidth:"210px"},f={backgroundColor:"rgb(255, 255, 255)"},[j,b]=m.useState(!1),[g,o]=m.useState(null),[p,h]=m.useState(null),[y,N]=m.useState(null),{data:w,error:$,isLoading:C}=W({queryKey:["followUps",r],queryFn:async()=>(await S.get(`deals/followup-contacts/${r}`)).data.data}),M=L({mutationFn:n=>S.delete(`contacts/delete-contact/${r}/${n}`),onSuccess:()=>{l.invalidateQueries(["followUps",r]),D.fire("Deleted!","Your contact entry has been deleted.","success")},onError:()=>{D.fire("Error","Failed to delete contact","error")}}),_=async n=>{D.fire({title:"Are you sure?",text:"You will not be able to recover this contact entry!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(v=>{v.isConfirmed&&M.mutate(n)})},k=async n=>{try{const v=await S.get(`contacts/single-contact/${r}/${n}`);o(v.data.contact),b(!0)}catch(v){console.error("Error fetching contact details:",v)}},B=()=>{b(!1),o(null)},t=(n,v)=>{h(n.currentTarget),N(v)},u=()=>{h(null),N(null)},Q=()=>{y&&(k(y),u())},V=()=>{y&&(_(y),u())};return C?e.jsx(A,{}):$?e.jsxs("div",{children:["Error: ",$.message]}):e.jsxs(e.Fragment,{children:[w.length>0?e.jsxs("div",{className:" flex flex-col gap-5 items-center",children:[e.jsx("div",{className:x,style:f,children:e.jsx("div",{className:"font-bold text-xl p-5 text-center",style:i,children:"Follow-up"})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:w.map(n=>e.jsxs("div",{className:"flex flex-col rounded-2xl mb-2 h-40",style:{...d,minWidth:"210px"},children:[e.jsxs("div",{className:"flex flex-row p-2 rounded-t-2xl border-b-dark-blue items-center gap-2",style:{background:s},children:[e.jsx(X,{profile_url:n.profile_pic,firstName:n.first_name,lastName:n.last_name,color:s}),e.jsxs("div",{className:"flex flex-row w-full items-center",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("p",{className:"font-extrabold text-sm text-white truncate",children:`${n.first_name} ${n.last_name}`.length>12?`${n.first_name} ${n.last_name}`.substring(0,9)+"...":`${n.first_name} ${n.last_name}`}),e.jsx("p",{className:"text-sm text-white truncate",children:n.organization_name?n.organization_name.length>15?n.organization_name.substring(0,12)+"...":n.organization_name:"No company"})]}),e.jsx("div",{className:" self-end",children:e.jsx(Z,{anchorEl:p,handleMenuClick:v=>t(v,n.id),handleMenuClose:u,handleViewOrUpdate:Q,handleDeleteClick:V})})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 items-start bg-light-grey rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold",children:["Deal Size:"," ",n.deal_size?n.deal_size.length>15?"$"+T(n.deal_size.substring(0,12))+"...":"$"+T(n.deal_size):"$0"]}),e.jsxs("p",{className:"text-xs font-semibold",children:["Meeting:"," ",n.meeting_date?new Date(n.meeting_date).toLocaleString():"Nil"]}),e.jsx("p",{className:"text-xs",children:n.email?H(n.email,28):"No email"}),e.jsx("p",{className:"text-xs",children:n.phone_number?J(n.phone_number,15):"No phone number"})]}),e.jsx("div",{className:"flex flex-col justify-center items-start",children:e.jsx("p",{className:"text-xs text-wrap truncate",children:n.notes.length>32?n.notes.substring(0,29)+"...":n.notes})})]})]},n.id))})]}):null,j&&g&&e.jsx(K,{onClose:B,contactDetails:g})]})}const Qs=()=>{const s=e.jsx(ks,{borderColour:"rgb(0, 0, 139)"}),a=e.jsx(zs,{borderColour:"#87CEEB"}),l=e.jsx(Fs,{borderColour:"#08a5aa"}),r=e.jsx(Ts,{borderColour:"orange"}),d=e.jsx(Bs,{borderColour:"green"}),x=e.jsx(Rs,{borderColour:"#FF0000"});return e.jsxs("div",{className:"flex gap-2 pb-10 w-full overflow-y-auto overflow-x-auto",children:[e.jsx(de,{titles:"Research",titleColors:"rgb(0, 0, 139)",contents:s}),e.jsx(Os,{borderColour:"rgb(115, 147, 179)",titleColors:"rgb(115, 147, 179)"}),e.jsx(de,{titles:"Contacted",titleColors:"#87CEEB",contents:a}),e.jsx(de,{titles:"Pitch",titleColors:"#08a5aa",contents:l}),e.jsx(Ls,{borderColour:"#FDDC5C",titleColors:"#FDDC5C"}),e.jsx(qs,{borderColour:"#E67451",titleColors:"#E67451"}),e.jsx(Ys,{titleColors:"#000000",borderColour:"#000000"}),e.jsx(de,{titles:"Negotiation",titleColors:"orange",contents:r}),e.jsx(de,{titles:"Deal",titleColors:"green",contents:d}),e.jsx(Ps,{borderColour:"#D3D3D3",titleColors:"#D3D3D3"}),e.jsx(de,{titles:"Not a Fit",titleColors:"#FF0000",contents:x})]})};function Us({onClose:s}){const a=m.useRef(),l=o=>{a.current===o.target&&s()},[r,d]=m.useState(""),[x,i]=m.useState({firstName:"",lastName:"",moveContact:""}),f=O(),j=L({mutationFn:async o=>{const p=localStorage.getItem("currentDealId");if(!p)throw new Error("Deal ID not found in localStorage");return await S.patch(`/deals/change-stage/${p}`,o)},onSuccess:()=>{f.invalidateQueries(["contacts","deals","followUps","negotiations","notAFits","OnGoingReviews","partners","pitches","prospects","researches","termSheets"]),i({firstName:"",lastName:"",moveContact:""}),s(),re.success("Contact moved successfully.")},onError:()=>{d("Something went wrong. Please try again.")}}),b=o=>{if(o&&o.target){const{name:p,value:h}=o.target;i(y=>({...y,[p]:h}))}},g=o=>{o.preventDefault();const p={first_name:x.firstName,last_name:x.lastName,stage:x.moveContact};j.mutate(p)};return e.jsx("div",{ref:a,onClick:l,className:" fixed z-50 inset-0 bg-dark-blue bg-opacity-30 backdrop-blur-sm flex justify-center overflow-y-auto h-screen",children:e.jsx("div",{className:" mt-10 flex flex-col",children:e.jsxs("div",{className:" bg-white rounded-xl px-20 py-10 flex flex-col gap-5 items-center mx-4",children:[e.jsx("button",{onClick:s,className:" place-self-end text-red-600 hover:text-dark-blue",children:e.jsx(ze,{size:30})}),e.jsx("h1",{className:" text-dark-blue text-3xl font-extrabold mb-5",children:"Move contacts within your pipeline"}),e.jsxs("form",{action:"",onSubmit:g,className:" flex flex-col gap-5",children:[j.isError&&e.jsx("p",{className:" text-[#ff0000] font-semibold",children:r}),e.jsxs("div",{className:"flex flex-row items-center justify-center flex-wrap gap-5",children:[e.jsx($e,{type:"text",title:"First Name*",placeholder:"Sundi",id:"firstName",value:x.firstName,onChange:b}),e.jsx($e,{type:"text",title:"Last Name*",placeholder:"Keita",id:"lastName",value:x.lastName,onChange:b})]}),e.jsx("div",{className:"flex flex-row items-center justify-center flex-wrap gap-5",children:e.jsx(Ue,{label:"Move Contact To",id:"moveContact",value:x.moveContact,onChange:b})}),e.jsx("div",{className:" mt-8 w-full flex items-center justify-center",children:e.jsx(be,{type:"submit",disabled:j.isLoading,text:"Move Contact"})})]})]})})})}function Vs({onClose:s,dealDetail:a}){const[l,r]=m.useState(!1),d=m.useRef(),x=JSON.parse(localStorage.getItem("user")),i=o=>{d.current===o.target&&s()},f=`https://crm.mansastars.com${window.location.pathname}`,j=`Hi, ${x.first_name} ${x.last_name} has invited you to collaborate on the Mansa CRM Project titled "${a.deal_name}". Mansa’s CRM helps you manage your leads, target prospects, dealflow and manage follow-ups efficiently and affordably. Click the link below to accept the invitation and get started!`,b="Check out this dashboard",g=()=>{navigator.clipboard.writeText(f),r(!0),setTimeout(()=>{r(!1)},2e3)};return e.jsx("div",{ref:d,onClick:i,className:" fixed z-50 inset-0 bg-dark-blue bg-opacity-30 backdrop-blur-sm flex justify-center overflow-y-auto h-screen",children:e.jsx("div",{className:" mt-10 flex flex-col",children:e.jsxs("div",{className:" bg-white rounded-xl px-10 py-10 flex flex-col gap-5 items-center mx-4",children:[e.jsx("button",{onClick:s,className:" place-self-end text-red-600 hover:text-dark-blue",children:e.jsx(ze,{size:30})}),e.jsx("h1",{className:" text-dark-blue text-3xl font-extrabold mb-5",children:"Share Dashboard"}),e.jsxs("div",{className:" flex max-md:flex-wrap items-center justify-center gap-5 text-dark-blue font-semibold",children:[e.jsxs("div",{className:" flex flex-col gap-5 items-center justify-center",children:[e.jsx(Yt,{url:f,subject:b,body:j,children:e.jsx(Pt,{size:40,round:!0})}),e.jsx("p",{children:"Email"})]}),e.jsxs("div",{className:" flex flex-col gap-5 items-center justify-center",children:[e.jsx(Qt,{url:f,title:j,separator:" ",children:e.jsx(Ut,{size:40,round:!0})}),e.jsx("p",{children:"WhatsApp"})]}),e.jsxs("div",{className:" flex flex-col gap-5 items-center justify-center",children:[e.jsx(Vt,{url:f,title:j,children:e.jsx(Wt,{size:40,round:!0})}),e.jsx("p",{children:"X"})]}),e.jsxs("div",{className:" flex flex-col gap-5 items-center justify-center",children:[e.jsx(At,{url:f,title:j,children:e.jsx(Kt,{size:40,round:!0})}),e.jsx("p",{children:"Facebook"})]}),e.jsxs("div",{className:" flex flex-col gap-5 items-center justify-center",children:[e.jsx(Ht,{url:f,title:j,children:e.jsx(Jt,{size:40,round:!0})}),e.jsx("p",{children:"Telegram"})]})]}),e.jsxs("div",{className:"flex flex-col gap-5 mt-3 text-dark-blue w-full",children:[e.jsx("p",{className:" text-xl font-bold",children:"Page Link"}),e.jsxs("div",{onClick:g,className:" flex items-center justify-between gap-10 py-3 px-5 bg-gray-200 rounded-lg w-full cursor-pointer",children:[e.jsx("p",{className:" text-dark-blue font-semibold",children:f}),e.jsx(xs,{size:32,className:" text-mansa-blue hover:text-dark-blue"})]}),l&&e.jsx("p",{className:" text-mansa-blue text-base",children:"Link copied to clipboard!"})]})]})})})}function Ws({dealDetail:s}){const[a,l]=m.useState(!1);return e.jsxs("div",{children:[e.jsxs("button",{className:`
        flex gap-5 border-4 border-dark-blue  active:bg-dark-blue active:text-white
        text-dark-blue px-5 max-md:px-2 py-2 max-md:py-1 rounded-xl transition-all duration-200 shadow
        hover:bg-dark-blue hover:text-white
        `,onClick:()=>l(!0),children:[e.jsx(hs,{}),e.jsx("p",{className:" font-bold text-lg max-md:hidden",children:"Share"})]}),a&&e.jsx(Vs,{onClose:()=>l(!1),dealDetail:s})]})}function ca(){_t(),St();const[s,a]=m.useState(!1),[l,r]=m.useState(!1),[d,x]=m.useState([]),i=window.location.pathname.split("/").at(-1),[f,j]=m.useState("");localStorage.setItem("currentDealId",i);const b=localStorage.getItem("currentDealId"),g=JSON.parse(localStorage.getItem("user"));return m.useEffect(()=>{(async()=>{if(b)try{const p=await S.get(`deals/single-deal/${b}`);j(p.data.deal.owner_id);const h=p.data.deal;x(h)}catch(p){console.error("Error fetching a single deal:",p)}else console.error("Current deal ID not found in localStorage")})()},[b]),e.jsxs("div",{className:"",children:[e.jsx("div",{className:" sticky top-0 z-50",children:e.jsx(qt,{})}),e.jsxs("div",{className:" flex flex-col gap-2 w-full mr-2 h-screen overflow-auto pt-2 px-3",children:[g&&g.id===f&&e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("div",{className:" flex items-center gap-4",children:[e.jsx("div",{onClick:()=>a(!0),className:"flex",children:e.jsx(be,{text:"Add a New Contact"})}),e.jsx("div",{onClick:()=>r(!0),className:"flex",children:e.jsx(be,{text:"Move a Contact"})})]}),e.jsx("div",{className:"",children:e.jsx(Ws,{dealDetail:d})})]}),e.jsxs("div",{className:"flex flex-row max-md:flex-col w-full items-center",children:[e.jsx("div",{className:" bg-dark-blue text-white font-bold text-2xl max-md:text-base py-6 max-md:py-2 rounded-l-xl max-md:rounded-xl w-[40%] max-md:w-full text-center",children:d&&d.deal_name&&d.deal_name.length>15?`${d.deal_name.substring(0,15)}...`:d&&d.deal_name}),e.jsxs("div",{className:" flex flex-col w-[60%] max-md:w-full",children:[e.jsxs("div",{className:" bg-mansa-blue text-white py-2 text-center rounded-tr-xl max-md:rounded-t-xl",children:["Deal Size Amount:"," ",e.jsxs("span",{className:" font-semibold",children:["$",d.deal_size?T(d.deal_size):"0"]})]}),e.jsxs("div",{className:" flex flex-row  ",children:[e.jsxs("div",{className:" bg-[orange] text-white w-1/2 max-md:w-full py-2 pl-5 max-md:rounded-bl-xl",children:["In-Negotiation Value:"," ",e.jsxs("span",{className:" font-semibold",children:["$",d.negotiation_value?T(d.negotiation_value):"0"]})]}),e.jsxs("div",{className:" bg-[green] text-white w-1/2 max-md:w-full py-2 pl-5 rounded-br-xl ",children:["Deal Signed Value:"," ",e.jsxs("span",{className:" font-semibold",children:["$",d.signed_value?T(d.signed_value):"0"]})]})]})]})]}),e.jsx(Qs,{})]}),s&&e.jsx(ws,{onClose:()=>a(!1)}),l&&e.jsx(Us,{onClose:()=>r(!1)})]})}export{ca as default};
